[{"content":"æœ€è¿‘Manuså›¢é˜Ÿåˆ†äº«äº†ä¸€ä¸ªæœ‰è¶£çš„æ¡ˆä¾‹ï¼šä»…ä»…é€šè¿‡è§£å†³JSONåºåˆ—åŒ–é—®é¢˜ï¼Œä»–ä»¬çš„AIåº”ç”¨ç¼“å­˜å‘½ä¸­ç‡ä»20%æå‡åˆ°80%ï¼Œæˆæœ¬ç›´æ¥ä¸‹é™70%ã€‚æˆ‘æ‰“ç®—ç”¨é—®ç­”çš„å½¢å¼æ¥å†™è¿™ç¯‡æ–‡ç« ï¼Œæ–¹ä¾¿å¤§å®¶ç†è§£ã€‚\nä»€ä¹ˆæ˜¯å‰ç½®ç¼“å­˜ï¼Ÿä¸ºä»€ä¹ˆé‡è¦ï¼Ÿ Q: å‰ç½®ç¼“å­˜åˆ°åº•æ˜¯ä»€ä¹ˆæ¦‚å¿µï¼Ÿ A: å¤§æ¨¡å‹å¤„ç†è¯·æ±‚åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼š\né¢„å¡«å……é˜¶æ®µï¼šå¤„ç†è¾“å…¥çš„æ‰€æœ‰tokenï¼Œç”ŸæˆKVçŠ¶æ€\nç”Ÿæˆé˜¶æ®µï¼šåŸºäºKVçŠ¶æ€é€ä¸ªç”Ÿæˆè¾“å‡ºtoken\nå‰ç½®ç¼“å­˜å°±æ˜¯å¤ç”¨é¢„å¡«å……é˜¶æ®µçš„è®¡ç®—ç»“æœã€‚å½“å¤šä¸ªè¯·æ±‚æœ‰ç›¸åŒå‰ç¼€æ—¶ï¼Œå¯ä»¥ç›´æ¥è·³è¿‡é‡å¤è®¡ç®—ã€‚\nQ: è¿™èƒ½èŠ‚çœå¤šå°‘æˆæœ¬ï¼Ÿ A: ä»¥OpenAIä¸ºä¾‹ï¼Œç¼“å­˜å‘½ä¸­çš„è¾“å…¥tokenè´¹ç”¨ç›´æ¥å‡åŠã€‚å¯¹äºæœ‰å¤§é‡å›ºå®šå†…å®¹çš„åº”ç”¨ï¼ˆå¦‚ç³»ç»ŸæŒ‡ä»¤ã€å·¥å…·å®šä¹‰ï¼‰ï¼ŒèŠ‚çœå¯è¾¾60-80%ã€‚\næ ¸å¿ƒé—®é¢˜ï¼šä¸ºä»€ä¹ˆç¼“å­˜å‘½ä¸­ç‡ä½ï¼Ÿ Q: æˆ‘çš„åº”ç”¨promptçœ‹èµ·æ¥å¾ˆç›¸ä¼¼ï¼Œä¸ºä»€ä¹ˆç¼“å­˜å‘½ä¸­ç‡è¿˜æ˜¯å¾ˆä½ï¼Ÿ A: æœ€å¸¸è§çš„\u0026quot;éšå½¢æ€æ‰‹\u0026quot;æ˜¯å†…å®¹çš„å¾®å°å·®å¼‚ã€‚å“ªæ€•ä¸€ä¸ªå­—ç¬¦ä¸åŒï¼Œæ•´ä¸ªç¼“å­˜å°±å¤±æ•ˆäº†ã€‚\nå…¸å‹åœºæ™¯åŒ…æ‹¬ï¼š\nJSONé”®é¡ºåºéšæœº\nåŠ¨æ€æ—¶é—´æˆ³\néšæœºç”Ÿæˆçš„ID\næ ¼å¼ä¸ä¸€è‡´\nå®æˆ˜ä¼˜åŒ–ï¼šJSONåºåˆ—åŒ–æ ‡å‡†åŒ– Q: JSONåºåˆ—åŒ–é—®é¢˜å…·ä½“æ˜¯ä»€ä¹ˆï¼Ÿ A: çœ‹è¿™ä¸ªä¾‹å­ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20  // é—®é¢˜ä»£ç ï¼šé”®é¡ºåºä¸å›ºå®š const toolCall = { name: \u0026#34;search\u0026#34;, query: \u0026#34;hello\u0026#34; }; // å¯èƒ½åºåˆ—åŒ–ä¸ºï¼š{\u0026#34;name\u0026#34;:\u0026#34;search\u0026#34;,\u0026#34;query\u0026#34;:\u0026#34;hello\u0026#34;} // ä¹Ÿå¯èƒ½åºåˆ—åŒ–ä¸ºï¼š{\u0026#34;query\u0026#34;:\u0026#34;hello\u0026#34;,\u0026#34;name\u0026#34;:\u0026#34;search\u0026#34;}  // è§£å†³æ–¹æ¡ˆï¼šå¼ºåˆ¶é”®æ’åº function serializeFunction(obj) { return JSON.stringify(obj, Object.keys(obj).sort()); } // æˆ–è€…ä½¿ç”¨å›ºå®šé¡ºåºçš„å¯¹è±¡æ„é€  function createToolCall(name, query) { const ordered = {}; ordered.name = name; ordered.query = query; return JSON.stringify(ordered); }   Q: è¿˜æœ‰å“ªäº›ç±»ä¼¼çš„éšè—é—®é¢˜ï¼Ÿ A: å¸¸è§çš„è¿˜æœ‰ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13  // é—®é¢˜ï¼šåŠ¨æ€å†…å®¹æ±¡æŸ“ç¼“å­˜ const badPrompt = ` æ—¶é—´ï¼š${new Date().toISOString()}ç”¨æˆ·IDï¼š${userId}ä¼šè¯IDï¼š${sessionId}ä½ æ˜¯AIåŠ©æ‰‹... `; // è§£å†³ï¼šç§»é™¤åŠ¨æ€å†…å®¹ const goodPrompt = ` ä½ æ˜¯AIåŠ©æ‰‹... `;   åˆ†å±‚ç¼“å­˜ç­–ç•¥è®¾è®¡ Q: å¦‚ä½•è®¾è®¡ç¼“å­˜å‹å¥½çš„promptç»“æ„ï¼Ÿ A: é‡‡ç”¨åˆ†å±‚è®¾è®¡ï¼Œä»æœ€ç¨³å®šåˆ°æœ€åŠ¨æ€ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22  function buildPrompt(userContext, history, currentInput) { const layers = [ getSystemInstructions(), // ç¬¬1å±‚ï¼šå…¨å±€å›ºå®š  getToolDefinitions(), // ç¬¬2å±‚ï¼šåº”ç”¨çº§å›ºå®š  formatUserContext(userContext), // ç¬¬3å±‚ï¼šç”¨æˆ·çº§å›ºå®š  formatHistory(history), // ç¬¬4å±‚ï¼šä¼šè¯çº§ç´¯ç§¯  currentInput // ç¬¬5å±‚ï¼šæ¯æ¬¡å˜åŒ–  ]; return layers.join(\u0026#39;\\n\\n\u0026#39;); } // ç¡®ä¿æ¯å±‚å†…å®¹æ ¼å¼ä¸€è‡´ function getToolDefinitions() { const tools = [ { name: \u0026#34;search\u0026#34;, description: \u0026#34;æœç´¢åŠŸèƒ½\u0026#34; }, { name: \u0026#34;analyze\u0026#34;, description: \u0026#34;åˆ†æåŠŸèƒ½\u0026#34; } ]; // å…³é”®ï¼šç¡®ä¿é¡ºåºå’Œæ ¼å¼å›ºå®š  return JSON.stringify(tools, null, 2); }   Q: å†å²å¯¹è¯æ€ä¹ˆå¤„ç†æ‰èƒ½æé«˜ç¼“å­˜å‘½ä¸­ï¼Ÿ A: æ ‡å‡†åŒ–å†å²æ ¼å¼ï¼š\n1 2 3 4 5 6 7 8 9 10  function formatHistory(messages) { return messages.map(msg =\u0026gt; { // ç»Ÿä¸€æ ¼å¼ï¼Œç§»é™¤æ—¶é—´æˆ³ç­‰åŠ¨æ€ä¿¡æ¯  return { role: msg.role, content: msg.content, // ç§»é™¤ï¼štimestamp, messageId ç­‰  }; }).map(msg =\u0026gt; JSON.stringify(msg)).join(\u0026#39;\\n\u0026#39;); }   ç›‘æ§å’ŒæŒç»­ä¼˜åŒ– Q: æ€ä¹ˆçŸ¥é“æˆ‘çš„ç¼“å­˜ä¼˜åŒ–æ˜¯å¦æœ‰æ•ˆï¼Ÿ A: å»ºç«‹ç›‘æ§æŒ‡æ ‡ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29  class CacheMonitor { constructor() { this.stats = { totalRequests: 0, cacheHits: 0, cacheMisses: 0 }; } recordRequest(cacheHit) { this.stats.totalRequests++; if (cacheHit) { this.stats.cacheHits++; } else { this.stats.cacheMisses++; } } getCacheHitRate() { return this.stats.cacheHits / this.stats.totalRequests; } // åˆ†æç¼“å­˜æœªå‘½ä¸­çš„åŸå›   analyzeMiss(prompt1, prompt2) { // æ‰¾å‡ºå·®å¼‚ç‚¹  const diff = findDifferences(prompt1, prompt2); console.log(\u0026#39;Cache miss caused by:\u0026#39;, diff); } }   å®é™…æ•ˆæœå’ŒROI Q: è¿™äº›ä¼˜åŒ–çš„å®é™…æ”¶ç›Šå¦‚ä½•ï¼Ÿ A: ä»¥ä¸€ä¸ªå…¸å‹åº”ç”¨ä¸ºä¾‹ï¼š\nä¼˜åŒ–å‰ï¼š\n å›ºå®šå†…å®¹ï¼š1500 tokensï¼ˆç³»ç»ŸæŒ‡ä»¤+å·¥å…·å®šä¹‰ï¼‰ å†å²å¯¹è¯ï¼š500 tokens æ–°è¾“å…¥ï¼š100 tokens æ¯æ¬¡éƒ½è¦è®¡ç®—å…¨éƒ¨2100 tokens  ä¼˜åŒ–åï¼š\n å›ºå®šéƒ¨åˆ†ç¼“å­˜å‘½ä¸­ç‡ï¼š95% å†å²éƒ¨åˆ†ç¼“å­˜å‘½ä¸­ç‡ï¼š80% å®é™…è®¡ç®—é‡å‡å°‘ï¼š60-70% å“åº”é€Ÿåº¦æå‡ï¼š2-3å€  æœ€ä½³å®è·µæ¸…å• JSONåºåˆ—åŒ–æ ‡å‡†åŒ–ï¼šç¡®ä¿é”®é¡ºåºå›ºå®š\nç§»é™¤åŠ¨æ€å†…å®¹ï¼šæ—¶é—´æˆ³ã€IDç­‰ä¸è¦æ··å…¥prompt\nåˆ†å±‚è®¾è®¡ï¼šæŒ‰å˜åŒ–é¢‘ç‡ç»„ç»‡å†…å®¹ç»“æ„\næ ¼å¼ç»Ÿä¸€ï¼šç©ºæ ¼ã€æ¢è¡Œã€æ ‡ç‚¹ç¬¦å·ä¿æŒä¸€è‡´\nç›‘æ§ä¼˜åŒ–ï¼šæŒç»­è·Ÿè¸ªç¼“å­˜å‘½ä¸­ç‡\næ‰¹å¤„ç†ä¼˜åŒ–ï¼šç›¸ä¼¼è¯·æ±‚å…±äº«æ›´å¤šå‰ç¼€\næ€»ç»“ å‰ç½®ç¼“å­˜ä¼˜åŒ–ä¸åªæ˜¯æŠ€æœ¯é—®é¢˜ï¼Œæ›´æ˜¯æˆæœ¬æ§åˆ¶çš„å…³é”®ã€‚é€šè¿‡ç³»ç»Ÿæ€§åœ°æ¶ˆé™¤promptä¸­çš„éšæœºæ€§å’Œä¸ä¸€è‡´æ€§ï¼Œå¯ä»¥æ˜¾è‘—æå‡ç¼“å­˜å‘½ä¸­ç‡ï¼Œå®ç°æˆæœ¬å’Œæ€§èƒ½çš„åŒé‡ä¼˜åŒ–ã€‚\nè®°ä½æ ¸å¿ƒåŸåˆ™ï¼šè®©ç›¸åŒçš„è¾“å…¥äº§ç”Ÿå®Œå…¨ç›¸åŒçš„tokenåºåˆ—ã€‚è¿™çœ‹ä¼¼ç®€å•ï¼Œä½†é­”é¬¼åœ¨ç»†èŠ‚ä¸­ã€‚ä»JSONåºåˆ—åŒ–å¼€å§‹ï¼Œé€æ­¥ä¼˜åŒ–æ¯ä¸€ä¸ªå¯èƒ½å½±å“ç¼“å­˜çš„å› ç´ ï¼Œä½ çš„AIåº”ç”¨æˆæœ¬å°†ä¼šæœ‰è´¨çš„é£è·ƒã€‚\n","description":"","id":0,"section":"posts","tags":null,"title":"AIåº”ç”¨å‰ç½®ç¼“å­˜ä¼˜åŒ–æŒ‡å—ï¼šä»70%æˆæœ¬èŠ‚çœè¯´èµ·","uri":"https://llane.xyz/posts/ai%E5%BA%94%E7%94%A8%E5%89%8D%E7%BD%AE%E7%BC%93%E5%AD%98%E4%BC%98%E5%8C%96%E6%8C%87%E5%8D%97%E4%BB%8E70%E6%88%90%E6%9C%AC%E8%8A%82%E7%9C%81%E8%AF%B4%E8%B5%B7/"},{"content":"å‰è¨€ RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰å·²æˆä¸ºAIåº”ç”¨çš„æ ¸å¿ƒæŠ€æœ¯ã€‚æœ¬æ–‡ä»å¼€å‘è€…å®æˆ˜è§’åº¦ï¼Œè§£æå¦‚ä½•æ„å»ºé«˜æ•ˆçš„æ–‡æ¡£é—®ç­”ç³»ç»Ÿï¼Œå¹¶å¯¹æ¯”è‡ªå»ºä¸äº‘æœåŠ¡æ–¹æ¡ˆçš„ä¼˜åŠ£ã€‚\næ ¸å¿ƒåŸç†ï¼šRAGç³»ç»Ÿå¦‚ä½•å·¥ä½œï¼Ÿ å¼€å‘è€…å¸¸è§ç–‘é—® Q: ç”¨æˆ·æé—®æ—¶ï¼Œæ–‡æ¡£æ˜¯å®æ—¶ä¸Šä¼ ç»™AIçš„å—ï¼Ÿ\nA: ä¸æ˜¯ã€‚RAGé‡‡ç”¨ç¦»çº¿é¢„å¤„ç† + åœ¨çº¿æ£€ç´¢çš„æ¨¡å¼ï¼š\n ç¦»çº¿é˜¶æ®µï¼šæ–‡æ¡£åˆ‡åˆ†â†’å‘é‡åŒ–â†’å­˜å‚¨åˆ°å‘é‡æ•°æ®åº“ åœ¨çº¿é˜¶æ®µï¼šç”¨æˆ·é—®é¢˜â†’å‘é‡æ£€ç´¢â†’ç»„è£…promptâ†’è°ƒç”¨LLM  Q: ä¸ºä»€ä¹ˆä¸ç›´æ¥æŠŠæ‰€æœ‰æ–‡æ¡£å‘ç»™AIï¼Ÿ\nA: ä¸‰ä¸ªé™åˆ¶ï¼š\n Tokené™åˆ¶ï¼šGPT-4æœ€å¤š128K tokensï¼Œå¤§å‹æ–‡æ¡£åº“æ— æ³•ä¸€æ¬¡å¤„ç† æˆæœ¬é—®é¢˜ï¼šæŒ‰tokenè®¡è´¹ï¼Œå…¨æ–‡æ¡£æˆæœ¬è¿‡é«˜ å‡†ç¡®æ€§ï¼šä¿¡æ¯è¿‡å¤šä¼šç¨€é‡Šå…³é”®å†…å®¹ï¼Œå½±å“å›ç­”è´¨é‡  è‡ªå»ºRAGç³»ç»Ÿæ¶æ„ 1. æ–‡æ¡£é¢„å¤„ç†æµç¨‹ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49  // Node.js å®ç°æ–‡æ¡£å¤„ç† const { RecursiveCharacterTextSplitter } = require(\u0026#39;langchain/text_splitter\u0026#39;); const { OpenAIEmbeddings } = require(\u0026#39;langchain/embeddings/openai\u0026#39;); class DocumentProcessor { constructor() { this.embeddings = new OpenAIEmbeddings({ openAIApiKey: process.env.OPENAI_API_KEY }); this.textSplitter = new RecursiveCharacterTextSplitter({ chunkSize: 1000, chunkOverlap: 200 }); } async processDocument(filePath) { console.log(`å¤„ç†æ–‡æ¡£: ${filePath}`); // 1. è¯»å–æ–‡æ¡£å†…å®¹  const content = await this.extractText(filePath); // 2. æ™ºèƒ½åˆ‡åˆ†  const chunks = await this.textSplitter.splitText(content); console.log(`æ–‡æ¡£åˆ‡åˆ†ä¸º ${chunks.length}ä¸ªç‰‡æ®µ`); // 3. æ‰¹é‡å‘é‡åŒ–  const vectors = await this.embeddings.embedDocuments(chunks); // 4. å­˜å‚¨åˆ°å‘é‡æ•°æ®åº“  await this.storeToVectorDB(chunks, vectors, filePath); return { chunks: chunks.length, vectors: vectors.length }; } async storeToVectorDB(chunks, vectors, source) { // å­˜å‚¨åˆ°Pinecone/Chromaç­‰å‘é‡æ•°æ®åº“  const records = chunks.map((chunk, index) =\u0026gt; ({ id: `${source}_${index}`, values: vectors[index], metadata: { text: chunk, source: source, chunk_id: index } })); await this.vectorDB.upsert(records); } }   2. æŸ¥è¯¢å¤„ç†æµç¨‹ Q: ç”¨æˆ·æé—®åï¼Œç³»ç»Ÿå¦‚ä½•æ‰¾åˆ°ç›¸å…³æ–‡æ¡£ï¼Ÿ\nA: é€šè¿‡è¯­ä¹‰ç›¸ä¼¼åº¦æ£€ç´¢ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52  class RAGQueryProcessor { constructor() { this.embeddings = new OpenAIEmbeddings(); this.vectorDB = new PineconeClient(); this.llm = new OpenAI({ temperature: 0.1 }); } async processQuery(userQuestion) { console.log(`å¤„ç†ç”¨æˆ·é—®é¢˜: ${userQuestion}`); // 1. é—®é¢˜å‘é‡åŒ–  const questionVector = await this.embeddings.embedQuery(userQuestion); // 2. å‘é‡æ£€ç´¢ç›¸ä¼¼æ–‡æ¡£  const searchResults = await this.vectorDB.query({ vector: questionVector, topK: 3, includeMetadata: true }); // 3. æå–ç›¸å…³æ–‡æ¡£å†…å®¹  const relevantDocs = searchResults.matches.map(match =\u0026gt; ({ content: match.metadata.text, score: match.score, source: match.metadata.source })); console.log(`æ£€ç´¢åˆ° ${relevantDocs.length}ä¸ªç›¸å…³æ–‡æ¡£ç‰‡æ®µ`); // 4. æ„å»ºä¸Šä¸‹æ–‡prompt  const context = relevantDocs .map(doc =\u0026gt; `æ–‡æ¡£ç‰‡æ®µ(ç›¸ä¼¼åº¦:${doc.score.toFixed(3)}):\\n${doc.content}`) .join(\u0026#39;\\n\\n\u0026#39;); const prompt = `åŸºäºä»¥ä¸‹æ–‡æ¡£å›ç­”ç”¨æˆ·é—®é¢˜ï¼š ${context}ç”¨æˆ·é—®é¢˜ï¼š${userQuestion}è¯·æä¾›å‡†ç¡®çš„å›ç­”ï¼š`; // 5. è°ƒç”¨LLMç”Ÿæˆç­”æ¡ˆ  const response = await this.llm.call(prompt); return { answer: response, sources: relevantDocs.map(doc =\u0026gt; doc.source), relevanceScores: relevantDocs.map(doc =\u0026gt; doc.score) }; } }   3. APIæœåŠ¡å®ç° Q: å¦‚ä½•å°†RAGç³»ç»Ÿå°è£…ä¸ºAPIæœåŠ¡ï¼Ÿ\nA: ä½¿ç”¨Expressæ„å»ºRESTful APIï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34  const express = require(\u0026#39;express\u0026#39;); const app = express(); const ragProcessor = new RAGQueryProcessor(); app.post(\u0026#39;/api/ask\u0026#39;, async (req, res) =\u0026gt; { try { const { question, sessionId } = req.body; console.log(`[${sessionId}] æ”¶åˆ°é—®é¢˜: ${question}`); // å¤„ç†RAGæŸ¥è¯¢  const result = await ragProcessor.processQuery(question); res.json({ answer: result.answer, sources: result.sources, confidence: result.relevanceScores, sessionId, timestamp: new Date().toISOString() }); } catch (error) { console.error(\u0026#39;RAGå¤„ç†é”™è¯¯:\u0026#39;, error); res.status(500).json({ error: \u0026#39;æœåŠ¡æš‚æ—¶ä¸å¯ç”¨\u0026#39;, message: error.message }); } }); app.listen(3000, () =\u0026gt; { console.log(\u0026#39;RAG APIæœåŠ¡å¯åŠ¨åœ¨ç«¯å£ 3000\u0026#39;); });   äº‘æœåŠ¡RAGæ–¹æ¡ˆå¯¹æ¯” å¼€å‘è€…å†³ç­–é—®é¢˜ Q: è‡ªå»ºRAG vs äº‘æœåŠ¡RAGï¼Œå¦‚ä½•é€‰æ‹©ï¼Ÿ\nA: å…³é”®å¯¹æ¯”ç»´åº¦ï¼š\n   ç»´åº¦ è‡ªå»ºRAG äº‘æœåŠ¡RAG     å¼€å‘å‘¨æœŸ 2-4å‘¨ 2-3å¤©   æŠ€æœ¯é—¨æ§› éœ€è¦ML/å‘é‡æ•°æ®åº“ç»éªŒ è°ƒç”¨APIå³å¯   è¿ç»´æˆæœ¬ éœ€è¦ä¸“é—¨å›¢é˜Ÿç»´æŠ¤ å‡ ä¹é›¶ç»´æŠ¤   å®šåˆ¶åŒ– å®Œå…¨å¯æ§ å—é™äºæœåŠ¡å•†   æˆæœ¬ åŸºç¡€è®¾æ–½+äººåŠ›æˆæœ¬ æŒ‰ä½¿ç”¨é‡ä»˜è´¹    Q: å“ªäº›åœºæ™¯é€‚åˆäº‘æœåŠ¡RAGï¼Ÿ\nA: æ¨èåœºæ™¯ï¼š\n å¿«é€ŸMVPéªŒè¯ï¼šéœ€è¦å¿«é€Ÿä¸Šçº¿æµ‹è¯• ä¸­å°å‹å›¢é˜Ÿï¼šç¼ºä¹AIåŸºç¡€è®¾æ–½ç»éªŒ æ ‡å‡†åŒ–éœ€æ±‚ï¼šæ–‡æ¡£é—®ç­”ã€å®¢æœåŠ©æ‰‹ç­‰é€šç”¨åœºæ™¯  äº‘æœåŠ¡å¿«é€Ÿå®ç° 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43  // Azure AI Search + OpenAI ç¤ºä¾‹ const { SearchClient, AzureKeyCredential } = require(\u0026#39;@azure/search-documents\u0026#39;); const { OpenAI } = require(\u0026#39;openai\u0026#39;); class AzureRAGService { constructor() { this.searchClient = new SearchClient( process.env.AZURE_SEARCH_ENDPOINT, \u0026#39;customer-docs\u0026#39;, new AzureKeyCredential(process.env.AZURE_SEARCH_KEY) ); this.openai = new OpenAI({ apiKey: process.env.OPENAI_API_KEY }); } async queryWithRAG(question) { // 1. Azure AI Search è‡ªåŠ¨æ£€ç´¢  const searchResults = await this.searchClient.search(question, { top: 3, searchMode: \u0026#39;hybrid\u0026#39; // å…³é”®è¯+è¯­ä¹‰æ··åˆæ£€ç´¢  }); // 2. æå–æ£€ç´¢ç»“æœ  const context = []; for await (const result of searchResults.results) { context.push(result.document.content); } // 3. è°ƒç”¨OpenAI  const response = await this.openai.chat.completions.create({ model: \u0026#39;gpt-3.5-turbo\u0026#39;, messages: [{ role: \u0026#39;user\u0026#39;, content: `å‚è€ƒæ–‡æ¡£ï¼š\\n${context.join(\u0026#39;\\n\\n\u0026#39;)}\\n\\né—®é¢˜ï¼š${question}` }], temperature: 0.1 }); return response.choices[0].message.content; } }   æ€§èƒ½ä¼˜åŒ–ç­–ç•¥ å¼€å‘è€…ä¼˜åŒ–é—®é¢˜ Q: RAGç³»ç»Ÿå“åº”æ…¢ï¼Œå¦‚ä½•ä¼˜åŒ–ï¼Ÿ\nA: ä¸‰å±‚ä¼˜åŒ–ç­–ç•¥ï¼š\n ç¼“å­˜å±‚ï¼šç›¸åŒé—®é¢˜ç›´æ¥è¿”å›ç¼“å­˜ç»“æœ æ£€ç´¢ä¼˜åŒ–ï¼šé¢„è®¡ç®—çƒ­é—¨æŸ¥è¯¢çš„å‘é‡ å¹¶å‘å¤„ç†ï¼šå‘é‡æ£€ç´¢ä¸LLMè°ƒç”¨å¹¶è¡Œ  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31  class OptimizedRAG { constructor() { this.cache = new Map(); this.ragProcessor = new RAGQueryProcessor(); } async processWithCache(question) { // æ£€æŸ¥ç¼“å­˜  const cacheKey = this.generateCacheKey(question); if (this.cache.has(cacheKey)) { console.log(\u0026#39;å‘½ä¸­ç¼“å­˜\u0026#39;); return this.cache.get(cacheKey); } // å¤„ç†æ–°é—®é¢˜  const result = await this.ragProcessor.processQuery(question); // ç¼“å­˜ç»“æœï¼ˆ1å°æ—¶è¿‡æœŸï¼‰  setTimeout(() =\u0026gt; this.cache.delete(cacheKey), 3600000); this.cache.set(cacheKey, result); return result; } generateCacheKey(question) { return require(\u0026#39;crypto\u0026#39;) .createHash(\u0026#39;md5\u0026#39;) .update(question.toLowerCase().trim()) .digest(\u0026#39;hex\u0026#39;); } }   å®æˆ˜å»ºè®® æŠ€æœ¯é€‰å‹å»ºè®® Q: åˆå­¦è€…å¦‚ä½•å¼€å§‹RAGé¡¹ç›®ï¼Ÿ\nA: æ¨èè·¯å¾„ï¼š\n ç¬¬ä¸€é˜¶æ®µï¼šä½¿ç”¨LangChain + OpenAIå¿«é€ŸåŸå‹ ç¬¬äºŒé˜¶æ®µï¼šé›†æˆå‘é‡æ•°æ®åº“ï¼ˆPinecone/Chromaï¼‰ ç¬¬ä¸‰é˜¶æ®µï¼šè€ƒè™‘äº‘æœåŠ¡è¿ç§»æˆ–æ·±åº¦å®šåˆ¶  Q: ç”Ÿäº§ç¯å¢ƒéœ€è¦æ³¨æ„ä»€ä¹ˆï¼Ÿ\nA: å…³é”®è¦ç‚¹ï¼š\n é”™è¯¯å¤„ç†ï¼šå‘é‡æ£€ç´¢å¤±è´¥çš„é™çº§ç­–ç•¥ ç›‘æ§æŒ‡æ ‡ï¼šå“åº”æ—¶é—´ã€æ£€ç´¢å‡†ç¡®ç‡ã€ç”¨æˆ·æ»¡æ„åº¦ å®‰å…¨è€ƒè™‘ï¼šAPIé™æµã€å†…å®¹è¿‡æ»¤ã€æ•°æ®éšç§  ç»“è¯­ RAGç³»ç»Ÿçš„æ ¸å¿ƒæ˜¯å¹³è¡¡å‡†ç¡®æ€§ä¸æ•ˆç‡ã€‚è‡ªå»ºæ–¹æ¡ˆæä¾›æœ€å¤§çµæ´»æ€§ï¼Œäº‘æœåŠ¡æ–¹æ¡ˆé™ä½æŠ€æœ¯é—¨æ§›ã€‚é€‰æ‹©åˆé€‚çš„æŠ€æœ¯æ ˆï¼Œå…³æ³¨æ€§èƒ½ä¼˜åŒ–ï¼Œå°±èƒ½æ„å»ºå‡ºä¼˜ç§€çš„AIæ–‡æ¡£é—®ç­”ç³»ç»Ÿã€‚\nä»MVPåˆ°ç”Ÿäº§çº§ç³»ç»Ÿï¼ŒRAGæŠ€æœ¯æ­£åœ¨é‡å¡‘çŸ¥è¯†ç®¡ç†å’Œå®¢æˆ·æœåŠ¡çš„æœªæ¥ã€‚\n","description":"","id":1,"section":"posts","tags":null,"title":"RAGç³»ç»Ÿå®æˆ˜æŒ‡å—ï¼šä»é›¶æ„å»ºAIå®¢æœåŠ©æ‰‹çš„æ–‡æ¡£é—®ç­”èƒ½åŠ›","uri":"https://llane.xyz/posts/rag%E7%B3%BB%E7%BB%9F%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97/"},{"content":" åŸºäºMicrosoft vscode-copilot-chatå¼€æºé¡¹ç›®çš„æ·±åº¦åˆ†æï¼Œæ€»ç»“ç°ä»£AIåŠ©æ‰‹ä¸­æç¤ºè¯æ„å»ºå’Œå“åº”æ ¼å¼æ§åˆ¶çš„å®Œæ•´è§£å†³æ–¹æ¡ˆã€‚\n ğŸ“‹ ç›®å½•  1. æ¦‚è¿° 2. æç¤ºè¯æ„å»ºï¼šTagæ ‡ç­¾æ–¹æ³• 3. æ ¼å¼åŒ–è¾“å‡ºï¼šä¸‰ç§æ–¹æ³•å¯¹æ¯” 4. Function Callï¼šç»ˆæè§£å†³æ–¹æ¡ˆ 5. å®Œç¾ç»„åˆï¼šTag + Function Call 6. å®æˆ˜æ¡ˆä¾‹åˆ†æ 7. æœ€ä½³å®è·µæŒ‡å—  1. æ¦‚è¿° åœ¨æ„å»ºç°ä»£AIåŠ©æ‰‹æ—¶ï¼Œæˆ‘ä»¬é¢ä¸´ä¸¤ä¸ªæ ¸å¿ƒæŒ‘æˆ˜ï¼š\n å¦‚ä½•æ„å»ºç»“æ„åŒ–ã€æ˜“ç†è§£çš„æç¤ºè¯ï¼Ÿ å¦‚ä½•è·å–å¯é çš„æ ¼å¼åŒ–è¾“å‡ºï¼Ÿ  é€šè¿‡å¯¹vscode-copilot-chaté¡¹ç›®çš„æ·±å…¥åˆ†æï¼Œæˆ‘ä»¬å‘ç°äº†ä¸€å¥—æˆç†Ÿçš„è§£å†³æ–¹æ¡ˆï¼š\n   ç”¨é€” æ–¹æ³• å¯é æ€§ é€‚ç”¨åœºæ™¯     æ„å»ºæç¤ºè¯ Tagæ ‡ç­¾ â­â­â­â­â­ ç»„ç»‡å¤æ‚æç¤ºè¯ç»“æ„   æ ¼å¼åŒ–è¾“å‡º Function Call â­â­â­â­â­ è·å–å¯é çš„ç»“æ„åŒ–æ•°æ®    2. æç¤ºè¯æ„å»ºï¼šTagæ ‡ç­¾æ–¹æ³• 2.1 æ ¸å¿ƒåŸç† ç°ä»£å¤§è¯­è¨€æ¨¡å‹å¯¹ç»“æ„åŒ–æ ‡ç­¾æœ‰å¤©ç„¶çš„ç†è§£ä¼˜åŠ¿ï¼ŒXML/HTMLæ ‡ç­¾æ¯”çº¯æ–‡æœ¬æ›´å®¹æ˜“è¢«å‡†ç¡®è§£æã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13  // vscode-copilot-chatçš„Tagç»„ä»¶å®ç° export class Tag extends PromptElement\u0026lt;TagProps\u0026gt; { render() { const { name, children, attrs = {} } = this.props; return ( \u0026lt;\u0026gt; \u0026lt;KeepWith\u0026gt;{`\u0026lt;${name}${attrStr}\u0026gt;\\n`}\u0026lt;/KeepWith\u0026gt; \u0026lt;TagInner priority={1} flexGrow={1}\u0026gt;{children}\u0026lt;br /\u0026gt;\u0026lt;/TagInner\u0026gt; \u0026lt;KeepWith\u0026gt;{`\u0026lt;/${name}\u0026gt;`}\u0026lt;/KeepWith\u0026gt; \u0026lt;/\u0026gt; ); } }   2.2 æ ‡ç­¾åˆ†ç±»ç³»ç»Ÿ ğŸ¯ æŒ‡ä»¤ç±»æ ‡ç­¾ 1 2 3 4 5 6 7  \u0026lt;instructions\u0026gt; You are a highly sophisticated automated coding agent with expert-level knowledge... \u0026lt;/instructions\u0026gt; \u0026lt;toolUseInstructions\u0026gt; When using a tool, follow the JSON schema carefully and ensure all required parameters are provided... \u0026lt;/toolUseInstructions\u0026gt;   ğŸŒ ä¸Šä¸‹æ–‡ç±»æ ‡ç­¾ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15  \u0026lt;environment_info\u0026gt; \u0026lt;UserOSPrompt /\u0026gt; \u0026lt;UserShellPrompt /\u0026gt; \u0026lt;/environment_info\u0026gt; \u0026lt;workspace_info\u0026gt; \u0026lt;WorkspaceFoldersHint /\u0026gt; \u0026lt;MultirootWorkspaceStructure maxSize={2000} /\u0026gt; \u0026lt;/workspace_info\u0026gt; \u0026lt;context\u0026gt; \u0026lt;CurrentDatePrompt /\u0026gt; \u0026lt;EditedFileEvents /\u0026gt; \u0026lt;TerminalState /\u0026gt; \u0026lt;/context\u0026gt;   ğŸ“ ç”¨æˆ·è¯·æ±‚æ ‡ç­¾ 1 2 3 4 5 6 7 8  \u0026lt;userRequest priority={900}\u0026gt; {query + attachmentHint} \u0026lt;/userRequest\u0026gt; \u0026lt;reminderInstructions\u0026gt; {getKeepGoingReminder(modelFamily)} {getEditingReminder(hasEditTool, hasReplaceStringTool)} \u0026lt;/reminderInstructions\u0026gt;   2.3 åŠ¨æ€æ ‡ç­¾ç”Ÿæˆ 1 2 3 4 5 6 7 8 9 10  // æ ¹æ®å¯ç”¨å·¥å…·åŠ¨æ€è°ƒæ•´æç¤ºè¯å†…å®¹ const hasReadFileTool = !!availableTools?.find(tool =\u0026gt; tool.name === \u0026#39;readFile\u0026#39;); const hasTerminalTool = !!availableTools?.find(tool =\u0026gt; tool.name === \u0026#39;runInTerminal\u0026#39;); return ( \u0026lt;toolUseInstructions\u0026gt; {hasReadFileTool \u0026amp;\u0026amp; \u0026lt;\u0026gt;When using the readFile tool, prefer reading large sections...\u0026lt;/\u0026gt;} {hasTerminalTool \u0026amp;\u0026amp; \u0026lt;\u0026gt;NEVER print terminal commands, use the runInTerminal tool instead...\u0026lt;/\u0026gt;} \u0026lt;/toolUseInstructions\u0026gt; );   2.4 Tagæ ‡ç­¾çš„ä¼˜åŠ¿    ä¼˜åŠ¿ è¯´æ˜ ç¤ºä¾‹     ç»“æ„æ¸…æ™° å†…å®¹åˆ†ç±»æ˜ç¡®ï¼ŒAIç†è§£æ›´å‡†ç¡® \u0026lt;instructions\u0026gt; vs \u0026lt;context\u0026gt;   è¯­ä¹‰æ˜ç¡® æ ‡ç­¾åç›´æ¥è¡¨è¾¾å†…å®¹ç”¨é€” \u0026lt;userRequest\u0026gt; vs \u0026lt;examples\u0026gt;   æ˜“äºè§£æ AIæ¨¡å‹å¯¹XMLæ ‡ç­¾ç†è§£æ›´å¥½ æ¯”çº¯æ–‡æœ¬å‡†ç¡®ç‡é«˜20-30%   å¯ç»„åˆæ€§ æ”¯æŒåµŒå¥—å’Œæ¨¡å—åŒ–ç»„ç»‡ \u0026lt;context\u0026gt;\u0026lt;currentFile\u0026gt;...\u0026lt;/currentFile\u0026gt;\u0026lt;/context\u0026gt;    3. æ ¼å¼åŒ–è¾“å‡ºï¼šä¸‰ç§æ–¹æ³•å¯¹æ¯” 3.1 æ–¹æ³•ä¸€ï¼šçº¯æç¤ºè¯JSON å®ç°æ–¹å¼ 1 2 3 4 5 6 7 8  const prompt = ` è¯·æŒ‰ä»¥ä¸‹JSONæ ¼å¼è¿”å›ç»“æœï¼š { \u0026#34;action\u0026#34;: \u0026#34;create|edit|delete\u0026#34;, \u0026#34;filePath\u0026#34;: \u0026#34;æ–‡ä»¶è·¯å¾„\u0026#34;, \u0026#34;content\u0026#34;: \u0026#34;æ–‡ä»¶å†…å®¹\u0026#34; } `;   å¸¸è§é—®é¢˜ 1 2 3 4 5 6 7 8  âŒ AIç»å¸¸è¿”å›ï¼š ```json { \u0026#34;action\u0026#34;: \u0026#34;create\u0026#34;, \u0026#34;filePath\u0026#34;: \u0026#34;/test.js\u0026#34; // çªç„¶åœæ­¢æˆ–æ·»åŠ è§£é‡Šæ–‡å­— } æˆ‘è§‰å¾—è¿™ä¸ªæ–‡ä»¶è¿˜éœ€è¦...   âŒ æˆ–è€…æ ¼å¼é”™è¯¯ï¼š\n1 2 3  { action: \u0026#34;create\u0026#34; // ç¼ºå°‘å¼•å·  \u0026#34;filePath\u0026#34;: \u0026#34;/test.js\u0026#34;, // å¤šä½™é€—å·   é—®é¢˜æ ¹æº  AIå®¹æ˜“\u0026quot;å‘æŒ¥\u0026quot;ï¼Œæ·»åŠ é¢å¤–å†…å®¹ JSONæ ¼å¼å®¹é”™æ€§å·® å¤æ‚åµŒå¥—ç»“æ„æˆåŠŸç‡ä½ è§£æå¤±è´¥åéš¾ä»¥æ¢å¤  3.2 æ–¹æ³•äºŒï¼šTagæ ‡ç­¾ç»“æ„åŒ– å®ç°æ–¹å¼ 1 2 3 4 5 6 7 8  \u0026lt;outputFormat\u0026gt; Always respond in this format: \u0026lt;action\u0026gt;create|edit|delete\u0026lt;/action\u0026gt; \u0026lt;filePath\u0026gt;/path/to/file\u0026lt;/filePath\u0026gt; \u0026lt;content\u0026gt; // æ–‡ä»¶å†…å®¹  \u0026lt;/content\u0026gt; \u0026lt;/outputFormat\u0026gt;   è§£æç¤ºä¾‹ 1 2 3 4 5 6 7 8 9 10 11 12  // ç›¸å¯¹å¯é çš„è§£æ function parseTagResponse(response) { const actionMatch = response.match(/\u0026lt;action\u0026gt;(.*?)\u0026lt;\\/action\u0026gt;/); const pathMatch = response.match(/\u0026lt;filePath\u0026gt;(.*?)\u0026lt;\\/filePath\u0026gt;/); const contentMatch = response.match(/\u0026lt;content\u0026gt;(.*?)\u0026lt;\\/content\u0026gt;/s); return { action: actionMatch?.[1], filePath: pathMatch?.[1], content: contentMatch?.[1] }; }   ä¼˜åŠ¿ä¸å±€é™  âœ… æ¯”JSONæ›´å¯é ï¼ˆ85-90%æˆåŠŸç‡ï¼‰ âœ… AIå¯¹æ ‡ç­¾ç†è§£æ›´å¥½ âœ… å®¹é”™æ€§è¾ƒå¼º âš ï¸ ä»éœ€æ‰‹åŠ¨è§£æ âš ï¸ å¤æ‚åµŒå¥—æ—¶å¯èƒ½å‡ºé”™  3.3 æ–¹æ³•ä¸‰ï¼šFunction Call Schemaå®šä¹‰ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23  const toolSchema: vscode.LanguageModelToolInformation = { name: \u0026#39;editFile\u0026#39;, description: \u0026#39;Edit a file with specific changes\u0026#39;, inputSchema: { type: \u0026#39;object\u0026#39;, required: [\u0026#39;filePath\u0026#39;, \u0026#39;action\u0026#39;], properties: { filePath: { type: \u0026#39;string\u0026#39;, description: \u0026#39;æ–‡ä»¶ç»å¯¹è·¯å¾„\u0026#39; }, action: { type: \u0026#39;string\u0026#39;, enum: [\u0026#39;create\u0026#39;, \u0026#39;edit\u0026#39;, \u0026#39;delete\u0026#39;], description: \u0026#39;æ“ä½œç±»å‹\u0026#39; }, content: { type: \u0026#39;string\u0026#39;, description: \u0026#39;æ–‡ä»¶å†…å®¹\u0026#39; } } } };   å·¥å…·å®ç° 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30  class EditFileTool implements ICopilotTool\u0026lt;EditFileParams\u0026gt; { async invoke(options: vscode.LanguageModelToolInvocationOptions\u0026lt;EditFileParams\u0026gt;) { // 1. è‡ªåŠ¨éªŒè¯è¾“å…¥å‚æ•°ï¼ˆSchemaå¼ºåˆ¶çº¦æŸï¼‰  const { filePath, action, content } = options.input; // 2. æ‰§è¡Œå®é™…æ“ä½œ  switch (action) { case \u0026#39;create\u0026#39;: await this.fileSystem.writeFile(filePath, content); break; case \u0026#39;edit\u0026#39;: await this.applyEdits(filePath, content); break; case \u0026#39;delete\u0026#39;: await this.fileSystem.deleteFile(filePath); break; } // 3. è¿”å›ç»“æ„åŒ–ç»“æœ  return new LanguageModelToolResult([ new LanguageModelPromptTsxPart( \u0026lt;EditResult operation={action} filePath={filePath} success={true} /\u0026gt; ) ]); } }   3.4 ä¸‰ç§æ–¹æ³•å…¨é¢å¯¹æ¯”    ç»´åº¦ çº¯æç¤ºè¯JSON Tagæ ‡ç­¾æ–¹æ³• Function Call     å‡†ç¡®æ€§ 60-70% 85-90% 95-99%   å¯é æ€§ â­â­ â­â­â­â­ â­â­â­â­â­   å¤æ‚æ•°æ®æ”¯æŒ âŒ å·® âš ï¸ ä¸­ç­‰ âœ… ä¼˜ç§€   é”™è¯¯æ¢å¤ âŒ å›°éš¾ âš ï¸ ä¸€èˆ¬ âœ… å®¹æ˜“   å®ç°å¤æ‚åº¦ â­ â­â­ â­â­â­â­   æ‰§è¡Œèƒ½åŠ› âŒ æ—  âŒ æ—  âœ… ç›´æ¥æ‰§è¡Œ   æ•°æ®éªŒè¯ âŒ æ‰‹åŠ¨ âŒ æ‰‹åŠ¨ âœ… è‡ªåŠ¨   ç±»å‹å®‰å…¨ âŒ æ—  âŒ æ—  âœ… å¼ºç±»å‹    4. Function Callï¼šç»ˆæè§£å†³æ–¹æ¡ˆ 4.1 æ ¸å¿ƒæ¶æ„ å·¥å…·æ³¨å†Œç³»ç»Ÿ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17  // ç»Ÿä¸€çš„å·¥å…·æ³¨å†Œæœºåˆ¶ export const ToolRegistry = new class { private _tools: ICopilotToolCtor[] = []; public registerTool(tool: ICopilotToolCtor) { this._tools.push(tool); } public getTools(): readonly ICopilotToolCtor[] { return this._tools; } }(); // æ³¨å†Œå·¥å…· ToolRegistry.registerTool(ReadFileTool); ToolRegistry.registerTool(CreateFileTool); ToolRegistry.registerTool(EditFileTool);   æ¥å£æ ‡å‡†åŒ– 1 2 3 4 5 6 7 8 9 10 11 12 13  interface ICopilotTool\u0026lt;T\u0026gt; extends vscode.LanguageModelTool\u0026lt;T\u0026gt; { // ä¸»æ‰§è¡Œæ–¹æ³•  invoke(options: vscode.LanguageModelToolInvocationOptions\u0026lt;T\u0026gt;): Promise\u0026lt;vscode.LanguageModelToolResult\u0026gt;; // è°ƒç”¨å‡†å¤‡ï¼ˆæ˜¾ç¤ºè¿›åº¦ç­‰ï¼‰  prepareInvocation?(options: vscode.LanguageModelToolInvocationPrepareOptions\u0026lt;T\u0026gt;): vscode.ProviderResult\u0026lt;vscode.PreparedToolInvocation\u0026gt;; // è¾“å…¥è§£æå’ŒéªŒè¯  resolveInput?(input: T, promptContext: IBuildPromptContext): Promise\u0026lt;T\u0026gt;; // ç¼–è¾‘ç¡®è®¤è¿‡æ»¤  filterEdits?(resource: URI): Promise\u0026lt;IEditFilterData | undefined\u0026gt;; }   4.2 ä¸°å¯Œçš„å·¥å…·ç”Ÿæ€ vscode-copilot-chaté¡¹ç›®åŒ…å«40å¤šä¸ªä¸“ä¸šå·¥å…·ï¼š\nğŸ“ æ–‡ä»¶æ“ä½œå·¥å…· 1 2 3 4 5  import \u0026#39;./readFileTool\u0026#39;; // è¯»å–æ–‡ä»¶å†…å®¹ import \u0026#39;./createFileTool\u0026#39;; // åˆ›å»ºæ–°æ–‡ä»¶ import \u0026#39;./replaceStringTool\u0026#39;; // å­—ç¬¦ä¸²æ›¿æ¢ import \u0026#39;./applyPatchTool\u0026#39;; // åº”ç”¨ä»£ç è¡¥ä¸ import \u0026#39;./listDirTool\u0026#39;; // åˆ—å‡ºç›®å½•å†…å®¹   ğŸ” æœç´¢å·¥å…· 1 2 3 4  import \u0026#39;./findFilesTool\u0026#39;; // æŸ¥æ‰¾æ–‡ä»¶ import \u0026#39;./findTextInFilesTool\u0026#39;; // æ–‡æœ¬æœç´¢ import \u0026#39;./searchWorkspaceSymbolsTool\u0026#39;; // ç¬¦å·æœç´¢ import \u0026#39;./codebaseTool\u0026#39;; // ä»£ç åº“è¯­ä¹‰æœç´¢   ğŸ› ï¸ å¼€å‘å·¥å…· 1 2 3 4  import \u0026#39;./runTestsTool\u0026#39;; // è¿è¡Œæµ‹è¯• import \u0026#39;./runInTerminalTool\u0026#39;; // ç»ˆç«¯å‘½ä»¤æ‰§è¡Œ import \u0026#39;./getErrorsTool\u0026#39;; // è·å–é”™è¯¯ä¿¡æ¯ import \u0026#39;./scmChangesTool\u0026#39;; // Gitå˜æ›´æŸ¥çœ‹   ğŸ“ ç¼–è¾‘å·¥å…· 1 2 3  import \u0026#39;./insertEditTool\u0026#39;; // æ’å…¥ç¼–è¾‘ import \u0026#39;./editNotebookTool\u0026#39;; // Notebookç¼–è¾‘ import \u0026#39;./newWorkspaceTool\u0026#39;; // åˆ›å»ºå·¥ä½œåŒº   4.3 é«˜çº§ç‰¹æ€§ å¤æ‚æ•°æ®ç»“æ„æ”¯æŒ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22  interface ComplexEditParams { files: Array\u0026lt;{ path: string; operation: \u0026#39;create\u0026#39; | \u0026#39;edit\u0026#39; | \u0026#39;delete\u0026#39;; changes: Array\u0026lt;{ startLine: number; endLine: number; newContent: string; reason: string; }\u0026gt;; metadata: { language: string; encoding: string; backup: boolean; }; }\u0026gt;; batchOperation: { transactional: boolean; rollbackOnError: boolean; confirmEachFile: boolean; }; }   å®æ—¶äº¤äº’èƒ½åŠ› 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21  async invoke(options: LanguageModelToolInvocationOptions\u0026lt;EditParams\u0026gt;) { // 1. æ˜¾ç¤ºè¿›åº¦  this.progressReporter.report({ message: \u0026#39;Reading target file...\u0026#39; }); // 2. æ‰§è¡Œæ“ä½œ  const result = await this.applyEdits(options.input); // 3. å®æ—¶åé¦ˆ  this.streamReporter.textEdit(uri, true); // 4. è¿”å›ä¸°å¯Œç»“æœ  return new LanguageModelToolResult([ new LanguageModelPromptTsxPart( \u0026lt;EditResult files={result.modifiedFiles} diagnostics={result.diagnostics} suggestions={result.suggestions} /\u0026gt; ) ]); }   é”™è¯¯å¤„ç†å’Œæ¢å¤ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20  try { const result = await this.performEdit(params); this.telemetryService.logSuccess(\u0026#39;editFile\u0026#39;, params); return result; } catch (error) { // è¯¦ç»†é”™è¯¯åˆ†ç±»  if (error instanceof FileNotFoundError) { return new LanguageModelToolResult([ new LanguageModelTextPart(`File not found: ${params.filePath}. Use createFile tool instead.`) ]); } else if (error instanceof PermissionError) { return new LanguageModelToolResult([ new LanguageModelTextPart(`Permission denied. Please check file permissions.`) ]); } // é¥æµ‹å’Œå›é€€  this.telemetryService.logError(\u0026#39;editFile\u0026#39;, error, params); throw error; }   5. å®Œç¾ç»„åˆï¼šTag + Function Call 5.1 æ¶æ„è®¾è®¡ graph TB A[ç”¨æˆ·è¯·æ±‚] --\u0026gt; B[Tagæ ‡ç­¾æ„å»ºæç¤ºè¯] B --\u0026gt; C[AIç†è§£ç»“æ„åŒ–æŒ‡ä»¤] C --\u0026gt; D[Function Callæ‰§è¡Œæ“ä½œ] D --\u0026gt; E[è¿”å›æ ¼å¼åŒ–ç»“æœ] B1[instructionsæ ‡ç­¾] --\u0026gt; C B2[contextæ ‡ç­¾] --\u0026gt; C B3[toolUseInstructionsæ ‡ç­¾] --\u0026gt; C D1[å·¥å…·SchemaéªŒè¯] --\u0026gt; E D2[å®é™…æ“ä½œæ‰§è¡Œ] --\u0026gt; E D3[ç»“æœç»“æ„åŒ–] --\u0026gt; E 5.2 å®Œæ•´å®ç°ç¤ºä¾‹ æç¤ºè¯æ„å»º 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25  // ä½¿ç”¨Tagç»„ç»‡å¤æ‚æç¤ºè¯ \u0026lt;instructions\u0026gt; You are a sophisticated coding assistant that helps developers with file operations. \u0026lt;/instructions\u0026gt; \u0026lt;toolUseInstructions\u0026gt; - Use readFile to understand existing code before making changes - Use createFile for new files, editFile for modifications - Always provide clear descriptions of your changes - Group related operations together \u0026lt;/toolUseInstructions\u0026gt; \u0026lt;context\u0026gt; \u0026lt;currentWorkspace\u0026gt;{workspacePath}\u0026lt;/currentWorkspace\u0026gt; \u0026lt;activeFile\u0026gt;{activeFileName}\u0026lt;/activeFile\u0026gt; \u0026lt;recentChanges\u0026gt;{recentEditHistory}\u0026lt;/recentChanges\u0026gt; \u0026lt;/context\u0026gt; \u0026lt;availableTools\u0026gt; {toolNames.map(name =\u0026gt; `- ${name}: ${toolDescriptions[name]}`).join(\u0026#39;\\n\u0026#39;)} \u0026lt;/availableTools\u0026gt; \u0026lt;userRequest\u0026gt; {userQuery} \u0026lt;/userRequest\u0026gt;   å·¥å…·å®šä¹‰ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44  // ç²¾ç¡®çš„Schemaå®šä¹‰ const editFileSchema: vscode.LanguageModelToolInformation = { name: \u0026#39;editFile\u0026#39;, description: \u0026#39;Apply specific edits to an existing file\u0026#39;, inputSchema: { type: \u0026#39;object\u0026#39;, required: [\u0026#39;filePath\u0026#39;, \u0026#39;edits\u0026#39;], properties: { filePath: { type: \u0026#39;string\u0026#39;, description: \u0026#39;Absolute path to the file to edit\u0026#39; }, description: { type: \u0026#39;string\u0026#39;, description: \u0026#39;Brief description of what changes are being made (max 100 chars)\u0026#39;, maxLength: 100 }, edits: { type: \u0026#39;array\u0026#39;, description: \u0026#39;Array of specific edits to apply\u0026#39;, items: { type: \u0026#39;object\u0026#39;, required: [\u0026#39;startLine\u0026#39;, \u0026#39;endLine\u0026#39;, \u0026#39;newContent\u0026#39;], properties: { startLine: { type: \u0026#39;number\u0026#39;, minimum: 1, description: \u0026#39;1-based line number where edit starts\u0026#39; }, endLine: { type: \u0026#39;number\u0026#39;, minimum: 1, description: \u0026#39;1-based line number where edit ends (inclusive)\u0026#39; }, newContent: { type: \u0026#39;string\u0026#39;, description: \u0026#39;New content to replace the specified lines\u0026#39; } } } } } } };   å·¥å…·å®ç° 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40  class EditFileTool implements ICopilotTool\u0026lt;EditFileParams\u0026gt; { async invoke(options: vscode.LanguageModelToolInvocationOptions\u0026lt;EditFileParams\u0026gt;) { const { filePath, description, edits } = options.input; // 1. éªŒè¯å’Œå‡†å¤‡  const uri = this.resolveFilePath(filePath); const document = await this.loadDocument(uri); // 2. åº”ç”¨ç¼–è¾‘  const results = []; for (const edit of edits) { const result = await this.applyEdit(document, edit); results.push(result); } // 3. ä¿å­˜å’Œåé¦ˆ  await this.saveDocument(document); this.notifyEditorOfChanges(uri); // 4. è¿”å›ç»“æ„åŒ–ç»“æœ  return new LanguageModelToolResult([ new LanguageModelPromptTsxPart( \u0026lt;EditSummary filePath={filePath} description={description} editsApplied={results.length} success={true} details={results} /\u0026gt; ) ]); } async prepareInvocation(options: vscode.LanguageModelToolInvocationPrepareOptions\u0026lt;EditFileParams\u0026gt;) { return { invocationMessage: new MarkdownString(`âœï¸ Editing ${this.getFileName(options.input.filePath)}...`), pastTenseMessage: new MarkdownString(`âœ… Edited ${this.getFileName(options.input.filePath)}`) }; } }   5.3 å·¥ä½œæµç¨‹ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42  // å®Œæ•´çš„äº¤äº’æµç¨‹ async function handleUserRequest(query: string) { // 1. æ„å»ºç»“æ„åŒ–æç¤ºè¯  const prompt = ( \u0026lt;instructions\u0026gt; You are a coding assistant. Use the available tools to help the user. \u0026lt;/instructions\u0026gt; \u0026lt;toolUseInstructions\u0026gt; - Read files before editing them - Provide clear descriptions of changes - Use appropriate tools for each task \u0026lt;/toolUseInstructions\u0026gt; \u0026lt;context\u0026gt; \u0026lt;workspace\u0026gt;{getCurrentWorkspace()}\u0026lt;/workspace\u0026gt; \u0026lt;activeFiles\u0026gt;{getActiveFiles()}\u0026lt;/activeFiles\u0026gt; \u0026lt;/context\u0026gt; \u0026lt;userRequest\u0026gt; {query} \u0026lt;/userRequest\u0026gt; ); // 2. AIè°ƒç”¨å·¥å…·  const response = await languageModel.sendRequest(prompt, { tools: [readFileSchema, editFileSchema, createFileSchema] }); // 3. å¤„ç†å·¥å…·è°ƒç”¨  for (const toolCall of response.toolCalls) { const tool = getToolByName(toolCall.name); const result = await tool.invoke({ input: toolCall.parameters, model: response.model, chatRequestId: generateId() }); // 4. å±•ç¤ºç»“æœ  displayToolResult(result); } }   6. å®æˆ˜æ¡ˆä¾‹åˆ†æ 6.1 æ¡ˆä¾‹ï¼šæ™ºèƒ½ä»£ç é‡æ„ ç”¨æˆ·è¯·æ±‚ \u0026ldquo;å¸®æˆ‘é‡æ„è¿™ä¸ªReactç»„ä»¶ï¼Œå°†ç±»ç»„ä»¶æ”¹ä¸ºå‡½æ•°ç»„ä»¶ï¼Œå¹¶ä½¿ç”¨hooks\u0026rdquo;\nTagæ ‡ç­¾æç¤ºè¯ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27  \u0026lt;instructions\u0026gt; You are an expert React developer. Help refactor the code using modern React patterns. \u0026lt;/instructions\u0026gt; \u0026lt;refactoringRules\u0026gt; - Convert class components to function components - Replace lifecycle methods with appropriate hooks - Maintain the same functionality and props interface - Use TypeScript if the original code uses it - Add proper error boundaries if needed \u0026lt;/refactoringRules\u0026gt; \u0026lt;context\u0026gt; \u0026lt;currentFile\u0026gt;{currentComponentCode}\u0026lt;/currentFile\u0026gt; \u0026lt;dependencies\u0026gt;{packageJsonDependencies}\u0026lt;/dependencies\u0026gt; \u0026lt;tsConfig\u0026gt;{typeScriptConfig}\u0026lt;/tsConfig\u0026gt; \u0026lt;/context\u0026gt; \u0026lt;availableTools\u0026gt; - readFile: Read the current component file - editFile: Apply the refactored code - runTests: Verify the refactoring doesn\u0026#39;t break tests \u0026lt;/availableTools\u0026gt; \u0026lt;userRequest\u0026gt; {userQuery} \u0026lt;/userRequest\u0026gt;   Function Callæ‰§è¡Œ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37  // AIä¼šè°ƒç”¨è¿™äº›å·¥å…· 1. readFile({ filePath: \u0026#39;/src/components/UserProfile.tsx\u0026#39; }) 2. editFile({ filePath: \u0026#39;/src/components/UserProfile.tsx\u0026#39;, description: \u0026#39;Convert class component to function component with hooks\u0026#39;, edits: [ { startLine: 1, endLine: 50, newContent: `import React, { useState, useEffect } from \u0026#39;react\u0026#39;; import { User } from \u0026#39;../types/User\u0026#39;; interface UserProfileProps { userId: string; onUserUpdate: (user: User) =\u0026gt; void; } const UserProfile: React.FC\u0026lt;UserProfileProps\u0026gt; = ({ userId, onUserUpdate }) =\u0026gt; { const [user, setUser] = useState\u0026lt;User | null\u0026gt;(null); const [loading, setLoading] = useState(true); useEffect(() =\u0026gt; { fetchUser(userId).then(userData =\u0026gt; { setUser(userData); setLoading(false); }); }, [userId]); // ... rest of component }; export default UserProfile;`, reason: \u0026#39;Convert class component to functional component with hooks\u0026#39; } ] }) 3. runTests({ testPattern: \u0026#39;**/UserProfile.test.tsx\u0026#39; })   6.2 æ¡ˆä¾‹ï¼šAPIé›†æˆå¼€å‘ ç”¨æˆ·è¯·æ±‚ \u0026ldquo;åˆ›å»ºä¸€ä¸ªç”¨æˆ·ç®¡ç†APIï¼ŒåŒ…å«CRUDæ“ä½œå’Œæ•°æ®éªŒè¯\u0026rdquo;\nç»“æ„åŒ–å®ç° 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53  // 1. Tagæ„å»ºçš„æŒ‡å¯¼æç¤º \u0026lt;instructions\u0026gt; Create a robust user management API with proper error handling and validation. \u0026lt;/instructions\u0026gt; \u0026lt;apiRequirements\u0026gt; - RESTful endpoints for CRUD operations - Input validation using Joi or similar - Proper HTTP status codes - Error handling middleware - Database integration with Prisma/Mongoose - Authentication middleware \u0026lt;/apiRequirements\u0026gt; \u0026lt;context\u0026gt; \u0026lt;existingFiles\u0026gt;{currentApiStructure}\u0026lt;/existingFiles\u0026gt; \u0026lt;databaseSchema\u0026gt;{userSchema}\u0026lt;/databaseSchema\u0026gt; \u0026lt;framework\u0026gt;Express.js with TypeScript\u0026lt;/framework\u0026gt; \u0026lt;/context\u0026gt; // 2. Function Callæ‰§è¡Œå¤šä¸ªå·¥å…· const toolCalls = [ { name: \u0026#39;createFile\u0026#39;, parameters: { filePath: \u0026#39;/src/routes/users.ts\u0026#39;, content: `// User routes with full CRUD operations import express from \u0026#39;express\u0026#39;; import { UserController } from \u0026#39;../controllers/UserController\u0026#39;; import { validateUser } from \u0026#39;../middleware/validation\u0026#39;; import { authenticate } from \u0026#39;../middleware/auth\u0026#39;; const router = express.Router(); const userController = new UserController(); router.get(\u0026#39;/\u0026#39;, authenticate, userController.getAllUsers); router.get(\u0026#39;/:id\u0026#39;, authenticate, userController.getUserById); router.post(\u0026#39;/\u0026#39;, authenticate, validateUser, userController.createUser); router.put(\u0026#39;/:id\u0026#39;, authenticate, validateUser, userController.updateUser); router.delete(\u0026#39;/:id\u0026#39;, authenticate, userController.deleteUser); export default router;` } }, { name: \u0026#39;createFile\u0026#39;, parameters: { filePath: \u0026#39;/src/controllers/UserController.ts\u0026#39;, content: `// User controller with business logic and error handling // ... implementation` } } ];   7. æœ€ä½³å®è·µæŒ‡å— 7.1 ä½•æ—¶ä½¿ç”¨å“ªç§æ–¹æ³• é€‰æ‹©å†³ç­–æ ‘ graph TD Start[éœ€è¦AIè¾“å‡ºæ ¼å¼åŒ–å†…å®¹] --\u0026gt; NeedExecution{éœ€è¦æ‰§è¡Œæ“ä½œï¼Ÿ} NeedExecution --\u0026gt;|æ˜¯| UseTools[ä½¿ç”¨Function Call] NeedExecution --\u0026gt;|å¦| CheckComplexity{æ•°æ®ç»“æ„å¤æ‚ï¼Ÿ} CheckComplexity --\u0026gt;|å¤æ‚| UseTools CheckComplexity --\u0026gt;|ç®€å•| CheckReliability{å¯é æ€§è¦æ±‚é«˜ï¼Ÿ} CheckReliability --\u0026gt;|é«˜| UseTags[ä½¿ç”¨Tagæ ‡ç­¾] CheckReliability --\u0026gt;|ä¸€èˆ¬| UseJSON[çº¯æç¤ºè¯JSON] UseTools --\u0026gt; Implementation[å·¥å…·å®ç° + SchemaéªŒè¯] UseTags --\u0026gt; TagImplementation[Tagæ ‡ç­¾ + æ­£åˆ™è§£æ] UseJSON --\u0026gt; JSONImplementation[æç¤ºè¯çº¦æŸ + æ‰‹åŠ¨è§£æ] å…·ä½“åœºæ™¯æ¨è    åœºæ™¯ æ¨èæ–¹æ³• åŸå›      æ–‡ä»¶æ“ä½œ Function Call éœ€è¦å®é™…æ‰§è¡Œ+å¯é æ€§è¦æ±‚æé«˜   ä»£ç ç”Ÿæˆ Function Call å¤æ‚ç»“æ„+éœ€è¦è¯­æ³•éªŒè¯   æ•°æ®åˆ†æ Tagæ ‡ç­¾ ç»“æ„åŒ–è¾“å‡ºä½†ä¸éœ€è¦æ‰§è¡Œ   ç®€å•åˆ†ç±» Tagæ ‡ç­¾ ç›¸å¯¹ç®€å•ä½†éœ€è¦å¯é æ€§   å®éªŒåŸå‹ JSONæç¤ºè¯ å¿«é€Ÿæµ‹è¯•ï¼Œå¯¹å‡†ç¡®æ€§è¦æ±‚ä¸é«˜    7.2 Tagæ ‡ç­¾æœ€ä½³å®è·µ å‘½åè§„èŒƒ 1 2 3 4 5 6 7 8 9 10 11  // âœ… å¥½çš„æ ‡ç­¾å‘½å \u0026lt;instructions\u0026gt; // æ¸…æ™°çš„åŠŸèƒ½æŒ‡ç¤º \u0026lt;toolUseInstructions\u0026gt; // å…·ä½“çš„ä½¿ç”¨è¯´æ˜ \u0026lt;context\u0026gt; // ä¸Šä¸‹æ–‡ä¿¡æ¯ \u0026lt;userRequest\u0026gt; // ç”¨æˆ·è¾“å…¥ \u0026lt;outputFormat\u0026gt; // è¾“å‡ºæ ¼å¼è¦æ±‚  // âŒ é¿å…çš„å‘½å \u0026lt;info\u0026gt; // å¤ªæ¨¡ç³Š \u0026lt;stuff\u0026gt; // æ— æ„ä¹‰ \u0026lt;data\u0026gt; // ä¸å…·ä½“   å±‚æ¬¡ç»“æ„ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17  // âœ… æ¸…æ™°çš„å±‚æ¬¡ç»“æ„ \u0026lt;context\u0026gt; \u0026lt;environment\u0026gt; \u0026lt;operatingSystem\u0026gt;{os}\u0026lt;/operatingSystem\u0026gt; \u0026lt;shell\u0026gt;{shell}\u0026lt;/shell\u0026gt; \u0026lt;/environment\u0026gt; \u0026lt;workspace\u0026gt; \u0026lt;rootPath\u0026gt;{workspaceRoot}\u0026lt;/rootPath\u0026gt; \u0026lt;activeFiles\u0026gt;{activeFiles}\u0026lt;/activeFiles\u0026gt; \u0026lt;/workspace\u0026gt; \u0026lt;userPreferences\u0026gt; \u0026lt;codeStyle\u0026gt;{codeStyle}\u0026lt;/codeStyle\u0026gt; \u0026lt;framework\u0026gt;{preferredFramework}\u0026lt;/framework\u0026gt; \u0026lt;/userPreferences\u0026gt; \u0026lt;/context\u0026gt;   å†…å®¹ç»„ç»‡ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23  // âœ… é€»è¾‘åˆ†ç»„ \u0026lt;instructions\u0026gt; You are a coding assistant specialized in web development. \u0026lt;/instructions\u0026gt; \u0026lt;capabilities\u0026gt; - Create and edit files - Run terminal commands - Search codebase - Generate tests \u0026lt;/capabilities\u0026gt; \u0026lt;limitations\u0026gt; - Cannot access external APIs without tools - Cannot modify system settings - Must follow security guidelines \u0026lt;/limitations\u0026gt; \u0026lt;behaviorRules\u0026gt; - Always explain your reasoning - Ask for clarification when uncertain - Provide multiple solutions when appropriate \u0026lt;/behaviorRules\u0026gt;   7.3 Function Callé«˜çº§æŠ€å·§ Schemaè®¾è®¡åŸåˆ™ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46  // âœ… è¯¦ç»†çš„Schemaè®¾è®¡ const toolSchema = { name: \u0026#39;editFile\u0026#39;, description: \u0026#39;Edit an existing file with specific changes. Use this for modifications to existing code.\u0026#39;, inputSchema: { type: \u0026#39;object\u0026#39;, required: [\u0026#39;filePath\u0026#39;, \u0026#39;edits\u0026#39;], properties: { filePath: { type: \u0026#39;string\u0026#39;, description: \u0026#39;Absolute path to the file (use forward slashes)\u0026#39;, pattern: \u0026#39;^/.*\u0026#39; // è·¯å¾„éªŒè¯  }, description: { type: \u0026#39;string\u0026#39;, description: \u0026#39;Brief summary of what changes are being made (max 100 chars)\u0026#39;, maxLength: 100 }, edits: { type: \u0026#39;array\u0026#39;, minItems: 1, maxItems: 20, // é˜²æ­¢è¿‡å¤§çš„ç¼–è¾‘  items: { type: \u0026#39;object\u0026#39;, required: [\u0026#39;startLine\u0026#39;, \u0026#39;endLine\u0026#39;, \u0026#39;newContent\u0026#39;], properties: { startLine: { type: \u0026#39;integer\u0026#39;, minimum: 1, description: \u0026#39;1-based line number where edit starts\u0026#39; }, endLine: { type: \u0026#39;integer\u0026#39;, minimum: 1, description: \u0026#39;1-based line number where edit ends (inclusive)\u0026#39; }, newContent: { type: \u0026#39;string\u0026#39;, description: \u0026#39;New content to replace the specified lines\u0026#39; } } } } } } };   é”™è¯¯å¤„ç†ç­–ç•¥ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41  class RobustTool implements ICopilotTool\u0026lt;ToolParams\u0026gt; { async invoke(options: LanguageModelToolInvocationOptions\u0026lt;ToolParams\u0026gt;) { try { // é¢„éªŒè¯  this.validateInput(options.input); // æ‰§è¡Œæ“ä½œ  const result = await this.performOperation(options.input); // æˆåŠŸé¥æµ‹  this.logSuccess(options); return new LanguageModelToolResult([ new LanguageModelPromptTsxPart(\u0026lt;SuccessResult {...result} /\u0026gt;) ]); } catch (error) { // åˆ†ç±»é”™è¯¯å¤„ç†  if (error instanceof ValidationError) { return new LanguageModelToolResult([ new LanguageModelTextPart(`âŒ Input validation failed: ${error.message}`) ]); } else if (error instanceof FileSystemError) { return new LanguageModelToolResult([ new LanguageModelTextPart(`ğŸ“ File system error: ${error.message}. Please check file permissions.`) ]); } else { // è®°å½•æœªçŸ¥é”™è¯¯  this.logError(error, options); throw error; // è®©ç³»ç»Ÿå¤„ç†  } } } private validateInput(input: ToolParams) { if (!input.filePath || !input.filePath.startsWith(\u0026#39;/\u0026#39;)) { throw new ValidationError(\u0026#39;filePath must be an absolute path starting with /\u0026#39;); } // æ›´å¤šéªŒè¯...  } }   æ€§èƒ½ä¼˜åŒ– 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41  // æ‰¹é‡æ“ä½œæ”¯æŒ interface BatchEditParams { operations: Array\u0026lt;{ type: \u0026#39;create\u0026#39; | \u0026#39;edit\u0026#39; | \u0026#39;delete\u0026#39;; filePath: string; content?: string; edits?: EditOperation[]; }\u0026gt;; transactional: boolean; // æ˜¯å¦äº‹åŠ¡æ€§æ‰§è¡Œ } class BatchEditTool implements ICopilotTool\u0026lt;BatchEditParams\u0026gt; { async invoke(options: LanguageModelToolInvocationOptions\u0026lt;BatchEditParams\u0026gt;) { const { operations, transactional } = options.input; if (transactional) { // äº‹åŠ¡æ€§æ‰§è¡Œï¼šå…¨éƒ¨æˆåŠŸæˆ–å…¨éƒ¨å›æ»š  return await this.executeTransactional(operations); } else { // å¹¶è¡Œæ‰§è¡Œï¼Œæé«˜æ€§èƒ½  return await this.executeParallel(operations); } } private async executeParallel(operations: BatchEditParams[\u0026#39;operations\u0026#39;]) { const results = await Promise.allSettled( operations.map(op =\u0026gt; this.executeOperation(op)) ); return new LanguageModelToolResult([ new LanguageModelPromptTsxPart( \u0026lt;BatchResult totalOperations={operations.length} successful={results.filter(r =\u0026gt; r.status === \u0026#39;fulfilled\u0026#39;).length} failed={results.filter(r =\u0026gt; r.status === \u0026#39;rejected\u0026#39;).length} details={results} /\u0026gt; ) ]); } }   7.4 ç»„åˆä½¿ç”¨çš„é«˜çº§æ¨¡å¼ è‡ªé€‚åº”å·¥å…·é€‰æ‹© 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47  // æ ¹æ®ä¸Šä¸‹æ–‡åŠ¨æ€è°ƒæ•´å¯ç”¨å·¥å…· const AdaptivePrompt = ({ userQuery, workspaceType, userSkillLevel }) =\u0026gt; { const availableTools = selectToolsForContext(workspaceType, userSkillLevel); return ( \u0026lt;instructions\u0026gt; You are a coding assistant adapted for {workspaceType} development. User skill level: {userSkillLevel} \u0026lt;/instructions\u0026gt; \u0026lt;toolsContext\u0026gt; Available tools for this session: {availableTools.map(tool =\u0026gt; `- ${tool.name}: ${tool.description}` ).join(\u0026#39;\\n\u0026#39;)} \u0026lt;/toolsContext\u0026gt; \u0026lt;adaptiveRules\u0026gt; {userSkillLevel === \u0026#39;beginner\u0026#39; \u0026amp;\u0026amp; \u0026#39;Provide detailed explanations and suggest best practices.\u0026#39; } {userSkillLevel === \u0026#39;expert\u0026#39; \u0026amp;\u0026amp; \u0026#39;Focus on efficiency and advanced techniques.\u0026#39; } \u0026lt;/adaptiveRules\u0026gt; \u0026lt;userRequest\u0026gt; {userQuery} \u0026lt;/userRequest\u0026gt; ); }; function selectToolsForContext(workspaceType: string, skillLevel: string) { const baseTools = [\u0026#39;readFile\u0026#39;, \u0026#39;editFile\u0026#39;, \u0026#39;createFile\u0026#39;]; if (workspaceType === \u0026#39;react\u0026#39;) { baseTools.push(\u0026#39;generateComponent\u0026#39;, \u0026#39;runTests\u0026#39;, \u0026#39;bundleAnalyzer\u0026#39;); } else if (workspaceType === \u0026#39;python\u0026#39;) { baseTools.push(\u0026#39;runPython\u0026#39;, \u0026#39;installPackage\u0026#39;, \u0026#39;lintCode\u0026#39;); } if (skillLevel === \u0026#39;expert\u0026#39;) { baseTools.push(\u0026#39;refactorCode\u0026#39;, \u0026#39;performanceProfiling\u0026#39;, \u0026#39;securityAnalysis\u0026#39;); } return baseTools.map(name =\u0026gt; ToolRegistry.getTool(name)); }   å·¥å…·é“¾ç»„åˆ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47  // å¤æ‚ä»»åŠ¡çš„å·¥å…·é“¾ç¼–æ’ class WorkflowOrchestrator { async executeWorkflow(userRequest: string, context: WorkspaceContext) { const workflow = this.planWorkflow(userRequest, context); for (const step of workflow.steps) { const stepResult = await this.executeStep(step); // æ ¹æ®æ­¥éª¤ç»“æœè°ƒæ•´åç»­æ­¥éª¤  workflow.adjustRemainingSteps(stepResult); // å‘ç”¨æˆ·æŠ¥å‘Šè¿›åº¦  this.reportProgress(step, stepResult); } return workflow.getFinalResult(); } private planWorkflow(request: string, context: WorkspaceContext): Workflow { // ä½¿ç”¨Tagæ ‡ç­¾æ„å»ºè§„åˆ’æç¤º  const planningPrompt = ( \u0026lt;planningInstructions\u0026gt; Analyze the user request and create a step-by-step plan. Consider the current workspace context and available tools. \u0026lt;/planningInstructions\u0026gt; \u0026lt;availableTools\u0026gt; {this.getAvailableTools().map(tool =\u0026gt; tool.description)} \u0026lt;/availableTools\u0026gt; \u0026lt;workspaceContext\u0026gt; {JSON.stringify(context, null, 2)} \u0026lt;/workspaceContext\u0026gt; \u0026lt;userRequest\u0026gt; {request} \u0026lt;/userRequest\u0026gt; \u0026lt;outputFormat\u0026gt; Return a JSON plan with steps, dependencies, and tool assignments. \u0026lt;/outputFormat\u0026gt; ); // AIç”Ÿæˆæ‰§è¡Œè®¡åˆ’ï¼Œç„¶åä½¿ç”¨Function Callæ‰§è¡Œ  return this.generateWorkflowPlan(planningPrompt); } }   ğŸ“š ç»“è®º é€šè¿‡å¯¹vscode-copilot-chaté¡¹ç›®çš„æ·±åº¦åˆ†æï¼Œæˆ‘ä»¬å‘ç°äº†ç°ä»£AIåŠ©æ‰‹çš„æœ€ä½³æ¶æ„æ¨¡å¼ï¼š\nğŸ¯ æ ¸å¿ƒè¦ç‚¹  Tagæ ‡ç­¾ç”¨äºæ„å»ºæç¤ºè¯ - æä¾›ç»“æ„åŒ–ã€æ˜“ç†è§£çš„æŒ‡ä»¤æ¡†æ¶ Function Callç”¨äºæ ¼å¼åŒ–è¾“å‡º - ç¡®ä¿å¯é ã€å¯æ‰§è¡Œçš„ç»“æ„åŒ–å“åº” ä¸¤è€…å®Œç¾ç»“åˆ - å‘æŒ¥å„è‡ªä¼˜åŠ¿ï¼Œæ„å»ºå¼ºå¤§çš„AIåŠ©æ‰‹ç³»ç»Ÿ  ğŸš€ å®æ–½å»ºè®®    é˜¶æ®µ æ–¹æ³• é‡ç‚¹     åŸå‹å¼€å‘ Tagæ ‡ç­¾ + ç®€å•JSON å¿«é€ŸéªŒè¯æƒ³æ³•   åŠŸèƒ½å¼€å‘ Tagæ ‡ç­¾ + Function Call å¹³è¡¡å¯é æ€§å’Œå¤æ‚æ€§   ç”Ÿäº§éƒ¨ç½² å®Œæ•´Function Callç”Ÿæ€ æœ€é«˜å¯é æ€§å’ŒåŠŸèƒ½å®Œæ•´æ€§    ğŸ”® æœªæ¥è¶‹åŠ¿ éšç€AIæ¨¡å‹èƒ½åŠ›çš„ä¸æ–­æå‡ï¼Œæˆ‘ä»¬é¢„æœŸï¼š\n Function Callå°†æˆä¸ºæ ‡å‡†çš„AIäº¤äº’æ¨¡å¼ å·¥å…·ç”Ÿæ€å°†æ›´åŠ ä¸°å¯Œå’Œä¸“ä¸šåŒ– å¤šæ¨¡æ€å·¥å…·è°ƒç”¨å°†æˆä¸ºå¯èƒ½ è‡ªé€‚åº”å·¥å…·é€‰æ‹©å°†æ›´åŠ æ™ºèƒ½  è¿™å¥—æ–¹æ³•è®ºä¸ä»…é€‚ç”¨äºç¼–ç¨‹åŠ©æ‰‹ï¼Œä¹Ÿå¯ä»¥æ‰©å±•åˆ°å„ç§éœ€è¦ç»“æ„åŒ–è¾“å‡ºå’Œå¯é æ‰§è¡Œçš„AIåº”ç”¨åœºæ™¯ä¸­ã€‚\n","description":"","id":2,"section":"posts","tags":null,"title":"Aiæç¤ºè¯å·¥ç¨‹ä¸æ ¼å¼åŒ–è¾“å‡ºæœ€ä½³å®è·µ","uri":"https://llane.xyz/posts/ai%E6%8F%90%E7%A4%BA%E8%AF%8D%E5%B7%A5%E7%A8%8B%E4%B8%8E%E6%A0%BC%E5%BC%8F%E5%8C%96%E8%BE%93%E5%87%BA%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/"},{"content":"æœ€è¿‘ï¼Œæˆ‘é€šè¿‡å¼€å‘ä¸€ä¸ªåä¸ºhomemade-reactçš„å°å‹Reactåº“ï¼Œå®ç°äº†Reactçš„Fiberç»“æ„ã€useStateå’ŒuseEffectï¼Œå¹¶ä½¿ç”¨viteè§£æJSXã€‚\næœ€ç»ˆï¼Œæˆ‘æˆåŠŸä½¿ç”¨homemade-reactå®ç°äº†ä¸€ä¸ªTodo Liståº”ç”¨ã€‚\nå®Œæ•´ä»£ç å¯ä»¥çœ‹æˆ‘çš„github,https://github.com/Llane00/homemade-reactã€‚\nåœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†åˆ†äº«æˆ‘å¯¹ReactåŸç†çš„ç†è§£ï¼Œä»¥åŠå¦‚ä½•å®ç°ä¸€ä¸ªè‡ªå·±çš„Reactåº“ã€‚\nç°åœ¨å¼€å§‹æˆ‘ä»¬çš„homemade-reactå®ç°ä¹‹æ—…:\nä»Fiberåˆ°DOM å½“ç”¨æˆ·ä¸é¡µé¢è¿›è¡Œäº¤äº’æ—¶ï¼Œé¡µé¢çš„è§†å›¾ä¼šå‘ç”Ÿæ”¹å˜ï¼Œè€Œè§†å›¾çš„æ”¹å˜å®é™…ä¸Šå°±æ˜¯DOMçš„æ”¹å˜ã€‚Reacté€šè¿‡Fiberç»“æ„å¯¹DOMå±‚è¿›è¡Œäº†æŠ½è±¡ï¼Œå®ç°äº†å±€éƒ¨æ›´æ–°å’Œå¼‚æ­¥æ›´æ–°ï¼Œä¼˜åŒ–äº†å¯¹DOMçš„ç¹ççš„å¢ã€åˆ ã€æ”¹ã€æŸ¥å’Œäº‹ä»¶ç»‘å®šæ“ä½œã€‚\n å®ç°createDom,å°†vdomåˆ›å»ºä¸ºDOMèŠ‚ç‚¹  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31  function createDom(type) { // åˆ›å»ºDOMå…ƒç´ çš„è¾…åŠ©å‡½æ•°  return type === \u0026#34;TEXT_ELEMENT\u0026#34; ? document.createTextNode(\u0026#34;\u0026#34;) : document.createElement(type); } function createTextNode(text) { // åˆ›å»ºæ–‡æœ¬èŠ‚ç‚¹çš„è¾…åŠ©å‡½æ•°  return { type: \u0026#34;TEXT_ELEMENT\u0026#34;, props: { nodeValue: text, children: [] } } } function createElement(type, props, ...children) { // åˆ›å»ºReactå…ƒç´ çš„å‡½æ•°  return { type, props: { ...props, children: children.map((child) =\u0026gt; { const isTextNode = typeof child === \u0026#39;string\u0026#39; || typeof child === \u0026#39;number\u0026#39;; return isTextNode ? createTextNode(child) : child; }) } } }   å°†fiberä¸Šçš„propsæ›´æ–°åˆ°çœŸå®çš„domä¸Š  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28  function updateProps(domElement, nextProps, prevProps = {}) { // æ›´æ–°DOMå…ƒç´ çš„å±æ€§  if (!domElement) return; // åˆ é™¤æ—§å±æ€§  for (const key in prevProps) { if (key === \u0026#34;children\u0026#34;) continue; if (!(key in nextProps)) { domElement.removeAttribute(key); } } // æ›´æ–°æˆ–æ–°å¢æ–°å±æ€§  for (const key in nextProps) { if (key === \u0026#34;children\u0026#34;) continue; if (prevProps[key] === nextProps[key]) continue; if (key.startsWith(\u0026#34;on\u0026#34;)) { // å¤„ç†äº‹ä»¶å±æ€§  const eventName = key.slice(2).toLowerCase(); domElement.removeEventListener(eventName, prevProps[key]); domElement.addEventListener(eventName, nextProps[key]); } else { // å¤„ç†å…¶ä»–å±æ€§  domElement[key] = nextProps[key]; } } }   å®ç°å¯ä¸­æ–­çš„workLoop åœ¨æ—©æœŸçš„Reactç‰ˆæœ¬ä¸­ä½¿ç”¨äº†é€’å½’çš„æ–¹å¼æ¥è§£æå’Œæ‰§è¡Œæ¸²æŸ“æ ‘,è€Œé€’å½’æ˜¯æ— æ³•ä¸­æ–­çš„;\nç”±äºJavaScriptæ˜¯å•çº¿ç¨‹çš„ï¼Œå¦‚æœfiberæ ‘å¾ˆå¤§å¾ˆæ·±é€’å½’å°±ä¼šè€—è´¹æ›´å¤šçš„æ—¶é—´,è¿™å°±å¯¼è‡´é¡µé¢å’Œç”¨æˆ·äº¤äº’æ—¶ä¼šå‡ºç°å¡é¡¿;\nåœ¨æˆ‘è‡ªå·±å®ç°çš„homemade-reactä¸­ï¼Œä½¿ç”¨äº†requestIdleCallbackæ¥åœ¨æµè§ˆå™¨ç©ºé—²æ—¶æ‰§è¡Œæ¸²æŸ“ä»»åŠ¡ï¼Œå†ç»“åˆFiberè®©æ¸²æŸ“æ ‘åˆ†å‰²ä¸ºä¸€ä¸ªä¸ªfiberå·¥ä½œä»»åŠ¡ç‚¹,å°±å¯ä»¥å®ç°æ¸²æŸ“ä»»åŠ¡çš„ä¸­æ–­å’Œé‡æ–°æ‰§è¡Œ;\nrequestIdleCallbackä¼šåœ¨æµè§ˆå™¨ç©ºé—²æ—¶æ‰§è¡ŒworkLoopå‡½æ•°ï¼ŒworkLoopå‡½æ•°ä¸­ä¼šå¼€å§‹æ‰§è¡Œå½“å‰ä»»åŠ¡å¹¶ç»™å‡ºä¸‹ä¸€ä¸ªä»»åŠ¡,å½“å‰ä»»åŠ¡ç»“æŸåä¼šå†æ‰§è¡ŒrequestIdleCallback,è¿™æ ·å°±å½¢æˆäº†ä¸€ä¸ªå¾ªç¯;\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46  // renderå‡½æ•° éœ€è¦ä¼ å…¥ä¸€ä¸ªappæ ¹ç»„ä»¶å’Œä¸€ä¸ªcontainer root dom èŠ‚ç‚¹ function render(element, container) { if (typeof element === \u0026#39;function\u0026#39;) { element = element(); }; workInProcessRootFiber = { props: { children: [element] }, dom: container, } nextWorkOfUnit = workInProcessRootFiber; requestIdleCallback(workLoop); // è¯·æ±‚æµè§ˆå™¨ç©ºé—²æ—¶æ‰§è¡Œå·¥ä½œå¾ªç¯ } function workLoop(IdleDeadline) { // å·¥ä½œå¾ªç¯å‡½æ•°  let shouldYield = false; while (nextWorkOfUnit \u0026amp;\u0026amp; !shouldYield) { nextWorkOfUnit = performWorkOfUnit(nextWorkOfUnit); // æ‰§è¡Œå•ä¸ªFiberèŠ‚ç‚¹çš„å·¥ä½œ  // å¦‚æœä¸‹ä¸€ä¸ªå·¥ä½œå•å…ƒçš„FiberèŠ‚ç‚¹æ˜¯å½“å‰æ ¹FiberèŠ‚ç‚¹çš„å…„å¼ŸèŠ‚ç‚¹ï¼Œè¯´æ˜å½“å‰æ ¹FiberèŠ‚ç‚¹çš„å·¥ä½œå·²ç»å¤„ç†å®Œæˆ  if (!!nextWorkOfUnit?.type \u0026amp;\u0026amp; workInProcessRootFiber?.sibling?.type === nextWorkOfUnit?.type \u0026amp;\u0026amp; workInProcessRootFiber?.sibling.dom === nextWorkOfUnit?.dom ) { nextWorkOfUnit = undefined; } shouldYield = IdleDeadline.timeRemaining() \u0026lt; 1; // æ˜¯å¦éœ€è¦è®©å‡ºå¤„ç†æ—¶é—´ç‰‡æ®µ  } // å¦‚æœæ²¡æœ‰ä¸‹ä¸€ä¸ªå·¥ä½œå•å…ƒä¸”å½“å‰æ ¹FiberèŠ‚ç‚¹å­˜åœ¨ï¼Œåˆ™æäº¤æ ¹FiberèŠ‚ç‚¹  if (!nextWorkOfUnit \u0026amp;\u0026amp; workInProcessRootFiber) { commitRoot(); } // å¦‚æœæœ‰ä¸‹ä¸€ä¸ªå·¥ä½œå•å…ƒä¸”å½“å‰æ ¹FiberèŠ‚ç‚¹ä¸å­˜åœ¨ï¼Œåˆ™å°†ä¸‹ä¸€ä¸ªå·¥ä½œå•å…ƒè®¾ç½®ä¸ºæ ¹FiberèŠ‚ç‚¹  if (nextWorkOfUnit \u0026amp;\u0026amp; !workInProcessRootFiber) { workInProcessRootFiber = nextWorkOfUnit; } requestIdleCallback(workLoop); // è¯·æ±‚æµè§ˆå™¨ç©ºé—²æ—¶æ‰§è¡Œä¸‹ä¸€è½®å·¥ä½œå¾ªç¯ }   å®ç°performWorkOfUnitå‡½æ•°æ¥å¤„ç†æ¸²æŸ“ä»»åŠ¡ ok, ç°åœ¨æ¥çœ‹çœ‹performWorkOfUnitå‡½æ•°æ˜¯æ€ä¹ˆæ‰§è¡Œçš„;\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50  function performWorkOfUnit(fiber) { // åŒºåˆ†ä¸€ä¸‹å½“å‰çš„fiberèŠ‚ç‚¹æ˜¯å‡½æ•°ç»„ä»¶è¿˜æ˜¯æ™®é€šç»„ä»¶  const isFunctionComponent = typeof fiber.type === \u0026#39;function\u0026#39;; if (isFunctionComponent) { updateFunctionComponent(fiber); // æ›´æ–°å‡½æ•°ç»„ä»¶  } else { updateNormalComponent(fiber); // æ›´æ–°æ™®é€šç»„ä»¶  } return getNextWorkOfUnit(fiber); // è·å–ä¸‹ä¸€ä¸ªè¦å¤„ç†çš„FiberèŠ‚ç‚¹ } function updateFunctionComponent(fiber) { // æ›´æ–°å‡½æ•°ç»„ä»¶çš„FiberèŠ‚ç‚¹  stateHooks = []; // é‡ç½®çŠ¶æ€é’©å­åˆ—è¡¨  stateHookIndex = 0; // é‡ç½®çŠ¶æ€é’©å­ç´¢å¼•  effectHooks = []; // é‡ç½®å‰¯ä½œç”¨é’©å­åˆ—è¡¨  workInProcessFiber = fiber; // è®¾ç½®å½“å‰å·¥ä½œä¸­çš„FiberèŠ‚ç‚¹ä¸ºå‡½æ•°ç»„ä»¶çš„FiberèŠ‚ç‚¹  const children = [fiber.type(fiber.props)]; // è°ƒç”¨å‡½æ•°ç»„ä»¶è·å–å­å…ƒç´   reconcileChildrenFibers(fiber, children); // åè°ƒå­FiberèŠ‚ç‚¹ } function updateNormalComponent(fiber) { // æ›´æ–°æ™®é€šç»„ä»¶çš„FiberèŠ‚ç‚¹  if (!fiber.dom) { const domElement = fiber.dom = createDom(fiber.type); // åˆ›å»ºDOMå…ƒç´   updateProps(domElement, fiber?.props); // æ›´æ–°DOMå…ƒç´ çš„å±æ€§  } const children = fiber?.props?.children; // å­å…ƒç´ åˆ—è¡¨  reconcileChildrenFibers(fiber, children); // åè°ƒå­FiberèŠ‚ç‚¹ } function getNextWorkOfUnit(fiber) { // è·å–ä¸‹ä¸€ä¸ªè¦å¤„ç†çš„FiberèŠ‚ç‚¹  if (fiber.child) { return fiber.child; } let nextFiber = fiber; while (nextFiber) { if (nextFiber.sibling) { return nextFiber.sibling; } nextFiber = nextFiber.parent; } return null; }   å®ç°reconcileChildrenFiberså‡½æ•°å¤„ç†å­FiberèŠ‚ç‚¹ Fiberç»“æ„ä¸­ï¼Œæ¯ä¸ªFiberä¿å­˜äº†DOMçš„å±æ€§æ•°æ®ï¼ŒåŒæ—¶å°†æ¸²æŸ“å·¥ä½œæ‹†åˆ†ä¸ºå¤šä¸ªå°ä»»åŠ¡ã€‚Fiberæ ‘ç»“æ„ä½¿å¾—ç¨‹åºå¯ä»¥ä¸€è¾¹è§£ææ ‘ç»“æ„ï¼Œä¸€è¾¹æ‰§è¡Œæ¸²æŸ“å·¥ä½œä»»åŠ¡ã€‚Fiberè®©æ¸²æŸ“ä»»åŠ¡å¯ä»¥è¢«åˆ‡å‰²ä¸ºå¤šä¸ªå°ä»»åŠ¡ï¼Œå¹¶ä¸”è¿™äº›å°ä»»åŠ¡ä¹‹é—´å¯ä»¥ç›¸äº’æŒ‡å‘ã€‚\nåŒç¼“å­˜çš„Fiberæ ‘ä½¿å¾—diffæ›´æ–°æ›´åŠ å®¹æ˜“ï¼Œä¹Ÿå‡å°‘äº†é¡µé¢çš„é—ªå±ç°è±¡ã€‚\næ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹çœ‹reconcileChildrenFiberså‡½æ•°æ˜¯æ€ä¹ˆå®ç°çš„;\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51  function reconcileChildrenFibers(parentFiber, children) { // åè°ƒå­FiberèŠ‚ç‚¹  const oldParentFiber = parentFiber.alternate; // æ—§çš„çˆ¶FiberèŠ‚ç‚¹  let currentOldFiberChild = oldParentFiber?.child; // å½“å‰æ—§çš„å­FiberèŠ‚ç‚¹  let prevChild = null; // ä¸Šä¸€ä¸ªå­FiberèŠ‚ç‚¹  children?.forEach((child, index) =\u0026gt; { const isTheSameType = currentOldFiberChild \u0026amp;\u0026amp; (child?.type === currentOldFiberChild?.type); let newFiber; if (!!child) { // åˆ›å»ºæ–°çš„FiberèŠ‚ç‚¹  newFiber = { type: child.type, props: child.props, dom: isTheSameType ? currentOldFiberChild.dom : null, alternate: isTheSameType ? currentOldFiberChild : null, parent: parentFiber, child: null, sibling: null, effectTag: isTheSameType ? \u0026#39;update\u0026#39; : \u0026#39;placement\u0026#39;, } } if (!isTheSameType \u0026amp;\u0026amp; currentOldFiberChild) { // å¦‚æœç±»å‹ä¸åŒï¼Œåˆ™éœ€è¦åˆ é™¤æ—§çš„FiberèŠ‚ç‚¹  fibersNeedDelete.push(currentOldFiberChild); } if (currentOldFiberChild) { currentOldFiberChild = currentOldFiberChild?.sibling; } if (index === 0) { parentFiber.child = newFiber; } else { if (!!prevChild) { prevChild.sibling = newFiber; } } if (newFiber) { prevChild = newFiber; } }); // å¦‚æœæ—§çš„FiberèŠ‚ç‚¹è¿˜æœ‰å¤šä½™çš„siblingèŠ‚ç‚¹ï¼Œéœ€è¦åˆ é™¤  while (currentOldFiberChild) { fibersNeedDelete.push(currentOldFiberChild); currentOldFiberChild = currentOldFiberChild?.sibling; } }   å®ç°commitRootå‡½æ•°æäº¤æ ¹FiberèŠ‚ç‚¹ fiberèŠ‚ç‚¹æ ‘å¤„ç†å®Œæˆ, ç»Ÿä¸€æ¸²æŸ“åˆ°domæ ‘\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36  function commitRoot() { commitDeletions(); // å¤„ç†åˆ é™¤èŠ‚ç‚¹  commitWork(workInProcessRootFiber.child); // å¤„ç†å‰ç«¯Root Fiberå­èŠ‚ç‚¹çš„å·¥ä½œ  commitEffectHooks(); // å¤„ç†æ”¶é›†åˆ°çš„å‰¯ä½œç”¨é’©å­  workInProcessRootFiber = null; } function getFiberParentWithDom(fiber) { // è·å–åŒ…å«è¯¥FiberèŠ‚ç‚¹çš„çˆ¶FiberèŠ‚ç‚¹  let fiberParent = fiber.parent; while (!fiberParent.dom) { fiberParent = fiberParent?.parent; } return fiberParent; } function commitWork(fiber) { // æäº¤FiberèŠ‚ç‚¹çš„å·¥ä½œ  if (!fiber) return; // å¤„ç†æ–°å¢èŠ‚ç‚¹  if (fiber.effectTag === \u0026#39;placement\u0026#39; \u0026amp;\u0026amp; fiber.dom) { const fiberParent = getFiberParentWithDom(fiber); // è·å–åŒ…å«è¯¥FiberèŠ‚ç‚¹çš„çˆ¶FiberèŠ‚ç‚¹  if (fiber.dom) { fiberParent.dom.append(fiber.dom); // å°†DOMå…ƒç´ æ·»åŠ åˆ°çˆ¶èŠ‚ç‚¹ä¸­  } } // å¤„ç†æ›´æ–°èŠ‚ç‚¹  if (fiber.effectTag === \u0026#39;update\u0026#39; \u0026amp;\u0026amp; fiber.dom) { updateProps(fiber.dom, fiber.props, fiber.alternate.props); // æ›´æ–°DOMå…ƒç´ çš„å±æ€§  } commitWork(fiber.child); // é€’å½’å¤„ç†å­èŠ‚ç‚¹  commitWork(fiber.sibling); // é€’å½’å¤„ç†å…„å¼ŸèŠ‚ç‚¹ }   å®ç°useState åœ¨useStateä¸­ï¼ŒçŠ¶æ€æ•°æ®å­˜å‚¨åœ¨å¯¹åº”çš„ç»„ä»¶Fiberä¸Šã€‚æˆ‘ç†è§£çš„æ˜¯ï¼Œä¸åŒçš„Fiberä»£è¡¨ä¸åŒçš„æ•°æ®ï¼Œå› æ­¤æ¯ä¸ªFiberå¯¹åº”ä¸€ä»½æ•°æ®ã€‚å°†æ•°æ®å­˜å‚¨åœ¨Fiberä¸Šæ˜¯éå¸¸åˆç†çš„ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36  function useState(initValue) { // è‡ªå®šä¹‰useStateé’©å­  let currentFiber = workInProcessFiber; // å½“å‰å·¥ä½œä¸­çš„FiberèŠ‚ç‚¹  const oldHook = currentFiber?.alternate?.stateHooks[stateHookIndex]; // æ—§çš„çŠ¶æ€é’©å­  const stateHook = { state: oldHook ? oldHook.state : initValue, // çŠ¶æ€å€¼  actionQueue: oldHook ? oldHook.actionQueue : [] // çŠ¶æ€æ›´æ–°é˜Ÿåˆ—  } stateHook.actionQueue.forEach((action) =\u0026gt; { stateHook.state = action(stateHook.state); // æ‰§è¡ŒçŠ¶æ€æ›´æ–°æ“ä½œ  }) stateHook.actionQueue = []; stateHooks.push(stateHook); // å°†çŠ¶æ€é’©å­æ·»åŠ åˆ°åˆ—è¡¨ä¸­  stateHookIndex++; currentFiber.stateHooks = stateHooks; // æ›´æ–°å½“å‰å·¥ä½œä¸­çš„FiberèŠ‚ç‚¹çš„çŠ¶æ€é’©å­åˆ—è¡¨  let setState = (action) =\u0026gt; { // å…ˆæ”¶é›†actionï¼Œç­‰åˆ°ä¸‹æ¬¡è°ƒç”¨useStateæ—¶å†ç»Ÿä¸€å¤„ç†  stateHook.actionQueue.push(typeof action === \u0026#39;function\u0026#39; ? action : () =\u0026gt; action); // æå‰å»ç›‘æµ‹ä¸€ä¸‹actionçš„å€¼,å¦‚æœå’Œå½“å‰stateä¸€æ ·åˆ™ä¸æ›´æ–°  const eagerState = typeof action === \u0026#39;function\u0026#39; ? action(stateHook.state) : action; if (eagerState === stateHook.state) return; workInProcessRootFiber = { ...currentFiber, alternate: currentFiber, }; nextWorkOfUnit = workInProcessRootFiber; }; return [stateHook.state, setState]; // è¿”å›å½“å‰çŠ¶æ€å€¼å’Œæ›´æ–°çŠ¶æ€çš„å‡½æ•° }   å®ç°useEffect useEffectä¹Ÿæ˜¯å­˜å‚¨åœ¨å¯¹åº”çš„ç»„ä»¶Fiberä¸Šï¼Œå½“è§¦å‘Effectäº‹ä»¶æ—¶ï¼Œä¼šå¯¹æ–°æ—§Fiberä¸Šçš„ä¾èµ–é¡¹è¿›è¡Œå¯¹æ¯”ï¼Œä»¥åˆ¤æ–­æ˜¯å¦éœ€è¦æ‰§è¡ŒEffectã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56  function commitEffectHooks() { // æäº¤å‰¯ä½œç”¨é’©å­  function run(fiber) { if (!fiber) return; const oldFiber = fiber?.alternate; // åˆå§‹åŒ–  if (!fiber?.alternate) { fiber?.effectHooks?.forEach((hook) =\u0026gt; { hook.cleanup = hook.callback(); // æ‰§è¡Œå‰¯ä½œç”¨çš„å›è°ƒå‡½æ•°ï¼Œå¹¶ä¿å­˜æ¸…ç†å‡½æ•°  }); } else { // æ›´æ–°  fiber?.effectHooks?.forEach((newHook, index) =\u0026gt; { if (newHook.deps?.length \u0026gt; 0) { const oldEffectHook = oldFiber?.effectHooks[index]; const isDepsChanged = oldEffectHook?.deps.some((oldDep, oldDepIndex) =\u0026gt; oldDep !== newHook?.deps[oldDepIndex]); isDepsChanged \u0026amp;\u0026amp; (newHook.cleanup = newHook.callback()); // å¦‚æœä¾èµ–å‘ç”Ÿå˜åŒ–ï¼Œåˆ™æ‰§è¡Œå‰¯ä½œç”¨çš„å›è°ƒå‡½æ•°ï¼Œå¹¶ä¿å­˜æ¸…ç†å‡½æ•°  } }) } run(fiber.child); run(fiber.sibling); } function runCleanup(fiber) { if (!fiber) return; fiber?.alternate?.effectHooks?.forEach((hook) =\u0026gt; { if (hook?.deps?.length \u0026gt; 0) { hook?.cleanup \u0026amp;\u0026amp; hook?.cleanup(); // æ‰§è¡Œå‰¯ä½œç”¨çš„æ¸…ç†å‡½æ•°  } }) runCleanup(fiber.child); runCleanup(fiber.sibling); } runCleanup(workInProcessRootFiber); run(workInProcessRootFiber); } function useEffect(callback, deps) { // è‡ªå®šä¹‰useEffecté’©å­  const effectHook = { callback, deps, cleanup: null, } effectHooks.push(effectHook); // å°†å‰¯ä½œç”¨é’©å­æ·»åŠ åˆ°åˆ—è¡¨ä¸­  workInProcessFiber.effectHooks = effectHooks; // æ›´æ–°å½“å‰å·¥ä½œä¸­çš„FiberèŠ‚ç‚¹çš„å‰¯ä½œç”¨é’©å­åˆ—è¡¨ }   ä»¥ä¸Šå°±æ˜¯å…³äºReactåŸç†çš„ç®€è¦ä»‹ç»ã€‚é€šè¿‡å®ç°homemade-reactï¼Œæˆ‘æ›´æ·±å…¥åœ°ç†è§£äº†Reactçš„å·¥ä½œåŸç†ï¼ŒåŒ…æ‹¬Fiberç»“æ„ã€å±€éƒ¨æ›´æ–°ã€å¼‚æ­¥æ›´æ–°ã€useStateå’ŒuseEffectç­‰æ ¸å¿ƒæ¦‚å¿µã€‚å¸Œæœ›è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼\n","description":"","id":3,"section":"Reactjs","tags":["React"],"title":"å¦‚ä½•å®ç°ä¸€ä¸ªè‡ªå·±çš„React","uri":"https://llane.xyz/reactjs/%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E8%87%AA%E5%B7%B1%E7%9A%84react/"},{"content":"Tailwind css å¯ä»¥è®©ä½ å¿«é€Ÿæ„å»ºè‡ªå®šä¹‰çš„ç”¨æˆ·ç•Œé¢ï¼Œè€Œä¸éœ€è¦ç¼–å†™ä»»ä½• CSSã€‚\nè€Œä¸”å®ƒæ”¯æŒå®šåˆ¶åŒ–ï¼Œè¿™ç¯‡æ–‡ç« ä¼šå…ˆä»‹ç»åŸºæœ¬ä½¿ç”¨æ–¹æ³•ï¼Œç„¶åä»‹ç»å¦‚ä½•å®šåˆ¶åŒ–ã€‚\nä¸€ã€å®‰è£… å®˜ç½‘é“¾æ¥\nå»ºè®®åŒæ—¶å®‰è£…PostCssï¼ˆPostCSS å¯ä»¥é€šè¿‡æ’ä»¶æœºåˆ¶æ¥å®ç°å„ç§ CSS å¤„ç†ä»»åŠ¡ï¼Œæ¯”å¦‚æ’ä»¶autoprefixerå¯ä»¥æ·»åŠ æµè§ˆå™¨å‰ç¼€ï¼Œè¿˜æœ‰å…¶ä»–æ’ä»¶å¯ä»¥å®ç°è½¬æ¢ã€ä¼˜åŒ–å’Œå‹ç¼© CSS ä»£ç ã€‚ï¼‰\n1 2  npm install -D tailwindcss postcss autoprefixer npx tailwindcss init   äºŒã€è®¾ç½®configæ–‡ä»¶ init å‘½ä»¤å¯ä»¥åˆå§‹åŒ–tailwind configæ–‡ä»¶ã€‚æ‰“å¼€é…ç½®æ–‡ä»¶ï¼Œ\ncontenté‡ŒåŠ ä¸Šä½ éœ€è¦å¤„ç†çš„æ–‡ä»¶\nä¾‹å¦‚ï¼š\n1 2 3 4 5  content: [ \u0026#34;./src/**/*.{html,js}\u0026#34;, \u0026#34;./pages/**/*.{js,ts,jsx,tsx}\u0026#34;, \u0026#34;./components/**/*.{js,ts,jsx,tsx}\u0026#34;, ],   åœ¨themeçš„colorsä¸­å¯ä»¥ä¿®æ”¹é¢„å®šä¹‰çš„é¢œè‰²çš„å€¼ï¼Œæ¯”å¦‚ï¼š\n1 2 3 4 5  theme: { colors: { green: \u0026#34;#49e659\u0026#34; } }   ä¹‹åæ‰€æœ‰ç”¨greençš„åœ°æ–¹éƒ½ä¼šä¿®æ”¹ä¸ºè¿™ä¸ªé¢œè‰²å€¼ã€‚\nä½†æ˜¯ç›´æ¥ä¿®æ”¹çš„themeä¸­çš„colorsä¼šç”¨å½“å‰çš„é…ç½®è¦†ç›–Tailwindé»˜è®¤çš„é…ç½®ï¼Œå¦‚æœåªæ˜¯æƒ³è¦æ‰©å±•é¢œè‰²ï¼Œå¯ä»¥åœ¨extendä¸­æ·»åŠ colorsã€‚\nåŒæ—¶ä¹Ÿå¯ä»¥ä¿®æ”¹æŒ‡å®šé¢œè‰²å’Œå‚æ•°å¯¹åº”çš„é¢œè‰²å€¼\n1 2 3 4 5  colors: { green: { 100: \u0026#34;#49e659\u0026#34; } }   ç›¸ä¼¼çš„åœ¨themeä¸­è¿˜æœ‰fontFamilyã€spacingã€borderRadiusç­‰å­—æ®µå¯ä»¥ä¿®æ”¹Tailwindé¢„è®¾çš„å€¼\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23  screens: { sm: \u0026#34;480px\u0026#34;, md: \u0026#34;768px\u0026#34;, lg: \u0026#34;976px\u0026#34;, xl: \u0026#34;1440px\u0026#34;, }, fontSize: { sm: \u0026#34;0.8rem\u0026#34;, base: \u0026#34;1rem\u0026#34;, xl: \u0026#34;1.25rem\u0026#34;, 2xl: \u0026#34;1.563rem\u0026#34;, 3xl: \u0026#34;1.953rem\u0026#34;, 4xl: \u0026#34;2.441rem\u0026#34;, 5xl: \u0026#34;3.052rem\u0026#34;, }, spacing: { \u0026#34;1\u0026#34;: \u0026#34;8px\u0026#34;, 8xl: \u0026#34;96rem\u0026#34;, 9xl: \u0026#34;128rem\u0026#34;, }, borderRadius: { 4xl: \u0026#34;2rem\u0026#34;, }   ç”¨æ³•\nbg-é¢œè‰²-å‚æ•° text-é¢œè‰²-å‚æ•° ","description":"","id":4,"section":"posts","tags":null,"title":"ä½¿ç”¨Tailwind CSS","uri":"https://llane.xyz/posts/tailwindcss/"},{"content":"1. å¦‚ä½•ç†è§£TSä¸­çš„anyã€unknowå’Œneverï¼Ÿ any æ”¯æŒå‡ ä¹ä»»ä½•ç±»å‹ï¼Œä¸åŒ…å«neverã€unknownã€voidã€‚\nunknow è¡¨ç¤ºå°šä¸æ¸…æ¥šçš„ç±»å‹ï¼Œä½†å¯ä»¥è¡¨ç¤ºæ‰€æœ‰ç±»å‹çš„è”åˆã€‚å½“ä¸€ä¸ªå€¼æ˜¯ä»å¤–éƒ¨è·å–çš„ä¸èƒ½æå‰çŸ¥é“ç±»å‹ï¼Œç­‰ä½¿ç”¨çš„æ—¶å€™æˆ‘ä»¬å†å»åšæ–­è¨€ç±»å‹æ“ä½œã€‚\nnever ä¸åŒ…å«ä»»ä½•å…ƒç´ ï¼Œç©ºé›†ã€‚å½“åœ¨å¤„ç†å¼‚å¸¸å’Œé”™è¯¯æƒ…å†µæ—¶ï¼Œneverå¯ä»¥è¡¨ç¤ºè¯¥å˜é‡ä¸ºä¸åº”è¯¥å‡ºç°çš„ç±»å‹ã€‚\n2. typeå’Œinterfaceæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ type ç±»å‹åˆ«å\ninterface å£°æ˜æ¥å£ï¼ˆtsçš„interfaceæè¿°ä¸€ä¸ªå¯¹è±¡çš„å±æ€§ï¼Œjava c#ä¸­çš„interfaceä¸ºæè¿°åŠŸèƒ½ï¼‰\ninterfaceç”¨é¢å‘å¯¹çš„æ–¹å¼è§£é‡Štypeï¼Œå…³é”®è¯extends ç›¸å½“äºtypeä¸­è”åˆç±»å‹\nåŒºåˆ«1ï¼š\ntype å¯ä»¥æè¿°æ‰€æœ‰æ•°æ®ï¼šåŸºæœ¬ç±»å‹å’Œå¯¹è±¡\ninterface åªèƒ½æè¿°å¯¹è±¡\nåŒºåˆ«2ï¼š\ntype åªæ˜¯ç±»å‹çš„åˆ«åï¼ˆtsä¼šæ¨å¯¼å‡ºå·²å­˜åœ¨çš„ç±»å‹ï¼‰\ninterface åˆ™æ˜¯å£°æ˜ç±»å‹ï¼ˆinterfaceä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ç±»å‹ï¼‰\nåŒºåˆ«3ï¼š\ntypeä¸å¯ä»¥é‡æ–°èµ‹å€¼\nè€Œinterfaceä¼šè‡ªåŠ¨åˆå¹¶ï¼Œå¯ä»¥è¿›è¡Œå­—æ®µæ‰©å±•ï¼ˆç†è§£ï¼šæè¿°å¯¹è±¡çš„æ—¶å€™å¯ä»¥åŠ ä¸€ä¸ªå±æ€§ï¼‰\næ‰€ä»¥å¯¹å¤–APIå°½é‡ä½¿ç”¨interfaceï¼Œæ–¹ä¾¿æ‰©å±•ã€‚\nå¯¹å†…APIå°½é‡ä½¿ç”¨typeï¼Œé˜²æ­¢ä»£ç åˆ†æ•£ã€‚\ninterface Person { name: string } interface Person { age: number } åŒºåˆ«4ï¼š\ninterfaceåœ¨extendsæ—¶å¦‚æœæœ‰å±æ€§å†²çªä¼šç›´æ¥æŠ¥é”™ï¼ˆæŠ¥é”™æ›´æ˜æ˜¾ï¼‰\nè€Œtypeä¸ä¼šæŠ¥é”™ï¼Œä¼šå°†è¯¥å±æ€§çš„ç±»å‹å˜ä¸ºneverï¼Œç”šè‡³ç›´æ¥æŠŠå½“å‰typeå˜ä¸ºnever\n3. è”åˆç±»å‹å˜é‡åœ¨ä½¿ç”¨æ—¶æ€ä¹ˆç±»å‹æ”¶çª„ï¼Ÿ(ä»€ä¹ˆæ˜¯ç±»å‹æ”¶çª„ï¼Ÿ) è”åˆç±»å‹å˜é‡åœ¨å®šä¹‰çš„æ—¶å€™æ˜¯å¤šä¸ªç±»å‹çš„å¹¶é›†ï¼Œåœ¨ä½¿ç”¨çš„æ—¶å€™éœ€è¦åŒºåˆ†ç±»å‹ï¼ˆç±»å‹æ”¶çª„ narrowingï¼‰\n ç”¨typeofï¼ˆæœ‰å±€é™ï¼Œæ•°ç»„å¯¹è±¡ã€æ™®é€šå¯¹è±¡ã€æ—¥æœŸå¯¹è±¡ã€nullï¼Œtypeoféƒ½è¿”å›objectï¼‰ ä½¿ç”¨instanceofåŒºåˆ†ç±»å‹ï¼ˆæœ‰å±€é™ï¼Œä¸æ”¯æŒstringã€numberã€booleanã€TSç‹¬æœ‰ç±»å‹ï¼‰ ç»“åˆ1å’Œ2ï¼Œæ™®é€šç±»å‹ä½¿ç”¨typeofï¼Œå¯¹è±¡ç±»å‹ä½¿ç”¨instanceofï¼ˆå±€é™ï¼šTSç±»å‹æ— æ³•åŒºåˆ†ï¼‰ åœ¨3çš„åŸºç¡€ä¸Šï¼Œä½¿ç”¨keyA in TypeAï¼Œå…³é”®è¯inæ¥åŒºåˆ†TSç±»å‹ ä»¥ä¸Š4ç‚¹éƒ½æ˜¯ä½¿ç”¨jsçš„æ–¹æ³•æ¥åŒºåˆ†ç±»å‹ï¼Œå¯ä»¥ä½¿ç”¨TSçš„ç±»å‹è°“è¯isæ¥åˆ¤æ–­ä»»æ„ç±»å‹ï¼ˆæ”¯æŒæ‰€æœ‰ç±»å‹ï¼Œä½†æ¯”è¾ƒéº»çƒ¦éœ€è¦å£°æ˜ä¸€ä¸ªå‡½æ•°ï¼‰  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16  type Rect = { width: number; height: number; } const a = { width: 10, height: 20 } if (isRect(a)) { return a; } else { return null; } // è¿™é‡Œä½¿ç”¨isåï¼ŒisRectä½¿ç”¨çš„æ—¶å€™açš„ç±»å‹ä¼šåˆ¤æ–­ä¸ºRectï¼Œåä¹‹å¦‚æœåªå†™booleanåˆ™açš„ç±»å‹ä¸ä¼šè‡ªåŠ¨åˆ¤æ–­ function isRect(x: Rect | Circle): x is Rect { return \u0026#39;height\u0026#39; in x \u0026amp;\u0026amp; \u0026#39;width\u0026#39; in x; }   è‡ªå·±åœ¨å¯¹è±¡ç±»å‹ä¸­æ·»åŠ ä¸€ä¸ªå¯è¯†åˆ«å­—æ®µï¼Œæ¯”å¦‚kind: \u0026lsquo;xx\u0026rsquo;ï¼Œæˆ‘å®šä¹‰åœ†å½¢ç±»å‹çš„kindä¸€å®šä¸ºcircleï¼Œæ–¹å½¢ç±»å‹çš„kindä¸€å®šä¸ºrectï¼Œè¿™æ ·å°±å¯ä»¥é€šè¿‡kindæ¥åŒºåˆ†ç±»å‹äº†ã€‚ä¸€èˆ¬ä½¿ç”¨kindã€typeï¼Œè¦æ±‚æ‰€æœ‰è¦åŒºåˆ†çš„ç±»å‹éƒ½æœ‰kindå­—æ®µï¼›æ˜¯kindéœ€è¦æ—¶åŸºæœ¬ç±»å‹ï¼›å„ç±»å‹é—´çš„kindå¯åŒºåˆ†ã€‚  4. å½“äº¤å‰ç±»å‹æœ‰å­—æ®µç±»å‹å†²çªçš„æ—¶å€™ï¼Œè¯¥å­—æ®µä¼šæ˜¯ä»€ä¹ˆç±»å‹ï¼Ÿ ç­”æ¡ˆæ˜¯neverã€‚\nä¾‹å¦‚ï¼š\ntype A = { age: number; } type B = { age: string; } type C = A \u0026amp; B; const c: C = { age: '123' // ageçš„ç±»å‹æ˜¯never } 5. å¦‚ä½•æ–­è¨€ç»‘å®šäº‹ä»¶çš„å›è°ƒå‡½æ•°ï¼Ÿ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22  interface MyEvent { target: HTMLElement; } interface MyMouseEvent extends MyEvent { x: number; y: number; } function listenEvent(eventType: string, callback: (e: MyEvent) =\u0026gt; void) { //... } // æ–­è¨€å›è°ƒå‡½æ•°ä¸­ä½¿ç”¨çš„å‚æ•° listenEvent(\u0026#34;click\u0026#34;, (e: MyEvent) =\u0026gt; console.log((e as MyMouseEvent).x + \u0026#34;,\u0026#34; + (e as MyMouseEvent).y); ); // æ–­è¨€æ•´ä¸ªå›è°ƒå‡½æ•° listenEvent(\u0026#34;click\u0026#34;, ((e: MyMouseEvent) =\u0026gt; console.log(e.x + \u0026#34;,\u0026#34; + e.y)) as (e: MyEvent) =\u0026gt; void );   æˆ–è€… åœ¨tsconifgä¸­æŠŠstraictFunctionTypesè®¾ç½®ä¸ºfalse\næˆ–è€…ç”¨ as unknown as xxx\n6. as const æ€ä¹ˆä½¿ç”¨ï¼Ÿ as const å¯ä»¥ç”¨æ¥æ”¶ç´§ç±»å‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19  let a = \u0026#39;1\u0026#39;; // açš„ç±»å‹ä¸ºstring const b = \u0026#39;1\u0026#39;; // bçš„ç±»å‹ä¸º\u0026#39;1\u0026#39;ï¼Œå› ä¸ºconstæ— æ³•èµ‹å€¼ï¼Œç±»å‹æ”¶ç´§äº†  let c = [1, 2]; // cçš„ç±»å‹ä¸ºnumber[] const d = [1, 2] as const; // dçš„ç±»å‹ä¸ºreadonly [1, 2]  let e = { x: 1, y: 2 }; // eçš„ç±»å‹ä¸º{ x: number, y: number } const f = { x: 1, y: 2 } as const; // fçš„ç±»å‹ä¸º{ readonly x: 1, readonly y: 2 }  // as const ç»å¸¸ä¼šåº”ç”¨åœ¨å¯¹è±¡å’Œæ•°ç»„ä¸Šï¼Œç”¨äºç±»å‹æ”¶ç´§ function sum(name: number, ...array: number[]) { // è™½ç„¶æ•°ç»„aæ˜¯constï¼Œä½†æ˜¯ä¾ç„¶å¯ä»¥pushï¼Œä½¿ç”¨as conståå¯æ”¶ç´§ç±»å‹ä¸ºreadonly [1, 2]ï¼Œé•¿åº¦ä¸º2 \tconst a = [1, 2] as const; f(...a); // fçš„å‚æ•°åªæœ‰ä¸¤ä¸ªï¼Œas constå‰açš„é•¿åº¦ä¸ç¡®å®šä¼šæŠ¥é”™ } function f(a: number, b: number) { return a + b; }   7. tsæœ‰å“ªäº›è¯­æ³•å¯ä»¥ä»ç±»å‹ä¸­åˆ›é€ æ–°ç±»å‹ï¼Ÿ extends åŒ…å«äº\nkeyof è·å–ä¸€ä¸ªå¯¹è±¡ç±»å‹çš„æ‰€æœ‰key\nT[\u0026lsquo;name\u0026rsquo;] è·å–ç±»å‹Tä¸­ä¸‹æ ‡ä¸ºnameçš„ç±»å‹ï¼Œå…¶ä¸­name extends keyof T\nin keyof ä¸»è¦åœ¨mapç±»å‹ä¸­ä½¿ç”¨\n-readonly[] ä½¿å¾—å¯¹åº”ç±»å‹ä»åªè¯»å˜ä¸ºå¯æ“ä½œ\n-? ä½¿å¾—å¯é€‰ç±»å‹å˜ä¸ºå¿…å¡«ç±»å‹\nas æ–­è¨€æ“ä½œï¼Œå¯¹ä¸€ä¸ªç±»å‹åšè¿›ä¸€æ­¥çš„åˆ¤æ–­\n8. interfaceå’Œclassçš„åŒºåˆ«ï¼Ÿ interfaceåªæœ‰æˆå‘˜ç±»å‹æ²¡æœ‰å®ç°\næ™®é€šclasså¿…é¡»æœ‰æˆå‘˜çš„ç±»å‹å’Œå®ç°\nabstract classï¼ˆæŠ½è±¡ç±»ï¼‰çš„æˆå‘˜ç±»å‹å¯ä»¥å®ç°ä¹Ÿå¯ä»¥ä¸å®ç°\næ‰€ä»¥classä¸€èˆ¬ç”¨äºå®ç°interfaceï¼Œè€Œä¸”ä¸€ä¸ªclasså¯ä»¥åŒæ—¶å®ç°å¤šä¸ªinterface\nps: åœ¨classä¸­ä¹Ÿå¯ä»¥ä½¿ç”¨ç´¢å¼•ç­¾å\n1 2 3 4 5 6 7 8 9 10 11  class Hash { [s: string]: unknown set(key: string, value: unknown) { this[key] = value; } get(key: string) { return this[key] } }   9. ä»€ä¹ˆæ˜¯inferï¼Ÿ inferå¯ä»¥æ˜¾å¼åœ°å£°æ˜ä¸€ä¸ªæ³›å‹å˜é‡ã€‚è¿™æ ·æè¿°å¾ˆæŠ½è±¡æ¥çœ‹ä¾‹å­ï¼š\n1 2 3 4  // è¿™é‡Œinferæ˜¯å¯¹Itemçš„å¼•ç”¨ // å¯ä»¥ä¸ç”¨è€ƒè™‘Arrayé‡ŒItemçš„å…·ä½“ç±»å‹ï¼Œå°±å¯ä»¥ç›´æ¥è¿”å›æ”¹ç±»å‹ type Flatten\u0026lt;Type\u0026gt; = Type extends Array\u0026lt;infer Item\u0026gt; ? Item : Type;   10. ç±»å‹å£°æ˜æ–‡ä»¶å’Œç±»å‹ä½œç”¨åŸŸæœ‰ä»€ä¹ˆå…³ç³»? é»˜è®¤æƒ…å†µä¸‹*.d.tsä¸­çš„typeå’Œinterfaceå…¨å±€ç”Ÿæ•ˆ,\nä½†æ˜¯å¦‚æœ*.d.tsæ–‡ä»¶ä¸­æœ‰importæˆ–è€…exportåˆ™typeå’Œinterfaceåªåœ¨å½“å‰æ¨¡å—ç”Ÿæ•ˆ,\næ­¤æ—¶å¯ä»¥ç”¨declare globalåŒ…è£¹typeå’Œinterfaceä½¿å…¶å…¨å±€ç”Ÿæ•ˆ;\nå½“ä¸ºjsæ–‡ä»¶å†™ç±»å‹å£°æ˜æ–‡ä»¶æ—¶,å¦‚æœæ˜¯å…¨å±€ä½œç”¨åŸŸçš„ç±»å‹åˆ™å¯ä»¥ç›´æ¥å¯¹åº”jsæ–‡ä»¶ä¸­çš„å˜é‡å’Œå‡½æ•°,å¦‚æœæ˜¯å±€éƒ¨ä½œç”¨åŸŸçš„ç±»å‹åˆ™å¯ä»¥ç”¨declare moduleåŒ…è£¹æˆ–è€…ç”¨åŒåæ–‡ä»¶(å¦‚ä¸‹);\nmain.js main.d.js åŒåæ–‡ä»¶å¯ä»¥æœ‰ä¸€ä¸€å¯¹åº”çš„å…³ç³»,å¯ä»¥è§†ä½œåœ¨ä¸€ä¸ªä½œç”¨åŸŸä¸­. 11 å…¨å±€å˜é‡ä¸­çš„documentå’ŒElementç±»å‹æ˜¯è°å£°æ˜çš„? æˆ‘ä»¬å¯ä»¥åœ¨tsconfigä¸­çš„compilerOptions.libä¸­æ·»åŠ DOMæ¥æ”¯æŒDOMç›¸å…³æ–¹æ³•çš„ç±»å‹.\nç›¸åŒçš„å…¨å±€å˜é‡ä¸­çš„Object,Array,Set,Map\u0026hellip;æ˜¯ç”±ESNextæ¥æ”¯æŒç›¸å…³ç±»å‹çš„.\né»˜è®¤ä¼šåŠ è½½@typesåŒ…ä¸‹æ‰€æœ‰çš„ç±»å‹æ–‡ä»¶,å¦‚æœéœ€è¦æŒ‡å®šåŠ è½½çš„ç±»å‹æ–‡ä»¶å¯ä»¥åœ¨tsconfigä¸­çš„compilerOptions.typesä¸­æŒ‡å®š.\n","description":"","id":5,"section":"posts","tags":null,"title":"TypeScriptå¿«é—®å¿«ç­”","uri":"https://llane.xyz/posts/ts/"},{"content":"æ•°æ®åº“è§£å†³äº†ä»€ä¹ˆé—®é¢˜\n æ•°æ®æ€ä¹ˆå‚¨å­˜ï¼Ÿ æ•°æ®åº“æä¾›ç»“æ„åŒ–æ•°æ®çš„æŒä¹…åŒ–å‚¨å­˜ æ•°æ®çš„æŸ¥è¯¢æ•ˆç‡ï¼Ÿ æ•°æ®åº“çš„ç´¢å¼•å¯ä»¥ä¿è¯æ•°æ®æŸ¥è¯¢çš„é€Ÿåº¦ æ“ä½œæ•°æ®æ—¶çš„å®‰å…¨æ€§ï¼Ÿäº‹åŠ¡çš„åŸå­æ€§ä¿è¯æ•°æ®ä¸ä¸¢å¤±ï¼ˆä¸€ä»¶äº‹åŠ¡è¦ä¹ˆä¸åšï¼Œè¦åšå°±ä¸€å®šä¼šåšå®Œï¼‰  æ•°æ®åº“çš„å‚¨å­˜ç»“æ„\næ•°æ®åº“ -\u0026gt; æ•°æ®è¡¨ -\u0026gt; æœ‰å¤šä¸ªè®°å½•æ¡ï¼Œæ¯ä¸ªè®°å½•æ¡åŒ…å«å¤šä¸ªå­—æ®µå’Œå¯¹åº”çš„å€¼\n","description":"","id":6,"section":"posts","tags":null,"title":"æ•°æ®åº“åŸºç¡€","uri":"https://llane.xyz/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/"},{"content":"åœ¨NestJsä¸­å¤§é‡ä½¿ç”¨äº†è£…é¥°å™¨ï¼Œæ‰€ä»¥å­¦ä¹ NestJså‰é¦–å…ˆéœ€è¦äº†è§£è£…é¥°å™¨çš„åŸºæœ¬ç”¨æ³•ã€‚\nè£…é¥°å™¨å¯ä»¥è§£å†³çš„é—®é¢˜ï¼š   ä¸€ä¸ªç±»ã€ä¸€ä¸ªæ–¹æ³•åº”è¯¥ä¸“æ³¨äºå¤„ç†ä¸€å—å•ä¸€åŠŸèƒ½çš„é€»è¾‘ï¼ˆå³å•ä¸€åŠŸèƒ½åŸåˆ™ï¼‰ï¼Œä½†åœ¨å®é™…çš„ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šåœ¨ä¸šåŠ¡ä»£ç ä¸­æ’å…¥é¢å¤–çš„é€»è¾‘ä»£ç ã€‚\næ¯”å¦‚ç»Ÿè®¡è¡Œä¸ºã€æ€§èƒ½ï¼Œè®°å½•æ—¥å¿—ç­‰ã€‚ä½¿ç”¨è£…é¥°å™¨å¯ä»¥è®©ä»£ç ä¿æŒå•ä¸€åŸåˆ™ï¼ŒæŠŠè¿™äº›é¢å¤–çš„ä»£ç æŠ½ç¦»å‡ºæ¥è®©ä»£ç æ›´ç®€æ´ï¼Œå¦ä¸€æ–¹é¢ä¹Ÿå¯¹è¿™äº›é¢å¤–çš„é€»è¾‘ä»£ç åšäº†å°è£…æé«˜äº†å¤ç”¨æ€§ã€‚\n  åˆæˆ–æ˜¯éœ€è¦è§£å†³å¼ºä¾èµ–çš„è¿‡åº¦è€¦åˆé—®é¢˜ï¼Œæ¯”å¦‚è¿‡äºä¾èµ–ä¸€ä¸ªaç±»æ¥å®ç°å¦ä¸€ä¸ªæ–°çš„bç±»ï¼Œå½“aç±»éœ€è¦ä¿®æ”¹çš„æ—¶å€™bç±»ä¹Ÿéœ€è¦ä¿®æ”¹ã€‚\nä½¿ç”¨è£…é¥°å™¨å¯ä»¥åšåˆ°ä¾èµ–æ³¨å…¥ä»åˆ°å®ç°ä¾èµ–åè½¬ã€‚\n  æ¨¡æ‹Ÿè£…é¥°å™¨ æœ‰ä¸€ä¸ªUserç±»ï¼Œå…¶ä¸­å®ƒæœ‰è‡ªå·±çš„loginæ–¹æ³•ã€‚ç°åœ¨æˆ‘ä»¬éœ€è¦åœ¨å®ƒçš„ç™»å½•æ–¹æ³•ä¸­æ·»åŠ ç™»å½•æ—¶é—´çš„æ—¥å¿—è®°å½•é€»è¾‘ã€‚\né€šå¸¸æˆ‘ä»¬ä¼šç›´æ¥åœ¨loginæ–¹æ³•ä¸­æ·»åŠ æ—¥å¿—é€»è¾‘ï¼Œä½†è¿™å›æˆ‘ä»¬éœ€è¦ä¸ç›´æ¥ä¿®æ”¹loginæ–¹æ³•ã€‚\njsä¸­æœ‰ä¸€ä¸ªæ–¹æ³•å«Object.definePropertyï¼Œç†Ÿæ‚‰vue2çš„åŒå­¦ä¼šçŸ¥é“è¿™ä¸ªAPIï¼Œå®ƒå¯ä»¥ç”¨æ¥å®šä¹‰å¯¹è±¡çš„å±æ€§ã€‚\nå®ƒä¹Ÿå¯ä»¥ç”¨æ¥å®šä¹‰ç±»çš„æ–¹æ³•å¹¶è¿”å›è¿™ä¸ªç±»æœ¬èº«ã€‚\nObject.defineProperty(target, key, descriptor)\nå¦‚æœkeyå¯¹åº”çš„æ˜¯æ™®é€šæ–¹æ³•çš„åå­—ï¼Œtargetå°±æ˜¯ç±»çš„åŸå‹\nå¦‚æœkeyå¯¹åº”çš„æ˜¯é™æ€æ–¹æ³•çš„åå­—ï¼Œtargetå°±æ˜¯ç±»\nåœ¨descriptorä¸­å¯ä»¥è·å–åˆ°è¿™ä¸ªæ–¹æ³•çš„æè¿°ç¬¦ï¼Œæ¯”å¦‚valueã€writableã€enumerableã€configurableç­‰\nå¦‚æœkeyå¯¹åº”çš„æ˜¯ä¸€ä¸ªæ–¹æ³•åï¼Œvalueå°±æ˜¯è¿™ä¸ªæ–¹æ³•çš„å¼•ç”¨\næ¨¡æ‹Ÿè£…é¥°å™¨çš„å®ç°æ­¥éª¤ï¼š\n è·å–ç±»åŸæœ¬çš„æ–¹æ³•å†…å®¹(å³descriptor)ï¼Œå¯ä»¥é€šè¿‡Object.getOwnPropertyDescriptor(target, key);ã€‚ ä¿®æ”¹è¿™ä¸ªæ–¹æ³•ï¼Œæ¯”å¦‚åœ¨åŸæœ‰çš„æ–¹æ³•ä¸ŠåŠ å…¥ç™»å½•æ—¥å¿—é€»è¾‘ã€‚ ç”¨æ–°çš„æ–¹æ³•è¦†ç›–åŸæœ‰çš„æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡Object.defineProperty(target, key, descriptor); ã€‚  è¿™ä¸ªå°±æ˜¯ç±»è£…é¥°å™¨æƒ³è¦è¾¾åˆ°çš„ç›®çš„ã€‚\nè£…é¥°å™¨ä¸åŒç±»å‹ 1. ç±»è£…é¥°å™¨ ä»æ¨¡æ‹Ÿç±»è£…é¥°å™¨ä¸­æˆ‘ä»¬å¾—å‡ºéœ€è¦åœ¨åŸæœ‰ç±»çš„åŸºç¡€ä¸Šç”Ÿæˆä¸€ä¸ªæ–°çš„ç±»ï¼Œå¯ä»¥ç”¨ç»§æ‰¿æˆ–è€…ä¿®æ”¹åŸå‹çš„æ–¹æ³•è¾¾åˆ°ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24  const happyHuman = \u0026lt;T extends new (...args: any[]) =\u0026gt; any\u0026gt;( constructor: T, ) =\u0026gt; { return class extends constructor { name = \u0026#39;happy human\u0026#39;; // è£…é¥°å™¨çš„å±æ€§ä¼šè¦†ç›–ç±»çš„å±æ€§  getName() { // ä¼šè¦†ç›–ç±»å·²æœ‰æ–¹æ³•ï¼Œæˆ–æ·»åŠ æ–°çš„ç±»æ–¹æ³•  return this.name; } }; }; @happyHuman class User { [key: string]: any; name: string; constructor() { this.name = \u0026#39;human\u0026#39;; } } console.log(new User().getName()); // happy human   å½“ç±»è£…é¥°å™¨éœ€è¦ä¼ å‚æ•°æ—¶ï¼Œå¯ä»¥æŠŠå‚æ•°å¥—åœ¨è£…é¥°å™¨å‡½æ•°çš„å¤–é¢(é«˜é˜¶å‡½æ•°)ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨è£…é¥°å™¨å‡½æ•°å†…éƒ¨ä½¿ç”¨è¿™ä¸ªå‚æ•°äº†ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26  const setNameDecorator = (firstName: string, lastName: string) =\u0026gt; { const fullName = `${firstName}.${lastName}`; return \u0026lt;T extends new (...args: any[]) =\u0026gt; any\u0026gt;(target: T) =\u0026gt; { return class extends target { getName() { return `My name is ${fullName}.`; } }; }; }; @setNameDecorator(\u0026#39;Llane\u0026#39;, \u0026#39;zhang\u0026#39;) class User { [key: string]: any; constructor() { this.name = \u0026#39;human\u0026#39;; } getName() { return this.name; } } console.log(new User().getName()); // My name is Llane.zhang.    é™¤äº†ä½¿ç”¨ç±»ç»§æ‰¿æ–¹æ³•æ¥ç”Ÿæˆä¸€ä¸ªæ–°çš„ç±»ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä¿®æ”¹ç±»çš„åŸå‹\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50  type TUserProfile = { firstName: string; lastName: string; [key: string]: any; }; const ProfileDecorator = (profile: TUserProfile) =\u0026gt; { const { firstName, lastName } = profile; const fullName = `${firstName}.${lastName}`; return \u0026lt;T extends new (...args: any[]) =\u0026gt; any\u0026gt;(target: T) =\u0026gt; { const Original = target; // åœ¨åŸå‹ä¸Šæ·»åŠ ä¸€ä¸ªæ–°å±æ€§  Original.prototype.fullName = fullName; // ä¿®æ”¹åŸå‹ä¸Šçš„æ–¹æ³•  Original.prototype.getName = function () { return `My name is ${fullName}.`; }; // overrideæ„é€ å‡½æ•°  function constructor(...args: any[]) { return new Original(...args); } // èµ‹å€¼åŸå‹é“¾  constructor.prototype = Original.prototype; // æ·»åŠ ä¸€ä¸ªé™æ€æ–¹æ³•  constructor.myInfo = `myInfo ${JSON.stringify(profile)}`; return constructor as unknown as typeof Original; }; }; @ProfileDecorator({ firstName: \u0026#39;Llane\u0026#39;, lastName: \u0026#39;zhang\u0026#39;, age: 25 }) class User { [key: string]: any; constructor() { this.name = \u0026#39;human\u0026#39;; } getName() { return this.name; } } interface StaticUser { new (): TUserProfile; myInfo: string; } console.log(new User().getName()); // My name is Llane.zhang. console.log((User as unknown as StaticUser).myInfo); // myInfo {\u0026#34;firstName\u0026#34;:\u0026#34;Llane\u0026#34;,\u0026#34;lastName\u0026#34;:\u0026#34;zhang\u0026#34;,\u0026#34;age\u0026#34;:25}    2. å±æ€§è£…é¥°å™¨ ä¸€èˆ¬ä¸å•ç‹¬ä½¿ç”¨ï¼Œä¸»è¦ç”¨äºé…åˆç±»æˆ–æ–¹æ³•è£…é¥°å™¨è¿›è¡Œç»„åˆè£…é¥°\nå±æ€§è£…é¥°å™¨ä¸»è¦æœ‰ä¸¤ä¸ªå‚æ•°\n target æ™®é€šå±æ€§æ—¶ä¸ºå½“å‰å¯¹è±¡åŸå‹ å³ï¼šx.prototypeï¼Œé™æ€å±æ€§æ—¶ä¸ºå½“å‰å¯¹è±¡çš„ç±» propertyKey å±æ€§åç§°  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34  // è¿™é‡Œå‚¨å­˜å±æ€§è£…é¥°å™¨ä¸­å­˜çš„å‚æ•° const userRoles: string[] = []; const RoleDecorator = (roles: string[]) =\u0026gt; (target: any, key: string) =\u0026gt; { roles.forEach((role) =\u0026gt; userRoles.push(role)); }; const SetRoleDecorator = \u0026lt;T extends new (...args: any[]) =\u0026gt; { [key: string]: any },\u0026gt;( constructor: T, ) =\u0026gt; { const roles = [ { name: \u0026#39;super-admin\u0026#39;, desc: \u0026#39;è¶…çº§ç®¡ç†å‘˜\u0026#39; }, { name: \u0026#39;admin\u0026#39;, desc: \u0026#39;ç®¡ç†å‘˜\u0026#39; }, { name: \u0026#39;user\u0026#39;, desc: \u0026#39;æ™®é€šç”¨æˆ·\u0026#39; }, ]; return class extends constructor { constructor(...args: any) { super(...args); this.roles = roles.filter((role) =\u0026gt; userRoles.includes(role.name)); } }; }; @SetRoleDecorator class UserEntity { @RoleDecorator([\u0026#39;admin\u0026#39;, \u0026#39;user\u0026#39;]) roles: string[] = []; } const user = new UserEntity(); console.log(user.roles); // [ { name: \u0026#39;admin\u0026#39;, desc: \u0026#39;ç®¡ç†å‘˜\u0026#39; }, { name: \u0026#39;user\u0026#39;, desc: \u0026#39;æ™®é€šç”¨æˆ·\u0026#39; } ]    3. æ–¹æ³•è£…é¥°å™¨ æ–¹æ³•è£…é¥°å™¨æ¥å—ä¸‰ä¸ªå‚æ•°ï¼ˆæ¯”å±æ€§è£…é¥°å™¨å¤šä¸€ä¸ªæ–¹æ³•çš„å±æ€§æè¿°ç¬¦ descriptorï¼‰\n target å¯¹äºé™æ€æˆå‘˜æ¥è¯´æ˜¯ç±»çš„æ„é€ å‡½æ•°ï¼Œå¯¹äºå®ä¾‹æˆå‘˜æ˜¯ç±»çš„åŸå‹å¯¹è±¡ã€‚ propertyKey æ–¹æ³•å descriptor æ–¹æ³•çš„å±æ€§æè¿°ç¬¦\nå…¶ä¸­å±æ€§æè¿°ç¬¦æœ‰ä»¥ä¸‹å‡ ä¸ªå­å±æ€§ configurable?: boolean; æ˜¯å¦èƒ½ä¿®æ”¹æˆ–åˆ é™¤è¿™ä¸ªå±æ€§ enumerable?: boolean; è¯¥å±æ€§æ˜¯å¦å¯æšä¸¾å¯è¢«éå†å‡ºæ¥ value?: any; ç”¨äºå®šäºæ–°çš„æ–¹æ³•æ¥æ›¿æ¢æ—§æ–¹æ³•ï¼ˆè¯·ä½¿ç”¨function ä»¥å…å†…éƒ¨ä¸èƒ½ä½¿ç”¨thisæ¥ç»‘å®šï¼‰ writable?: boolean; æ˜¯å¦å¯å†™ get?: any; getè®¿é—®å™¨ set(v: any)?: void; setè®¿é—®å™¨  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33  const LoggerDecorator = () =\u0026gt; { return function logMethods( target: any, propertyName: string, propertyDescriptor: PropertyDescriptor, ): PropertyDescriptor { // ä¿ç•™åŸæœ‰çš„ç™»å½•é€»è¾‘  const methods = propertyDescriptor.value; // é‡å†™æ–¹æ³•  propertyDescriptor.value = async function (...args: any[]) { try { await methods.apply(this, args); } finally { const now = new Date().valueOf(); console.log(`logged in ${now}`); } }; return propertyDescriptor; }; }; class UserService { @LoggerDecorator() async login() { await new Promise((resolve) =\u0026gt; { setTimeout(resolve, 2000); }); console.log(\u0026#39;login success\u0026#39;); } } const user = new UserService(); user.login(); // login success // logged in 1679550405528   4. å‚æ•°è£…é¥°å™¨ æ¯ä¸ªç±»æ–¹æ³•çš„å…¥å‚ä¹Ÿå¯ä»¥æœ‰è‡ªå·±çš„è£…é¥°å™¨ï¼Œä¸€èˆ¬ä¹Ÿé…åˆç±»æˆ–æ–¹æ³•è£…é¥°å™¨ä½¿ç”¨\nå‚æ•°è£…é¥°å™¨çš„å‚æ•°æœ‰ï¼š\ntarget å¯¹äºé™æ€æˆå‘˜æ¥è¯´æ˜¯ç±»çš„æ„é€ å‡½æ•°ï¼Œå¯¹äºå®ä¾‹æˆå‘˜æ˜¯ç±»çš„åŸå‹å¯¹è±¡ã€‚\nkey å‚æ•°å\nindex å‚æ•°åœ¨å‡½æ•°å‚æ•°åˆ—è¡¨ä¸­çš„ç´¢å¼•\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63  // åˆ›é€ ä¸€ä¸ªä¸“é—¨ç”¨äºæ ¼å¼åŒ–å…¥å‚çš„è£…é¥°å™¨  // å‚¨å­˜æ ¼å¼åŒ–å…¥å‚æ–¹æ³• const argsParse: ((...args: any[]) =\u0026gt; any)[] = []; const parse = (parseFn: (...args: any[]) =\u0026gt; number) =\u0026gt; (target: any, key: string, index: number) =\u0026gt; { argsParse[index] = parseFn; }; const parseDecorator = ( target: any, propertyName: string, descriptor: PropertyDescriptor, ): PropertyDescriptor =\u0026gt; { const method = descriptor.value; return { ...descriptor, value(...args: any[]) { const newArgs = args.map((value, index) =\u0026gt; { return argsParse[index] ? argsParse[index](value) : value; }); return method.apply(this, newArgs); }, }; }; interface IUser { id: number; name: string; } class UserService { private users: IUser[] = [ { id: 1, name: \u0026#39;Alice\u0026#39; }, { id: 2, name: \u0026#39;Ben\u0026#39; }, ]; getUsers() { return this.users; } @parseDecorator delete(@parse((arg: any) =\u0026gt; Number(arg)) id: any) { this.users = this.users.filter((user) =\u0026gt; user.id !== id); } } const userService = new UserService(); console.log(\u0026#39;before delete 1\u0026#39;, userService.getUsers()); userService.delete(1); console.log(\u0026#39;after delete 1\u0026#39;, userService.getUsers()); console.log(\u0026#39;before delete 2\u0026#39;, userService.getUsers()); userService.delete(\u0026#39;2\u0026#39;); // è¿™é‡Œå°†å…¥å‚stringæ ¼å¼åŒ–ä¸ºnumberäº†ï¼Œæ‰€ä»¥ä¾æ—§å¯ä»¥è¿è¡ŒæˆåŠŸ console.log(\u0026#39;after delete 2\u0026#39;, userService.getUsers()); // before delete 1 [ { id: 1, name: \u0026#39;Alice\u0026#39; }, { id: 2, name: \u0026#39;Ben\u0026#39; } ] // after delete 1 [ { id: 2, name: \u0026#39;Ben\u0026#39; } ] // before delete 2 [ { id: 2, name: \u0026#39;Ben\u0026#39; } ] // after delete 2 []    5. è®¿é—®å™¨è£…é¥°å™¨ å‚æ•°å’Œæ–¹æ³•è£…é¥°å™¨ä¸€æ ·ï¼ˆå…¶å®å°±æ˜¯å±æ€§çš„get å’Œ setæ–¹æ³•ï¼‰\né€šè¿‡è®¿é—®å™¨è£…é¥°å™¨å¯ä»¥é‡å†™getå’Œsetæ–¹æ³•å’Œdescriptorçš„å±æ€§ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52  export const HiddenDecorator = () =\u0026gt; { return ( target: any, propertyName: string, descriptor: PropertyDescriptor, ) =\u0026gt; { descriptor.enumerable = false; }; }; const PrefixDecorator = (prefix: string) =\u0026gt; { return ( target: any, propertyName: string, descriptor: PropertyDescriptor, ) =\u0026gt; { return { ...descriptor, set(value: string) { descriptor.set.apply(this, [`${prefix}_${value}`]); }, }; }; }; class UserEntity { private _nickName: string; private fullName: string; @HiddenDecorator() @PrefixDecorator(\u0026#39;Llane\u0026#39;) get nickName() { return this._nickName; } set nickName(value: string) { this._nickName = value; this.fullName = `${value}_fullName`; } getFullName() { return this.fullName; } } const user = new UserEntity(); console.log(user); // UserEntity { _nickName: undefined, fullName: undefined } console.log(user.nickName); user.nickName = \u0026#39;goodman\u0026#39;; console.log(user.nickName); // Llane_goodman    è£…é¥°å™¨çš„è°ƒç”¨é¡ºåº å‚æ•° -\u0026gt; æ–¹æ³• -\u0026gt; get/set/å±æ€§ -\u0026gt; ç±»\nå½“å¯¹ä¸€ä¸ªè¢«è£…é¥°è€…è°ƒç”¨å¤šä¸ªè£…é¥°å™¨çš„æ—¶å€™\n1 2 3 4 5  @A @B getName() =\u0026gt; { return this.name; }   ä¸Šè¿°ä»£ç ç›¸å½“ä¸A(B(getName))\nå®ƒä»¬çš„è°ƒç”¨æ­¥éª¤ç±»ä¼¼å‰¥æ´‹è‘±æ³•ï¼Œå³ï¼š\n ç”±ä¸Šè‡³ä¸‹ä¾æ¬¡å¯¹è£…é¥°å™¨è¡¨è¾¾å¼æ±‚å€¼ã€‚ æ±‚å€¼çš„ç»“æœä¼šè¢«å½“ä½œå‡½æ•°ï¼Œç”±ä¸‹è‡³ä¸Šä¾æ¬¡è°ƒç”¨ã€‚  ","description":"","id":7,"section":"posts","tags":null,"title":"è£…é¥°å™¨æ˜¯ä»€ä¹ˆ","uri":"https://llane.xyz/posts/%E8%A3%85%E9%A5%B0%E5%99%A8%E8%AF%A6%E8%A7%A3/"},{"content":"è¿™ç¯‡æ–‡ç« æ˜¯ä»‹ç»GraphQlçš„ä½œç”¨å’Œåœ¨å‰åç«¯çš„ä½¿ç”¨ä¾‹å­ã€‚\nåç«¯ä½¿ç”¨NestJsã€‚\nGraphQlè§£å†³çš„é—®é¢˜ 1.è¯·æ±‚æ•°æ®èµ„æºè¿‡å¤š\næˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°åœ¨è¯·æ¥å£æ•°æ®æ—¶å€™ï¼Œæ¥å£è¿”å›çš„æ•°æ®å­—æ®µæ¯”å®é™…éœ€è¦çš„å¤šï¼Œæ¯ä¸€ä¸ªå­—æ®µéƒ½æ˜¯éœ€è¦è®¡ç®—é‡çš„ï¼Œè®¡ç®—é‡å°±æ˜¯èµ„æºã€‚\nåœ¨GraphQlä¸­å¯ä»¥åœ¨å‘èµ·æ–¹æŒ‡å®šéœ€è¦çš„å­—æ®µï¼Œåç«¯å¤„ç†è¯·æ±‚æ—¶å¯ä»¥æ ¹æ®è¿™äº›å­—æ®µè¿”å›è¦çš„æ•°æ®ã€‚\n2.è¯·æ±‚æ•°æ®èµ„æºè¿‡å°‘\nå½“é¡¹ç›®é€æ¸å˜å¤æ‚ï¼Œä¸€ä¸ªé¡µé¢ä¸Šä¼šå‡ºç°å¤šä¸ªè¯·æ±‚ï¼Œä»åç«¯çš„è§’åº¦çœ‹ä¸å¸Œæœ›ä¸€æ¥å£åšå¤ªå¤šå·¥ä½œï¼Œè€Œå‰ç«¯å»æŠŠå¤šä¸ªè¯·æ±‚å†…å®¹åˆå¹¶ä¸ºæœ€ç»ˆéœ€è¦çš„æ•°æ®ä¹Ÿå¾ˆéº»çƒ¦ã€‚\nGraphQl å¯ä»¥ç›´æ¥æŠŠå¤šä¸ªè¯·æ±‚çš„å†…å®¹åˆå¹¶ä¸ºä¸€ä¸ªè¿”å›ç»“æœã€‚\n","description":"","id":8,"section":"posts","tags":null,"title":"GraphQl å…ˆå¯¼ç¯‡","uri":"https://llane.xyz/posts/graphql%E5%85%88%E5%AF%BC%E7%AF%87/"},{"content":"NestJs æ˜¯ä¸€ä¸ªå¯æ‰©å±•çš„Node.jsåç«¯æ¡†æ¶ï¼Œåº•å±‚æ”¯æŒExpresså’ŒFastifyã€‚\nè¿™ä¸ªç³»åˆ—æ–‡ç« ä¼šæ€»ç»“ä¸€äº›NestJsçš„æ¦‚å¿µå’Œæœ€ä½³å®è·µã€‚\ninstall npm i -g @nestjs/cli nest new project-name main.js src/main.js æ–‡ä»¶æ˜¯å¼€å§‹æ–‡ä»¶\n1 2 3 4 5 6  // å·¥å‚æ–¹æ³•ä¸­è½½å…¥app moduleï¼Œç”Ÿæˆå’Œå¯åŠ¨appå¹¶ç›‘å¬3000ç«¯å£ async function bootstrap() { const app = await NestFactory.create(AppModule); await app.listen(3000); } bootstrap();   modules åœ¨Nestä¸­é€šè¿‡è£…é¥°å™¨ç±»æ¥è¾¾åˆ°ä¾èµ–æ³¨å…¥ï¼Œåœ¨@Moduleä¸­åŠ å…¥å‚æ•°å¦‚:\n1 2 3 4 5  @Module({ imports: [SubModule], controllers: [AppController], providers: [], })   imports ä¸­å¯ä»¥åŠ å…¥å­æ¨¡å—ï¼Œcontrollersä¸­ä¸»è¦æ˜¯å¯¹è·¯ç”±çš„æ§åˆ¶ï¼Œprovidersä¸­ä¸»è¦æ˜¯serviceå…·ä½“çš„æœåŠ¡å†…å®¹ã€‚\nè¿™é‡ŒsubModuleä¸­ä¹Ÿæœ‰å¯¹åº”çš„controllerså’Œprovidersã€‚\ncontroller 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40  // src/movies/movies.controller.ts import { MoviesService } from \u0026#39;./movies.service\u0026#39;; @Controller(movies) export class MoviesController { // è¿™é‡ŒMoviesServiceå¹¶æ²¡æœ‰çœŸçš„å¯¼å…¥ï¼Œåªæ˜¯åŠ äº†ç±»å‹ï¼Œä½†æ˜¯å› ä¸ºmoduleè£…é¥°å™¨ç±»ä¸­æœ‰ä¾èµ–æ³¨å…¥  // æ‰€æœ‰ä¸‹é¢å¯ä»¥ç›´æ¥è°ƒç”¨this.moviesService  constructor(private readonly moviesService: MoviesService) {} // @Getå°±æ˜¯ä¸€ä¸ªè·¯ç”±æ§åˆ¶ï¼Œè¿™é‡Œåªè¦æ˜¯getè¯·æ±‚ /moviesä¸å¸¦å…¶ä»–è·¯å¾„å°±ä¼šåŒ¹é…åˆ°  @Get() getAll(): Movie[] { return this.moviesService.getAll(); } // @Paramå¯ä»¥è·å–getè¯·æ±‚urlçš„å‚æ•°  // å¦‚ï¼š/movies/1  @Get(\u0026#39;:id\u0026#39;) getOne(@Param(\u0026#39;id\u0026#39;) movieId: number): Movie { return this.moviesService.getOne(movieId) } // post è¯·æ±‚å¯ä»¥é€šè¿‡@Bodyå’ŒDTOç±»æ¥çº¦æŸå¯¹è±¡çš„å­—æ®µå’Œç±»å‹  @Post() create(@Body() movieData: CreateMovieDto) { return this.moviesService.create(movieData); } // Delete ç±»å‹  @Delete(\u0026#39;:id\u0026#39;) remove(@Param(\u0026#39;id\u0026#39;) movieId: number) { return this.moviesService.deleteOne(movieId); } // Path ç±»å‹  @Patch(\u0026#39;:id\u0026#39;) patch(@Param(\u0026#39;id\u0026#39;) movieId: number, @Body() updateData: UpdateMovieDto) { return this.moviesService.update(movieId, updateData); } }   service æˆ‘ä»¬åœ¨controllerä¸­å¯ä»¥ç›´æ¥è°ƒç”¨serviceç±»çš„æ–¹æ³•ï¼Œæ˜¯å› ä¸ºä¾èµ–æ³¨å…¥åœ¨äº†moduleå®¹å™¨ä¸­\nåœ¨serviceä¸­è¿˜æ˜¯éœ€è¦åŠ ä¸ŠInjectableçš„è£…é¥°å™¨ç±»æ¥è¡¨ç¤ºè¿™ä¸ªç±»æ˜¯éœ€è¦è¢«ä¾èµ–çš„\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21  @Injectable() export class MoviesService { getAll(): Movie[] { return xxx; } // å¯ä»¥çœ‹åˆ°createçš„æ—¶å€™éœ€è¦ä¼ ä¸€ä¸ªæ•°æ®å¯¹è±¡  create(movieData: CreateMovieDto) { this.movies.push({ id: this.movies.length + 1, ...movieData, }) } // updateçš„æ—¶å€™ä¹Ÿéœ€è¦ç©¿ä¸€ä¸ªæ•°æ®å¯¹è±¡  update(id: number, updateData: UpdateMovieDto) { const movie = this.getOne(id); this.deleteOne(id); this.movies.push({ ...movie, ...updateData }); } }   æˆ‘ä»¬å¯ä»¥æŠŠserviceä¸­éœ€è¦ä¼ è¾“çš„æ•°æ®å¯¹è±¡ï¼Œå†™æˆä¸€ä¸ªDTOç±»\nDTO data transfer object\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16  // /src/movies/dto/create-movie.dto.ts // ä½¿ç”¨class-validatorï¼Œç”¨ç±»è£…é¥°å™¨æ¥æ£€æµ‹å­—æ®µç±»å‹ import { IsString, IsNumber, IsOptional } from \u0026#39;class-validator\u0026#39;; export class CreateMovieDto { @IsString() readonly title: string; @IsNumber readonly year: number; // å¯é€‰ç±»  @IsOptional() @IsString({ each: true }) // æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå­—æ®µéƒ½æ£€æµ‹ç±»å‹ä¸ºstring  readonly genres: string[]; }   1 2 3 4 5 6  // /src/movies/dto/update-movie.dto.ts import { IsString, IsNumber } from \u0026#39;class-validator\u0026#39;; import { PartialType } from \u0026#39;@nestjs/mapped-types\u0026#39;; // ç”±äºUpdateMovieDtoå’ŒCreateMovieDtoçš„å­—æ®µéƒ½ä¸€æ ·ï¼Œåªæ˜¯éƒ½ä¸ºå¯é€‰é¡¹ï¼Œæ‰€ä»¥ç›´æ¥ç”¨PartialType export class UpdateMovieDto extends PartialType(CreateMovieDto) {}   validation nestjs å†…ç½®äº†validationçš„éªŒè¯\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17  // /src/main.ts import { NestFactory } from \u0026#39;@nestjs/core\u0026#39;; import { AppModule } from \u0026#39;./app.module\u0026#39;; import { ValidationPipe } from \u0026#39;@nestjs/common\u0026#39;; async function bootstrap() { const app = await NestFactory.create(AppModule); app.useGlobalPipes( new ValidationPipe({ whitelist: true, // éªŒè¯å™¨å°†å»é™¤æ²¡æœ‰ä½¿ç”¨éªŒè¯è£…é¥°å™¨çš„å±æ€§  forbidNonWhitelisted: true, // éªŒè¯å™¨å°†æŠ›å‡ºå¼‚å¸¸è€Œä¸æ˜¯å‰¥ç¦»éç™½åå•å±æ€§  transform: true, // ValidationPipeå¯ä»¥æ ¹æ®DTO ç±»è‡ªåŠ¨è½¬æ¢, æ¯”å¦‚idå¦‚æœæ˜¯stringä¼šè‡ªåŠ¨è½¬ä¸ºnumber  }), ); await app.listen(3000); } bootstrap();    å®Œæ•´ä»£ç è¯·å‚è€ƒhi-nest  ","description":"","id":9,"section":"nestjs","tags":null,"title":"NestJs å…ˆå¯¼ç¯‡","uri":"https://llane.xyz/nestjs/1-start/"},{"content":"ç–«æƒ…å°é—­å¤ªä¹…ï¼Œæˆ‘å·²ç»è¿ç»­4å¤©æ—©èµ·æ²¡æŠ¢åˆ°èœäº†\næˆ‘åœ¨å¶ç„¶é—´çœ‹åˆ°é˜®ä¸€å³°è€å¸ˆçš„å‘¨åˆŠé‡Œæœ‰ä¸€ç‰‡æ–‡ç« æ˜¯å…³äºå¦‚ä½•ä»å®‰å“æ‰‹æœºç¿»å½•ç”µå­ä¹¦\nhttps://shkspr.mobi/blog/2021/12/quick-and-dirty-way-to-rip-an-ebook-from-android/\nå—¯ï¼Ÿæˆ‘å¥½åƒå¯ä»¥è¯•è¯•ç”¨bashè„šæœ¬æŠ¢èœ\n1.å®‰è£…adb è¿™é‡Œç”±äºæˆ‘çš„macç¬”è®°æœ¬å·²ç»å®‰è£…äº†brewï¼Œæ‰€ä»¥è¿™ä¸€æ­¥æ¯”è¾ƒç®€å•\nbrew cask install android-platform-tools å¯ä»¥çœ‹åˆ°adbç‰ˆæœ¬å°±è¯´æ˜å®‰è£…æˆåŠŸäº†\nadb version 2.adbè¿æ¥å®‰å“æ‰‹æœº æŠŠæ‰‹æœºå’Œç”µè„‘è¿æ¥åï¼Œæ‰‹æœºå¼¹å‡ºæ¡†é€‰æ‹©ä¼ è¾“æ–‡ä»¶ï¼ˆä¸è¦é€‰ä»…å……ç”µï¼‰\nè®¾ç½®å¥½æ‰‹æœºçš„USBè°ƒè¯•å¼€å¯\nç”µè„‘ç«¯è¿è¡Œå‘½ä»¤æŸ¥çœ‹æ‰‹æœºè®¾å¤‡\nadb devices 3.æ¨¡æ‹Ÿç‚¹å‡» å¥½çš„ç»ˆäºå¯ä»¥å¼€å§‹å†™è„šæœ¬äº†ï¼Œè¿™æ¬¡çš„è®¾æƒ³æ¯”è¾ƒç®€å•ï¼Œè®©adbæ¨¡æ‹Ÿç‚¹å‡»\né¦–å…ˆè¯•è¯•è¿è¡Œç‚¹å‡»å‘½ä»¤èƒ½å¦ç”Ÿæ•ˆ\nadb shell input tap 893 2237 è¿™é‡Œtapåè·Ÿçš„ä¸¤ä¸ªæ•°å­—å‚æ•°æ˜¯æ‰‹æœºçš„xè½´å’Œyè½´ï¼Œä»¥æ­¤ç¡®å®šç‚¹å‡»ä½ç½®\nç¡®è®¤å¯ä»¥ç‚¹å‡»åï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“æ€ä¹ˆæ§åˆ¶ç‚¹å‡»çš„ä½ç½®\n4.å¼€å¯ç›‘å¬äº‹ä»¶ ç»è¿‡æŸ¥è¯¢åæ‰¾åˆ°äº†ä¸€ä¸ªå‘½ä»¤å¯ä»¥ç›‘å¬äº‹ä»¶æ¥è·å–ç‚¹å‡»ä½ç½®\nå¼€å¯\nadb shell getevent -l æ­¤æ—¶åœ¨æ‰‹æœºä¸Šéšä¾¿ç‚¹ä¸€ä¸ªä½ç½®å¯ä»¥çœ‹åˆ°è¾“å‡ºäº‹ä»¶äº†\næ‰¾åˆ°POSITION_Xå’ŒPOSITION_Y\n/dev/input/event5: EV_ABS ABS_MT_POSITION_X 00000316\n/dev/input/event5: EV_ABS ABS_MT_POSITION_Y 0000014d\nè¿™é‡Œçš„316å’Œ14dæ˜¯ä½ç½®xyè½´çš„16è¿›åˆ¶ï¼Œè½¬ä¸º10è¿›åˆ¶åä¸º790å’Œ333\nåœ¨çº¿16è½¬10è¿›åˆ¶\nè¿™æ ·å°±å¯ä»¥çŸ¥é“æˆ‘ä»¬æƒ³è¦ç‚¹å‡»ä½ç½®çš„xyè½´äº†\n5.ç¼–å†™è„šæœ¬ // cd åˆ°ä½ çš„å·¥ä½œç›®å½• touch cai.sh // ä¿®æ”¹æ‰§è¡Œæƒé™ chmod +x ./cai.sh // è¿™é‡Œæˆ‘æ‰“å¼€vscodeå†™è„šæœ¬ code cai.sh cai.sh\n#!/bin/bash echo å¼€å§‹æŠ¢èœå’¯ for i in {000001..999999}; do adb shell input tap 893 2237 echo ç‚¹å‡»ç¬¬ $i æ¬¡ # sleep 0.01s done echo All done ä»£ç å¾ˆç®€å•ï¼Œå¾ªç¯999999æ¬¡ç‚¹å‡»ä¸€ä¸ªå›ºå®šçš„ä½ç½®ï¼Œè§‰å¾—ç‚¹å‡»è¿˜æ˜¯å¤ªæ…¢äº†å°±æ³¨é‡Šäº†sleep\nè¿è¡Œè„šæœ¬\n./cai.sh 6.ç»“è¯­ æœ€åæˆ‘æˆåŠŸæŠ¢åˆ°äº†èœï¼Œå®é™…æƒ…å†µä¸­æˆ‘åœ¨ä¸¤ä¸ªç»ˆç«¯ä¸­åˆ†åˆ«åŒæ—¶è¿è¡Œbashè„šæœ¬åŠ å¿«ç‚¹å‡»é¢‘ç‡\nè„šæœ¬è¿˜æœ‰å¾ˆå¤šå¯ä»¥æ‹“å±•çš„ç©ºé—´ï¼Œå¸Œæœ›å¯ä»¥å¼€æ‹“ä½ çš„æ€è·¯\næ™šä¸Šå¯ä»¥åƒæµ·é²œæ„é¢äº†ï½\n","description":"","id":10,"section":"posts","tags":["ä»£ç ä¸ç”Ÿæ´»"],"title":"Bashå’ŒæŠ¢èœ","uri":"https://llane.xyz/posts/bash%E5%92%8C%E6%8A%A2%E8%8F%9C/"},{"content":"æœ¬ç¯‡æ–‡ç« å°†ä¼šè®²è§£ NestJs+GraphQl çš„å®‰è£…éƒ¨ç½²ï¼Œæœ€åä¼šå®ç°ä¸€ä¸ªæœ€ç®€å®ä¾‹\nå®‰è£… Nest npm i -g @nestjs/cli\nåˆ›å»ºä¸è¿è¡Œ Nest åº”ç”¨ nest g application\nå¡«å†™ä½ çš„ app åï¼Œå®Œæˆåè¿›å…¥å¯¹åº”çš„ app æ–‡ä»¶å¤¹ï¼Œè¿è¡Œnpm iå®‰è£…ä¾èµ–\nnpm run start:dev å°±å¯ä»¥è¿è¡Œåº”ç”¨äº†ï¼Œåœ¨ 127.0.0.1:3000 å¯ä»¥çœ‹åˆ°\nå®‰è£… GraphQl äº‹å®ä¸Š NestJs ä¸­æœ‰ GraphQl çš„ç›¸å…³æ¨¡å—ï¼Œhttps://docs.nestjs.com/graphql/quick-start\nè¿è¡Œå®˜ç½‘çš„å®‰è£…å‘½ä»¤\n$ npm i @nestjs/graphql @nestjs/apollo graphql apollo-server-express\nåˆ é™¤é¡¹ç›®ä¸å¿…è¦å†…å®¹ src/main.ts æ˜¯é¡¹ç›®å¯åŠ¨çš„æ ¹æ–‡ä»¶ï¼Œå…¶ä¸­å¼•ç”¨äº† AppModule\næ‰€æœ‰ä¸œè¥¿éƒ½æ˜¯åœ¨ AppModule ä¸­å¼•å…¥çš„\né¡¹ç›® generate å app.module.ts ä¸­å·²ç»æœ‰äº†å¯¹åº”çš„æ–‡ä»¶ï¼Œæˆ‘ä»¬å…ˆåˆ é™¤è¿™äº›æ–‡ä»¶å’Œ@Module ä¸­çš„å¼•ç”¨\nimport { Module } from '@nestjs/common'; @Module({ import: [], controller: [], providers: [] }) ç°åœ¨æˆ‘ä»¬éœ€è¦ä½¿ç”¨ GraphQl è¿™ä¸ª moduleï¼Œå¾ˆæ˜¾ç„¶éœ€è¦åœ¨ AppModule ä¸­å¼•å…¥ï¼Œäºæ˜¯æˆ‘ä»¬åœ¨@Module çš„ import ä¸­å¯¼å…¥\nimport { Module } from '@nestjs/common'; import { GraphQLModule } from '@nestjs/graphql'; @Module({ import: [ GraphQLModule.forRoot({ autoSchemaFile: true, // ç”¨tsè‡ªåŠ¨ç”ŸæˆSchemaæ–‡ä»¶ }) ], controller: [], providers: [] }) ç”Ÿæˆç¬¬ä¸€ä¸ªæ¨¡å— æˆ‘ä»¬ç”Ÿæˆä¸€ä¸ªå«restaurantçš„æ¨¡å—ï¼Œg mo æ˜¯generate moduleçš„ç®€å†™ã€‚\nnest g mo restaurants åœ¨ AppModule ä¸­å¯¼å…¥ restaurants çš„ module\nimport { Module } from '@nestjs/common'; import { GraphQLModule } from '@nestjs/graphql'; import { RestaurantsModule } from './restaurants/restaurants.module'; @Module({ import: [ GraphQLModule.forRoot({ autoSchemaFile: true, // ç”¨tsè‡ªåŠ¨ç”ŸæˆSchemaæ–‡ä»¶ }) RestaurantsModule, ], controller: [], providers: [] }) ç¼–å†™ Restaurants æ¨¡å— restaurants.module.ts\nimport { Module } from '@nestjs/common'; import { RestaurantResolver } from './restaurants.resolver'; @Module({ providers: [RestaurantResolver], }) export class RestaurantsModule {} restaurants.resolver.ts\nimport { Query, Resolver } from '@nestjs/graphql'; @Resolver() export class RestaurantsResolver { // è¿™é‡Œå°†ä¼šè®°å½•æ•°æ®å¢åˆ æ”¹æŸ¥çš„æ–¹æ³• @Query(returns =\u0026gt; Boolean) isAuth() { return true; } } è‡³æ­¤å°±å¯ä»¥è§£å†³ GraphQl æ²¡æœ‰ shema çš„æŠ¥é”™äº†ï¼ˆGraphQL æœ‰è‡ªå·±çš„ç±»å‹ç³»ç»Ÿï¼Œè¯¥ç³»ç»Ÿç”¨äºå®šä¹‰ API çš„ schemaã€‚ç¼–å†™ schema çš„è¯­æ³•ç§°ä¸ºæ¨¡å¼å®šä¹‰è¯­è¨€ï¼Œå³ Schema Definition Languageï¼ŒSDLï¼‰\nä½¿ç”¨ ObjectType ObjectType from @nestjs/graphql å¯ä»¥è®©æˆ‘ä»¬ä½¿ç”¨ ts æ¥ç¼–å†™ GraphQl\nåœ¨ restaurant module ä¸‹åˆ›å»º entities/restaurant.entity.ts\nentity å¯¹åº”çš„å°±æ˜¯æ•°æ®åº“ä¸­çš„ moduleï¼ŒObjectType ä¼šåˆ›å»ºä¸€ä¸ª restaurant çš„æ•°æ®è¡¨å¯¹è±¡\nentities/restaurant.entity.ts\nimport { Field, ObjectType } from '@nestjs/graphql'; @ObjectType() export class Restaurant { @Field((type) =\u0026gt; String) // Fieldéœ€è¦è¿”å›ä¸€ä¸ªreturnTypeFunction GraphQL æ•°æ®ç±»å‹ name: string; // å­—æ®µtsæ•°æ®ç±»å‹ @Field((type) =\u0026gt; Boolean, { nullable: true }) // éå¿…å¡«æ—¶ç”¨nullable isVegan?: boolean; @Field((type) =\u0026gt; String) address: string; @Field((type) =\u0026gt; String) ownerName: string; } ç¼–å†™ Restaurant çš„ Query æ–¹æ³• import { Args, Query, Resolver } from '@nestjs/graphql'; import { CreateRestaurantDto } from './dtos/create-restaurant.dto'; import { Restaurant } from './entities/restaurant.entity'; @Resolver((of) =\u0026gt; Restaurant) // Restaurant entity çš„è§£æåº“ï¼ˆä¿å­˜å¢åˆ æ”¹æŸ¥çš„åœ°æ–¹ï¼‰ export class RestaurantResolver { @Query((returns) =\u0026gt; [Restaurant]) // è¿™é‡ŒæŸ¥è¯¢çš„å…¥å‚æ˜¯veganOnlyæ˜¯å¦ä¸ºç´ é£Ÿé¤å…ï¼ŒåŒæ ·éœ€è¦GraphQlçš„è£…é¥°å™¨Args restaurants( @Args('veganOnly') veganOnly: boolean ): Restaurant[] { return []; } } åœ¨ 127.0.0.1ï¼š3000/graphql ä¸­å¯ä»¥çœ‹åˆ° GraphQl çš„æ•°æ®æ“ä½œå°\nç¼–å†™ Restaurant çš„ Create æ–¹æ³• æ–¹æ³•1 restaurants.resolver.ts\nimport { Args, Mutation, Query, Resolver } from '@nestjs/graphql'; import { CreateRestaurantDto } from './dtos/create-restaurant.dto'; import { Restaurant } from './entities/restaurant.entity'; @Resolver((of) =\u0026gt; Restaurant) // Restaurant entity çš„è§£æå™¨ export class RestaurantResolver { @Query((returns) =\u0026gt; [Restaurant]) // è¿™é‡ŒæŸ¥è¯¢çš„å…¥å‚æ˜¯veganOnlyæ˜¯å¦ä¸ºç´ é£Ÿé¤å…ï¼ŒåŒæ ·éœ€è¦GraphQlçš„è£…é¥°å™¨Args restaurants( @Args('veganOnly') veganOnly: boolean ): Restaurant[] { return []; } // æ–¹æ³•1: å…¥å‚ä¸ºcreateä¸€ä¸ªrestaurantæ‰€éœ€çš„æ‰€æœ‰å­—æ®µ @Mutation((returns) =\u0026gt; Boolean) createRestaurant1( @Args('name') name: string, @Args('isVegan') isVegan: boolean, @Args('address') address: string, @Args('ownerName') ownerName: string, ): boolean { return true; } } æ–¹æ³•2 å¯ä»¥ä½¿ç”¨inputTypeæ¥ä¼ é€’ä¸€ä¸ªå®Œæ•´çš„å¯¹è±¡ï¼Œå¯¹è±¡åŒ…å«create restaurantæ‰€éœ€çš„æ‰€æœ‰å­—æ®µ\nè¿™ä¸ªå¯¹è±¡æ˜¯ä¸€ç§dtoï¼ˆdata transfer objectï¼‰\nåœ¨restaurants moduleä¸‹åˆ›å»ºæ–‡ä»¶å¤¹dtos/create-restaurant.dto.ts\nsrc/restaurants/dtos/create-restaurant.dto.ts\n@InputType() export class CreateRestaurantDto { @Field(type =\u0026gt; String) name: string; @Field(type =\u0026gt; Boolean) isVegan: boolean; @Field(type =\u0026gt; String) address: string; @Field(type =\u0026gt; String) ownerName: string; } src/restaurants/restaurants.resolver.ts\nimport { Args, Mutation, Query, Resolver } from '@nestjs/graphql'; import { CreateRestaurantDto } from './dtos/create-restaurant.dto'; import { Restaurant } from './entities/restaurant.entity'; @Resolver((of) =\u0026gt; Restaurant) // Restaurant entity çš„è§£æå™¨ export class RestaurantResolver { @Query((returns) =\u0026gt; [Restaurant]) // è¿™é‡ŒæŸ¥è¯¢çš„å…¥å‚æ˜¯veganOnlyæ˜¯å¦ä¸ºç´ é£Ÿé¤å…ï¼ŒåŒæ ·éœ€è¦GraphQlçš„è£…é¥°å™¨Args restaurants( @Args('veganOnly') veganOnly: boolean ): Restaurant[] { return []; } @Mutation((returns) =\u0026gt; Boolean) createRestaurant( @Args('createRestaurantInput') createRestaurantInput: CreateRestaurantDto // ç›´æ¥ä½¿ç”¨InputTypeç±»å‹ ): boolean { return true; } } æ–¹æ³•3 InputType åœ¨å®é™…ä½¿ç”¨çš„æ—¶å€™è¿˜éœ€è¦ä½¿ç”¨é”®åï¼ŒInputTypeæŠŠä¸€ä¸ªå¯¹è±¡(éœ€è¦çš„å€¼åŒ…å«åœ¨å¯¹è±¡ä¸­)ä¼ é€’ç»™GraphQl\nmutation { createRestaurant(createRestaurantInput: { name: 'Llane-eats', isVegan: false, address: 'Shanghai'; ownerName: 'Llane zhang' }) } å¦‚æœä½¿ç”¨ArgsTypeå¯ä»¥å†ç®€åŒ–ï¼ŒArgsTypeå¯ä»¥æŠŠå•ç‹¬çš„å¤šä¸ªå€¼ä¼ é€’ç»™GraphQl\nsrc/restaurants/dtos/create-restaurant.dto.ts\n@ArgsType() export class CreateRestaurantDto { @Field(type =\u0026gt; String) name: string; @Field(type =\u0026gt; Boolean) isVegan: boolean; @Field(type =\u0026gt; String) address: string; @Field(type =\u0026gt; String) ownerName: string; } src/restaurants/restaurants.resolver.ts\nimport { Args, Mutation, Query, Resolver } from '@nestjs/graphql'; import { CreateRestaurantDto } from './dtos/create-restaurant.dto'; import { Restaurant } from './entities/restaurant.entity'; @Resolver((of) =\u0026gt; Restaurant) // Restaurant entity çš„è§£æå™¨ export class RestaurantResolver { @Query((returns) =\u0026gt; [Restaurant]) // è¿™é‡ŒæŸ¥è¯¢çš„å…¥å‚æ˜¯veganOnlyæ˜¯å¦ä¸ºç´ é£Ÿé¤å…ï¼ŒåŒæ ·éœ€è¦GraphQlçš„è£…é¥°å™¨Args restaurants( @Args('veganOnly') veganOnly: boolean ): Restaurant[] { return []; } @Mutation((returns) =\u0026gt; Boolean) createRestaurant( @Args() createRestaurantDto: CreateRestaurantDto // ç›´æ¥ä½¿ç”¨InputTypeç±»å‹ ): boolean { return true; } } æ­¤æ—¶mutationå¯ä»¥ä¸ç”¨å†™keyå€¼äº†\nmutation { createRestaurant( name: 'Llane-eats', isVegan: false, address: 'Shanghai'; ownerName: 'Llane zhang' ) } å®‰è£…class-validator class-validator å¯ä»¥è®©æˆ‘ä»¬ç”¨ç±»è£…é¥°å™¨çš„æ–¹å¼æ¥å¯¹å­—æ®µåšè¿›ä¸€æ­¥çš„éªŒè¯\næ¯”å¦‚å¯ä»¥é™åˆ¶nameä¸º5-10ä¸ªå­—ç¬¦ä¸²\nå®‰è£… npm i class-validator class-transformer åˆ›å»ºapplication validation pipeline main.ts\nimport { ValidationPipe } from '@nestjs/common'; import { NestFactory } from '@nestjs/core'; import { AppModule } from './app.module'; async function bootstrap() { const app = await NestFactory.create(AppModule); app.useGlobalPipes(new ValidationPipe()); // åˆ›å»ºvalidation pipeline await app.listen(3000); } bootstrap(); ä½¿ç”¨ class-validator src/restaurants/dtos/create-restaurant.dto.ts\n@ArgsType() export class CreateRestaurantDto { @Field(type =\u0026gt; String) @IsString() // æ˜¯å­—ç¬¦ä¸²ç±»å‹ @Length(5, 10) // é•¿åº¦5-10 name: string; @Field(type =\u0026gt; Boolean) @IsBoolean() // æ˜¯booleanç±»å‹ isVegan: boolean; @Field(type =\u0026gt; String) @IsString() address: string; @Field(type =\u0026gt; String) @IsString() @Length(5, 10) ownerName: string; } æ­¤æ—¶å¦‚æœmutation æ‰§è¡ŒcreateRestaurantæ—¶å‚æ•°ä¸ç¬¦åˆæ ‡å‡†å°±ä¼šæŠ¥é”™\nå®‰è£…PostgreSQL ç›´æ¥å»å®˜ç½‘ä¸‹è½½å®‰è£…åŒ…ï¼Œä¸å¤ªå»ºè®®æ–°æ‰‹ç”¨brew installä¹‹ç±»çš„å®‰è£…\nå’Œmysqlï¼Œsql serverä¸€æ ·PostgreSQLä¹Ÿæœ‰ç±»ä¼¼çš„å¯è§†åŒ–æ“ä½œè½¯ä»¶\nwindows ç”¨æˆ·æ¨è pgAdmin\nmac ç”¨æˆ·æ¨è postico\nè¿™é‡Œè®°å½•ä¸€äº›å®ç”¨çš„å‘½ä»¤\n// åˆ—å‡ºæ‰€æœ‰ç”¨æˆ· \\du; // æ”¹å˜æŒ‡å®šç”¨æˆ·çš„å¯†ç  ALTER USER 'åˆ¶å®šçš„ç”¨æˆ·å' WITH PASSWORD 'æ–°å¯†ç '; ä½¿ç”¨è¿æ¥PostgreSQL NestJSæœ‰ä¸€ä¸ªå«TypeORMçš„é›†æˆï¼Œå¯ä»¥ç”¨æ¥è¿æ¥æ•°æ®åº“\n@nestjs/typeorm\nå®˜ç½‘æ•™ç¨‹\nnpm install --save @nestjs/typeorm typeorm pg ","description":"","id":11,"section":"posts","tags":null,"title":"1-NestJs+GraphQl-å®‰è£…ä¸æœ€ç®€å®ä¾‹","uri":"https://llane.xyz/posts/1-nestjs+graphql/"},{"content":"1 Vue æ˜¯ä¸€ä¸ª Class æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œ\nåœ¨å®ä¾‹åŒ–åï¼ŒVue ä¼šè°ƒç”¨_init å‡½æ•°æ¥è¿›è¡Œåˆå§‹åŒ–ï¼Œ\nä»–ä¼šåˆå§‹åŒ–ç”Ÿå‘½å‘¨æœŸã€äº‹ä»¶ã€propsã€methodsã€dataã€computed ä¸ watch ç­‰ã€‚\nåœ¨åˆå§‹åŒ–è¿‡ç¨‹ä¸­ä¼šé€šè¿‡ Object.defineProperty æ¥è®¾ç½® stter ä¸ getter å‡½æ•°ï¼Œç”¨æ¥å®ç°ã€å“åº”å¼ã€‘ä»¥åŠã€ä¾èµ–æ”¶é›†ã€‘\nä¾èµ–æ”¶é›†ä¸»è¦æ˜¯é’ˆå¯¹å¯¹å‡ºç°åœ¨ template ä¸­çš„å‚æ•°ï¼ˆéœ€è¦æ›´æ–°è§†å›¾ï¼‰ä»¥åŠå‡ºç°åœ¨ computed å’Œ watch ä¸­çš„å‚æ•°è¿›è¡Œä¾èµ–æ”¶é›†ã€‚\næ¯ä¸€ä¸ªæ•°æ®å¯¹è±¡éƒ½ä¼šæœ‰ä¸€ä¸ªè‡ªå·²çš„è®¢é˜…è€…é›†åˆ Depï¼ŒDep ä¸­å­˜æ”¾äº† Watcher è§‚å¯Ÿè€…å¯¹è±¡ã€‚\nDep ç±»æœ‰ 2 ä¸ªä¸»è¦çš„æ–¹æ³•ï¼š\n1.addSub å¢åŠ ä¸€ä¸ª Watcherd è®¢é˜…è€…åˆ° subs ä¸­\n2.notify é€šçŸ¥ Dep å¯¹è±¡ä¸­çš„æ‰€æœ‰ Watcher è§‚å¯Ÿè€…è§¦å‘æ›´æ–° update æ“ä½œ\nåœ¨å¯¹æ•°æ®è¿›è¡Œå“åº”å¼æ—¶ï¼š\nget è§¦å‘æ—¶ä¼šè§¦å‘ dep çš„ addSub å°†å½“å‰çš„ watcher å¯¹è±¡å­˜å…¥ dep çš„ subs ä¸­ï¼Œ\nset è§¦å‘æ—¶ä¼šè§¦å‘ dep çš„ notify æ–¹æ³•é€šçŸ¥æ‰€æœ‰ watcher å¯¹è±¡ update æ“ä½œæ›´æ–°è§†å›¾\nrender function åœ¨æ¸²æŸ“æ—¶ï¼Œå…¶ä¸­çš„ä¾èµ–å¯¹è±¡éƒ½ä¼šè¢«è¯»å–ï¼Œè§¦å‘ get æ—¶çš„ä¾èµ–æ”¶é›†\n2 åˆå§‹åŒ–åä¼šè°ƒç”¨$mount æ¥æŒ‚è½½ç»„ä»¶ï¼Œå¦‚æœæœ‰ template è¿˜éœ€è¦è¿›ä¸€æ­¥ç¼–è¯‘\n3 ç¼–è¯‘åˆ†ä¸º 3 ä¸ªæ­¥éª¤ï¼šparseï¼Œoptimize ä¸ generateï¼Œæœ€ç»ˆå¾—åˆ° render function\n3.1 parse ä¼šç”¨æ­£åˆ™ç­‰æ–¹å¼å°† template ä¸­çš„æ¨¡ç‰ˆè¿›è¡Œè§£æç”Ÿæˆ AST æ ‘ï¼ˆæŠ½è±¡è¯­æ³•æ ‘ abstract syntax treeï¼‰\n3.2 optimize é€šè¿‡ä¸ºé™æ€èŠ‚ç‚¹ï¼ˆåªæœ‰ node.type==3 ä¸ºæ–‡æœ¬èŠ‚ç‚¹æ—¶æ‰æ˜¯é™æ€èŠ‚ç‚¹ï¼‰åšæ ‡è®°ï¼Œåœ¨ patch çš„æ—¶å€™è·³è¿‡è¿™äº›æ ‡è®°ä¸ºé™æ€èŠ‚ç‚¹çš„å¯¹æ¯”ï¼Œè¾¾åˆ°ä¼˜åŒ–çš„ç›®çš„\n3.3 generate ä¼šå°† AST æ ‘è½¬ä¸º render function å­—ç¬¦ä¸²\n4 å½“è§¦å‘ watcher å¯¹è±¡çš„ update æ“ä½œæ—¶ï¼Œæœ€ç»ˆä¼šå°†äº§ç”Ÿçš„æ–° VNode èŠ‚ç‚¹ä¸è€ VNode è¿›è¡Œä¸€ä¸ª patch å¯¹æ¯”æ“ä½œï¼Œå¯¹æ¯”å‡ºå·®å¼‚åï¼Œå°†å·®å¼‚æ›´æ–°åˆ°è§†å›¾ä¸Š\nvue ä¸­çš„ diff ç®—æ³•æ˜¯é€šè¿‡åŒå±‚çš„æ ‘èŠ‚ç‚¹è¿›è¡Œæ¯”è¾ƒè€Œéå¯¹æ ‘è¿›è¡Œé€å±‚æœç´¢éå†çš„æ–¹å¼ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦åªæœ‰ O(n)\nåŒæŒ‡é’ˆ diff ç®—æ³•\n5 æ‰¹é‡æ›´æ–°ç­–ç•¥ä»¥åŠ nextTick\n","description":"","id":12,"section":"Vue","tags":["Vue"],"title":"Vueçš„è¿è¡ŒåŸç†æ¢³ç†","uri":"https://llane.xyz/vue/1-%E5%93%8D%E5%BA%94%E5%BC%8F%E7%9A%84%E5%AE%9E%E7%8E%B0/"},{"content":"å¯åŠ¨ webpack   ./node_modules/.bin/webpack\n  npx webpack\n  package.json ä¸­åŠ ä¸Š\n  1 2 3  \u0026#34;script\u0026#34;: { \u0026#34;build\u0026#34;: \u0026#34;webpack\u0026#34; }   è®© webpack æ”¯æŒ IE æ ¹ç›®å½•åŠ ä¸Šé…ç½®æ–‡ä»¶.browserlistrc\n[production] \u0026gt; 1% //è¦æ”¯æŒå¤§äº1%çš„æµè§ˆå™¨ ie 9 //è¦æ”¯æŒie9 [modern] last 1 chrome verson //æ”¯æŒæœ€è¿‘çš„ç¬¬ä¸€ä¸ªchromeç‰ˆæœ¬ last 1 firefox verson //æ”¯æŒæœ€è¿‘çš„ç¬¬ä¸€ä¸ªfirefoxç‰ˆæœ¬ [ssr] node 12 ä½¿ç”¨ babel-loader babel ä¸­çš„ @babel/parseï¼Œ@babel/traverseï¼Œ@babel/generate ä¼šå°†ä»£ç è½¬ä¸º AST æ ‘æ¥è¿›ä¸€æ­¥åˆ†æ\nä½¿ç”¨ babel æ¥æ‰“åŒ… jsï¼Œå®˜ç½‘ä¾‹å­\né€šè¿‡è®¾ç½® preset å°±å¯ä»¥è®© babel æ”¯æŒ es6 ï¼Œreact jsxï¼Œts çš„è¯­æ³•\nå…ˆæ¥å®‰è£…è¿™äº› preset\nyarn add -D @babel/core @babel/preset-env babel-loader @babel/plugin-transform-runtime @babel/preset-react @babel/preset-typescript\nå…¶ä¸­@babel/core åŒ…å«äº†ï¼ˆ@babel/parseï¼Œ@babel/traverseï¼Œ@babel/generateï¼‰\nplugin-transform-runtime å¯ä»¥å®ç°ä½ç‰ˆæœ¬æµè§ˆå™¨çš„ polyfillï¼Œæ¯”å¦‚å¸®åŠ©å®ç°ä½ç‰ˆæœ¬æµè§ˆå™¨çš„ Promise\næ¥ä¸‹æ¥åˆ›å»ºæ ¹ç›®å½•æ–‡ä»¶ webpack.config.js\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17  // scripts/webpack.base.js const path = require(\u0026#39;path\u0026#39;) module.exports = { // å…¥å£æ–‡ä»¶ï¼Œè¿™é‡Œä¹‹åä¼šç€é‡å¼ºè°ƒ  entry: { main: path.resolve(__dirname, \u0026#39;../src/index.jsx\u0026#39;), }, module: { rules: [ { test: /\\.(t|j)sx?$/, use: \u0026#39;babel-loader\u0026#39;, }, ], }, }   å†åˆ›å»ºæ ¹ç›®å½•æ–‡ä»¶ .babelrc\n{ \u0026quot;presets\u0026quot;: [ \u0026quot;@babel/preset-env\u0026quot;, \u0026quot;@babel/preset-react\u0026quot;ï¼Œ \u0026quot;@babel/preset-typescript\u0026quot; ], \u0026quot;plugins\u0026quot;: [ [ \u0026quot;@babel/plugin-transform-runtime\u0026quot;, { \u0026quot;regenerator\u0026quot;: true } ] ] } ESLint ESLsnt ä¼šé™æ€åœ°è‡ªåŠ¨åˆ†æä»£ç çš„ bugï¼ˆè¿™é‡Œæœ‰ä¸¤ä¸ªæ–¹é¢ä¸€ä¸ªæ˜¯ webpack ç¼–è¯‘çš„æ—¶å€™ ESLsnt æŠ¥é”™ï¼Œä¸€ä¸ªæ˜¯ç¼–è¾‘å™¨ä¸­ ESLsnt é™æ€æ£€æŸ¥æŠ¥é”™ï¼Œä¸¤è€…å„è‡ªéœ€è¦å®‰è£…å’Œé…ç½®ï¼‰\né¦–å…ˆè®©ç¼–è¯‘æ”¯æŒ ESLsintï¼Œæ‰§è¡Œï¼š\nyarn add eslint --dev\nnpx eslint --init //æ ¹æ®æç¤ºé€‰é¡¹ç”Ÿæˆé…ç½®\nå¯ä»¥å‚è€ƒæˆ‘å†™çš„ ESLint é…ç½®\nä¹‹åæœç´¢ä¸€ä¸‹ä¸åŒç¼–è¾‘å™¨è¦æ€ä¹ˆè®¾ç½®è®© ESLint åœ¨ç¼–è¾‘å™¨ä¸­ç”Ÿæ•ˆ\nvscode æœ‰ eslint æ’ä»¶ï¼Œwebstorm æˆ–è€… IDEA é‡Œæœ‰ç›´æ¥è®¾ç½®å‹¾é€‰\næ­¤å¤–ä½ å¯èƒ½å¬è¯´è¿‡ tslint ä½†æ˜¯ç”±äº tslint çš„ä½œè€…å·²ç»åœæ­¢ç»´æŠ¤äº†æ‰€ä»¥éƒ½ç”¨ eslint æ¯”è¾ƒå¥½\neslint çš„é…ç½®å¾ˆå¤æ‚ï¼Œä½¿ç”¨ \u0026ndash;init çš„é€‰é¡¹å°±å¥½\ntsconfig é…ç½® å®‰è£…ä¸åˆå§‹åŒ–ï¼š\nyarn add -D typescript npx tsc --init æ¥ä¸‹æ¥ä¿®æ”¹ jsconfig æ–‡ä»¶å¤¹:\nè®¾ç½® jsx ä»£ç è½¬ä¸º reactï¼Œ\u0026quot;jsx\u0026quot;: \u0026quot;react\u0026quot;\nts ä¸­çš„æ¨¡å—è§£æè§„åˆ™ï¼Œå°†å®ƒä¿®æ”¹ä¸º node: \u0026quot;moduleResolution\u0026quot;: \u0026quot;node\u0026quot;,\nwebpack æ”¯æŒé¡¹ç›®ä¸­ä½¿ç”¨ alias åˆ«å åœ¨ webpack.config.js ä¸­çš„ç¬¬ä¸€å±‚åŠ å…¥å±æ€§ resolve\nresolve: { alias: { '@': path.resolve(__dirname, './src'), //.srcæ˜¯ç›¸å¯¹webpack.config.jsçš„è·¯å¾„ } } ä¹‹åé¡¹ç›®ä¸­å°±å¯ä»¥`import xxx from \u0026lsquo;@/xxx\u0026rsquo;ï¼Œæ¥ä»£æ›¿./src/xxx\nä½†æ˜¯ä¸ºäº†è®© ts ä¹Ÿæ”¯æŒ alias éœ€è¦ä¿®æ”¹ tsconfig\n1 2 3 4 5 6  // tsconfig.json  ... \u0026#34;baseUrl\u0026#34;: \u0026#34;./\u0026#34;, \u0026#34;paths\u0026#34;: { \u0026#34;@/*\u0026#34;: [\u0026#34;./src/*\u0026#34;], },   æ”¯æŒ scss æ‰“åŒ… use loader sass-loader css-loader style-loaders\nåœ¨ webpack.config.js ä¸­å¢åŠ é…ç½®\n1 2 3 4 5 6 7 8 9 10 11 12 13  ... module: { rules: [ { test: /\\.s[ac]ss$/i, use: [ \u0026#39;style-loader\u0026#39;, \u0026#39;css-loader\u0026#39;, \u0026#39;sass-loader\u0026#39;, ] ... ], },   è®¾ç½® split åˆ‡åˆ†è§„åˆ™ optimization: { moduleIds: 'deterministic', //æ¯ä¸ªmoduleæœ‰ç¡®å®šçš„idï¼Œä¸ä¼šå› ä¸ºå…¶ä»–æ–‡ä»¶ç¼ºå¤±æ”¹å˜è‡ªå·±çš„id runtimeChunk: 'single', //\u0026quot;single\u0026quot; ä¼šåˆ›å»ºä¸€ä¸ªåœ¨æ‰€æœ‰ç”Ÿæˆ chunk ä¹‹é—´å…±äº«çš„è¿è¡Œæ—¶æ–‡ä»¶ splitChunks: { cacheGroups: { vendor: { // ä¸€èˆ¬æŠŠç±»ä¼¼react vueçš„åº“å•ç‹¬æ‰“åŒ…å‡ºæ¥åç§°ä¸ºvendor priority: 10, // ä¼˜å…ˆçº§æœ€é«˜ minSize: 0, /* å¦‚æœä¸å†™ 0ï¼Œç”±äº React æ–‡ä»¶å°ºå¯¸å¤ªå°ï¼Œä¼šç›´æ¥è·³è¿‡ */ test: /[\\\\/]node_modules[\\\\/]/, // ä¸ºäº†åŒ¹é… /node_modules/ æˆ– \\node_modules\\ name: 'vendors', // æ–‡ä»¶å chunks: 'all', // all è¡¨ç¤ºåŒæ­¥åŠ è½½å’Œå¼‚æ­¥åŠ è½½ï¼Œasync è¡¨ç¤ºå¼‚æ­¥åŠ è½½ï¼Œinitial è¡¨ç¤ºåŒæ­¥åŠ è½½ // è¿™ä¸‰è¡Œçš„æ•´ä½“æ„æ€å°±æ˜¯æŠŠä¸¤ç§åŠ è½½æ–¹å¼çš„æ¥è‡ª node_modules ç›®å½•çš„æ–‡ä»¶æ‰“åŒ…ä¸º vendors.xxx.js // å…¶ä¸­ vendors æ˜¯ç¬¬ä¸‰æ–¹çš„æ„æ€ }, common: { priority: 5, // ä¼˜å…ˆçº§åœ¨node moduleåº“ä¹‹å minSize: 0, minChunks: 2, // æŠŠå¤šä¸ªæ–‡ä»¶å¼•ç”¨è¿‡çš„å…¬å…±ä»£ç ä¹Ÿå•ç‹¬æ‰“åŒ…å‡ºæ¥çš„ï¼Œè¿™é‡Œçš„2æŒ‡çš„å°±æ˜¯è‡³å°‘è¢«2ä¸ªå…¥å£æ–‡ä»¶ä¾èµ– chunks: 'all', name: 'common' } }, }, }, æŒç»­æ›´æ–°ä¸­ã€‚ã€‚ã€‚\n","description":"","id":13,"section":"posts","tags":null,"title":"Webpacké…ç½®æ€»ç»“","uri":"https://llane.xyz/posts/webpack%E9%85%8D%E7%BD%AE%E6%80%BB%E7%BB%93/"},{"content":" æˆ‘æƒ³çŸ¥é“è¿™æ˜¯ä¸ºä»€ä¹ˆ \u0026ndash;è´¹æ›¼\n ç®—æ³•çš„ä¼˜åŒ–æ¯”å·¥ç¨‹çš„ä¼˜åŒ–ï¼ˆæé«˜æœåŠ¡å™¨é…ç½®ï¼‰æ•ˆç‡æ›´é«˜\nç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ O(1) å“ˆå¸Œæ¡¶/æ•°ç»„éšæœºå¯»å€ï¼ˆå¸¸æ•°ï¼‰\næ— è®ºé—®é¢˜çš„è§„æ¨¡å¤šå¤§ï¼Œéƒ½å¯ä»¥åœ¨å¸¸æ•°æ—¶é—´èŒƒå›´å†…æ±‚çš„è§£\n","description":"","id":14,"section":"algorithm","tags":["ç®—æ³•åŸºç¡€","å­¦ä¹ ç¬”è®°"],"title":"èœé¸Ÿå­¦ç®—æ³•-10-å¯¹ç®—æ³•çš„æ€è€ƒ","uri":"https://llane.xyz/algorithm/10-%E5%AF%B9%E7%AE%97%E6%B3%95%E7%9A%84%E6%80%9D%E8%80%83/"},{"content":"æµè§ˆå™¨çš„ä¸»è¦ç»„æˆ æµè§ˆå™¨çš„ä¸»è¦ç»„æˆæœ‰ï¼š\næµè§ˆå™¨æ ¸å¿ƒ\nç½‘ç»œæ¨¡å—\næ¸²æŸ“å¼•æ“\nJS è§£é‡Šå™¨\nå…¶ä»–\næµè§ˆå™¨æ ¸å¿ƒè°ƒç”¨ç½‘ç»œæ¨¡å—å‘é€ HTTP è¯·æ±‚ï¼Œæ¸²æŸ“å¼•æ“æ ¹æ® HTTP çš„å“åº”ä¿¡æ¯æ¸²æŸ“é¡µé¢\nå¦‚æœæ¸²æŸ“å¼•æ“é‡åˆ°äº† scriptï¼Œè¦å…ˆè®©ç½‘ç»œæ¨¡å—ä¸‹è½½ jsï¼Œä¸‹è½½å®Œæˆåè®© js è§£é‡Šå™¨æ‰§è¡Œ js ä»£ç \nHTML çš„è§£æå’Œé˜»å¡ 1.ä¸‹è½½ HTML\n2.è§£æ HTML\nè¿™é‡Œä¸åŒæµè§ˆå™¨çš„å®ç°ä¸åŒï¼Œå¯èƒ½ä¸€è¾¹ä¸‹è½½ HTML ä¸€è¾¹å°±å¼€å§‹è§£æäº†ï¼Œä¹Ÿå¯èƒ½æ˜¯å®Œå…¨ä¸‹è½½å®Œå†è§£æ\n3.è§£æ HTML çš„è¿‡ç¨‹æ˜¯æ„å»ºä¸€ä¸ª DOM æ ‘ï¼Œä¸æ˜¯ç›´æ¥æ¸²æŸ“çš„\nä¸­é€”å¦‚æœçœ‹åˆ° css å°±è®©ç½‘ç»œæ¨¡å—å»å¼‚æ­¥åœ°ä¸‹è½½ css æ–‡ä»¶ï¼Œç„¶åç»§ç»­è§£æä¸‹ä¸€è¡Œ HTML\nè§£æ css æ˜¯æ„å»ºä¸€ä¸ª css æ ‘ï¼Œ\nä¸­é€”å¦‚æœçœ‹åˆ°çš„æ˜¯ js ä¹Ÿå°±æ˜¯ script çš„æ ‡ç­¾ï¼Œå°±ä¼šå»è®©ç½‘ç»œæ¨¡å—ä¸‹è½½ js æ–‡ä»¶èµ„æºç„¶åæ‰§è¡Œï¼Œ\nä½†æ˜¯å’Œ css ä¸åŒï¼Œåœ¨é‡åˆ° js åè§£æ HTML çš„è¿‡ç¨‹ä¼šåœæ­¢ï¼Œç›´åˆ° js æ‰§è¡Œå®Œæ‰ä¼šç»§ç»­è§£æåé¢çš„ HTML\nå³ï¼šjs çš„ä¸‹è½½å’Œæ‰§è¡Œä¼šé˜»å¡ HTML çš„è§£æ\næ‰§è¡Œ js çš„è¿‡ç¨‹ä¼šé˜»å¡ HTML çš„è§£æï¼šæ‰§è¡Œ js å¯èƒ½ä¼šä¿®æ”¹ HTML çš„ DOM æ ‘ï¼ˆæ¯”å¦‚æ–°åŠ ä¸€ä¸ª divï¼‰ï¼Œå¸Œæœ›å¯ä»¥è®© js å…ˆä¿®æ”¹å®Œäº†å†è§£æ DOM æ ‘\nä¸‹è½½ js çš„è¿‡ç¨‹ä¼šé˜»å¡ HTML çš„è§£æï¼šè§£ææ˜¯é€è¡Œçš„ï¼Œåªæœ‰è§£æåˆ° script æ ‡ç­¾æ‰ä¼šä¸‹è½½ï¼Œæµè§ˆå™¨ä¸åšé¢å¤–ä¼˜åŒ–å°±ä¼šé˜»å¡ HTML çš„è§£æ\nasync vs defer async å’Œ defer å¯ä»¥ä½œä¸ºå±æ€§åŠ åœ¨ script æ ‡ç­¾ä¸Š\né¦–å…ˆåœ¨æ‰§è¡Œ js çš„æ—¶å€™ä¸èƒ½è§£æ HTML ä¾ç„¶ä¸å˜\ndefer å¯ä»¥è®©ä¸‹è½½ js æ—¶å¯ä»¥ç»§ç»­è§£æ HTMLï¼Œå½“ js ä¸‹è½½å¹¶æ‰§è¡Œå®Œæ¯•åæ‰ä¼šè§¦å‘ DOM ready\nasync ä¹Ÿå¯ä»¥è®©ä¸‹è½½ js æ—¶å¯ä»¥ç»§ç»­è§£æ HTMLï¼Œå½“ HTML è§£æå®Œæ¯•åè§¦å‘ DOM ready\ndeferä¸asyncçš„åŒºåˆ«:\ndeferï¼šå¤šä¸ªå¸¦æœ‰deferå±æ€§çš„è„šæœ¬ä¼šæŒ‰ç…§å®ƒä»¬åœ¨æ–‡æ¡£ä¸­çš„é¡ºåºæ‰§è¡Œã€‚\nasyncï¼šå¤šä¸ªå¸¦æœ‰asyncå±æ€§çš„è„šæœ¬çš„æ‰§è¡Œé¡ºåºä¸ç¡®å®šï¼Œå–å†³äºä¸‹è½½å®Œæˆçš„æ—¶é—´ã€‚\nå¦å¤–è¿˜æœ‰\n1 2  \u0026lt;script type=\u0026#34;module\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script type=\u0026#34;module\u0026#34; async\u0026gt;\u0026lt;/script\u0026gt;   type=\u0026ldquo;module\u0026rdquo; å’Œ defer å‡ ä¹ç­‰ä»·ï¼Œä¸‹è½½ js ä¸é˜»å¡ HTML è§£æï¼Œæ‰§è¡Œå®Œ js åæ‰å‡ºå‘ DOM ready\nå®é™…å·¥ä½œä¸­ defer æ›´å¸¸è§\nä¸‹è½½å’Œè§£æ css ä¼šé˜»å¡ js çš„æ‰§è¡Œ å› ä¸º js éœ€è¦è¯»å– css çš„ç»“æœï¼Œæ¯”å¦‚ js å»è·å–ä¸€ä¸ªå…ƒç´ çš„å®½é«˜ï¼Œè€Œè¿™ä¸ªå®½é«˜æ˜¯ç”± css è§£æç»“æœå†³å®šçš„\nå…³äºé¡µé¢çš„æ¸²æŸ“ åœ¨å¾—åˆ° DOM æ ‘å’Œ CSS æ ‘ï¼ˆCSSOMï¼‰åï¼Œä¼šåˆæˆä¸ºæ¸²æŸ“æ ‘ï¼ˆè¿™é‡Œ DOM æ ‘æœ‰å®Œæ•´çš„é¡µé¢ç»“æ„ï¼ŒCSS æ ‘ä¸ä¸€å®šæœ‰å®Œæ•´çš„é¡µé¢ç»“æ„ï¼Œæ‰€ä»¥éœ€è¦åœ¨çœŸæ­£æ¸²æŸ“å‰åˆå¹¶ä¸¤æ£µæ ‘ä¸ºæ¸²æŸ“åšå‡†å¤‡ï¼‰ï¼Œæ¸²æŸ“æ ‘ï¼ˆRender tree)æœ‰æ¯ä¸€ä¸ª DOM èŠ‚ç‚¹å’Œå¯¹äºçš„ CSS å†…å®¹\nLayout å¸ƒå±€ï¼Œå…ƒç´ çš„å¤§å°å°ºå¯¸ï¼Œè®¡ç®—é«˜åº¦å®½åº¦ï¼Œè®¡ç®—å½“å‰å±å¹•åŒºåŸŸå±•ç¤ºçš„å†…å®¹\nPaint ç»˜åˆ¶æ¯ä¸€ä¸ªå…ƒç´ çš„ç€è‰²é˜´å½±\nComposite å¯¹å¤šå±‚æ¬¡çš„å†…å®¹åˆå¹¶æˆä¸€å±‚çš„å†…å®¹ï¼Œå¯¹å¤„äºåŒä¸€ä¸ªä½ç½®çš„å…ƒç´ æ ¹æ®å±‚çº§å…³ç³»æ¸²æŸ“å±•ç¤º\næœ€åè¾“å‡ºåˆ°å±å¹•ä¸Š\nå½“ç”¨ js æ”¹å˜ DOM å…ƒç´ çš„ä½ç½®å¤§å°çš„æ—¶å€™ä¼š\nè§¦å‘ reflow é‡æ–°è®¡ç®—å¸ƒå±€\nç„¶åå† repaint é‡æ–°ç»˜åˆ¶\né‡æ–°åˆæˆä¸ä¸€å®šä¼šè§¦å‘\nCSS Triggers æœ‰åˆ—ä¸¾ä¸åŒå±æ€§æ”¹å˜è§¦å‘ä¸åŒæ¸²æŸ“é˜¶æ®µçš„ç»“è®º\nä¸åŒæµè§ˆå™¨èƒŒæ™¯å’Œå†…æ ¸çš„ä»‹ç»\nweb æ–°èƒ½æŒ‡æ ‡ ä»ç”¨æˆ·è·³è½¬åˆ°å½“å‰ç½‘é¡µå:\n æœ‰å†…å®¹å‡ºç° DOM ready(DOM content loaded) äº‹ä»¶å‘ç”Ÿ HTML çš„å†…å®¹å…¨éƒ¨è§£æå®Œï¼Œjs åŸºæœ¬æ‰§è¡Œå®Œ é¡µé¢å¯äº¤äº’æ—¶ onLoad äº‹ä»¶å‘ç”Ÿ åŠ¨æ€èµ„æºåŠ è½½å®Œ  DNS ä¼˜åŒ–-é¢„è§£æ å¯¹èµ„æºçš„ URI åš DNS æŸ¥è¯¢çš„æ—¶å€™ï¼Œä¼šé€è¡Œè§£æï¼Œç„¶å(DNS æŸ¥è¯¢ + ä¸‹è½½èµ„æº) + (DNS æŸ¥è¯¢ + ä¸‹è½½èµ„æº) * N\u0026hellip;ï¼Œé€šè¿‡ DNS é¢„è§£æå¯ä»¥æå‰åŒæ—¶æŸ¥å¤šä¸ª DNSï¼Œå°±èŠ‚çº¦äº†åé¢å•ä¸ª DNS æŸ¥è¯¢çš„æ—¶é—´\nå‰ç«¯å¯ä»¥åœ¨ index.html çš„\u0026lt;head\u0026gt;ä¸­å†™\n1  \u0026lt;link rel=\u0026#34;dns-prefetch\u0026#34; href=\u0026#34;https://xx.com\u0026#34;\u0026gt;   åç«¯å¯ä»¥åœ¨ index.html è¿”å›çš„å“åº”å¤´é‡Œå†™\nLink: \u0026lt;https://xx.com/\u0026gt;; rel=dns-prefetch\nTCP ä¼˜åŒ–è¿æ¥å¤ç”¨ åœ¨ HTTP 1.1 ä¹‹å‰å¾ˆå¤šè¯·æ±‚éƒ½æ˜¯é»˜è®¤ä¸æŒä¹…åŒ–çš„ï¼Œæ„æ€å°±æ˜¯æ¯æ¬¡å‘ä¸€ä¸ª HTTP è¯·æ±‚éƒ½éœ€è¦é‡æ–°å»ºç«‹ä¸€æ¬¡ TCP è¿æ¥ï¼Œä¸”è¿™æ¬¡ TCP è¿æ¥åœ¨ HTTP è¯·æ±‚ç»“æŸåä¹Ÿä¼šå…³é—­\né€šè¿‡æŒç»­å»ºç«‹ TCP è¿æ¥ï¼Œå¯ä»¥èŠ‚çº¦é‡å¤å…³é—­å’Œå»ºç«‹ TCP è¿æ¥çš„æ—¶é—´\né€šè¿‡åœ¨ HTTP çš„è¯·æ±‚å¤´å’Œå“åº”å¤´ä¸­æ·»åŠ å¤´éƒ¨å­—æ®µ Connection: keep-alive å°±å¯ä»¥ä½¿å¾— TCP è¿æ¥æŒä¹…åŒ–-å®ç°è¿æ¥å¤ç”¨\nç»†èŠ‚ï¼šåœ¨è¯·æ±‚å’Œå“åº”ä¹‹é—´é—´éš”å¤šå°‘æ‰å›è®¤ä¸ºåœ¨ä¸€æ¬¡æŒä¹…è¿æ¥ä¸­å‘¢ï¼ŸçŒœæµ‹æœ‰ä¸€ä¸ªåœ°æ–¹è®¾ç½®é—´éš”æ—¶é—´\nKeepAlive: timeout=60, max=120\nå¯ä»¥æ˜¯æµè§ˆå™¨å‘é€çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯æœåŠ¡å™¨å‘é€çš„ï¼Œéœ€è¦åŒæ–¹åå•†ï¼Œåå•†çš„æ–¹å¼å°±æ˜¯å›åº”çš„æ—¶å€™å¸¦ä¸Šè‡ªå·±çš„ KeepAlive\nTCP ä¼˜åŒ–å¹¶è¡Œè¿æ¥ HTTP 1.1 å·²ç»è‡ªå¸¦äº†å¹¶è¡Œè¿æ¥ï¼Œä½†æ˜¯å¹¶è¡Œè¿æ¥æœ‰æœ€å¤§å¹¶è¡Œæ•°é‡ï¼ˆå¦‚æœæ˜¯ä»¥åŸŸåä¸ºæ ‡è®°çš„ï¼Œæ¯”å¦‚å¯¹ a.com çš„è®¿é—®æœ€å¤šå¹¶è¡Œæ•°æ˜¯ 12ï¼Œé‚£å¦‚æœ cdn æ¢å¤šä¸ªå­åŸŸåå°±å¯ä»¥çªç ´å¹¶è¡Œé™åˆ¶äº†ï¼›æµè§ˆå™¨æœ¬èº«ä¹Ÿæœ‰ä¸€ä¸ªæœ€å¤§è¯·æ±‚å¹¶è¡Œä¸Šé™ï¼‰\næŠŠ js å’Œ css å„è‡ªæ‹†æˆ 2-4 ä¸ªå¯ä»¥åˆ©ç”¨å¹¶è¡ŒåŒæ—¶ä¸‹è½½ï¼Œæé«˜ä¸‹è½½é€Ÿåº¦\nHTTP/1 ç®¡é“åŒ– pipelining è®¾æƒ³æ˜¯åœ¨ä¸€æ¬¡ HTTP/1 è¯·æ±‚ä¸­å¹¶è¡Œå‘å¤šä¸ªè¯·æ±‚ï¼Œå„è‡ªçš„è¯·æ±‚è¿”å›å„è‡ªçš„ç»“æœï¼Œä½†æ˜¯ç”±äº HTTP/1 æ˜¯æ— çŠ¶æ€çš„åŠ ä¸Šç½‘ç»œä¼ è¾“çš„ä¸ç¡®å®šæ€§ï¼Œæ— æ³•çŸ¥é“å“ªä¸ªç»“æœæ˜¯å“ªä¸ªè¯·æ±‚çš„\næ‰€ä»¥åœ¨ HTTP/1 ä¸­ç®¡é“åŒ–æ˜¯ä¸€ä¸ªæœ‰ bug çš„è®¾è®¡\nHTTP/2 å¤šè·¯å¤ç”¨å’ŒæœåŠ¡å™¨æ¨é€ åœ¨ HTTP/2 ä¸­æå‡ºäº†å¸§å’Œæµçš„æ¦‚å¿µï¼Œå°±èƒ½åšåˆ° HTTP/1 ç®¡é“åŒ–æƒ³åšåˆ°çš„äº‹æƒ…ï¼Œå³ï¼šåœ¨ä¸€æ¬¡è¿æ¥ä¸­å‘é€å¤šä¸ªè¯·æ±‚ï¼Œä¸”æ¥æ”¶ç«¯å¯ä»¥è¯·æ±‚æ—¶çš„ id æ¥æ ‡è®°ï¼Œå°±çŸ¥é“å“ªä¸ªç»“æœæ˜¯å“ªä¸ªè¯·æ±‚å‘é€çš„äº†ï¼Œè€Œä¸”ç”±äºå¸§æ¦‚å¿µçš„æå‡ºèµ„æºçš„å•ä½æ›´å°äº†ä¹Ÿå“åº”åŠ ä¸Šäº†è‡ªåŠ¨æ•´åˆå¸§çš„åŠŸèƒ½ã€‚\næ›´å¤šä¿¡æ¯å¯ä»¥çœ‹è¿™ä¸ªåšå®¢ï¼šæµ…æ HTTP/2 çš„å¤šè·¯å¤ç”¨\nHTTP/2 è¿˜å¯ä»¥åšæœåŠ¡å™¨æ¨é€ï¼Œæ¯”å¦‚åœ¨æµè§ˆå™¨ç¬¬ä¸€æ¬¡è¯·æ±‚æ—¶æœåŠ¡å™¨å°±å¯ä»¥é¢„å…ˆå“åº”æ¨é€å¤šä¸ª css å’Œ js ç»™æµè§ˆå™¨ï¼Œé¢„åˆ¤æµè§ˆå™¨æ¥ä¸‹æ¥éœ€è¦è¯·æ±‚çš„å†…å®¹ï¼Œæå‰ä¸€æ¬¡æ€§æ¨é€ç»™æµè§ˆå™¨ã€‚ä¹‹ååœ¨è§£æ HTML çš„è¿‡ç¨‹ä¸­å†é‡åˆ°è¿™å‡ ä¸ª css å’Œ js æ—¶ï¼Œæµè§ˆå™¨å°±ä¼šç›´æ¥è¿”å›å“åº”å†…å®¹ã€‚\nè¦è¾¾åˆ°æœåŠ¡å™¨æ¨é€éœ€è¦é¢„å…ˆäººä¸ºè®¾ç½®ï¼Œå¯ä»¥åœ¨æœåŠ¡å™¨ä¸­è®¾ç½® HTTP2_push çš„æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥åœ¨æœåŠ¡å™¨çš„å“åº”å¤´é‡Œæ·»åŠ è®¾ç½®ã€‚ä½†æ˜¯ç›®å‰å‰ç«¯çš„ js å’Œ css åå­—åœ¨æ‰“åŒ…åæ˜¯å¸¦ hash çš„ç»å¸¸ä¼šæ›´æ–°æ”¹åŠ¨ï¼Œå¯¼è‡´äººä¸ºé¢„å…ˆè®¾ç½®ä¼šå¾ˆéº»çƒ¦ï¼Œæ‰€ä»¥åœ¨å®é™…æƒ…å†µé‡Œå¾ˆå°‘ä½¿ç”¨æœåŠ¡å™¨æ¨é€ã€‚\nHTTP/1.1 ä¸­çš„ web æ€§èƒ½ä¼˜åŒ–ï¼š åˆå¹¶ã€å†…è”ã€å‹ç¼©ã€ç²¾ç®€\nCDNã€ç¼“å­˜\nåˆå¹¶èµ„æº css é›ªç¢§å›¾ï¼ˆæŠŠå¤šä¸ªå›¾ç‰‡åˆå¹¶åˆ°ä¸€ä¸ªå¤§å›¾ä¸­ï¼Œç”¨ css ç»å¯¹å®šä½æ¥å–åŒºå—å†…å®¹ï¼‰webpack æœ‰æ’ä»¶æ–¹ä¾¿å®ç° webpack-spritesmith\nIcon Font ï¼ˆæŠŠå¤šä¸ªå›¾æ ‡åˆå¹¶å˜æˆä¸€ä¸ªå­—ä½“æ–‡ä»¶ï¼Œç”¨ css çš„ class æ¥é€‰æ‹©ä½¿ç”¨ï¼‰\nSVG Symbols (æŠŠå¤šä¸ªå›¾æ ‡åˆå¹¶å˜æˆä¸€ä¸ª icon.svg æ–‡ä»¶ï¼Œç”¨ï¼Œç›¸æ¯” Icon Font æ”¯æŒæ¸å˜ï¼Œ.svg æ–‡ä»¶ç¼–è¾‘æ›´æ–¹ä¾¿ï¼‰\nèµ„æºå†…è” æŠŠå°æ–‡ä»¶çš„å†…å®¹ç›´æ¥å†…è”å†™åˆ° html ä¸­\nå›¾ç‰‡ç”¨ Data URLsï¼Œwebpack ä¹Ÿæœ‰ç›¸åº”çš„æ’ä»¶ url-loaderï¼ŒåŠ è®¾ç½® limitï¼šxxxï¼Œå°äº xxx çš„å›¾ç‰‡ä¼šè‡ªåŠ¨è½¬ä¸º Data URLs\ncss æ–‡ä»¶ ç”¨ï¼Œwebpack æ’ä»¶æœ‰ï¼š inlineSourcePluginï¼ˆä¸å†ç»´æŠ¤ï¼Œä¾èµ– html-webpack-plugin)ã€ inlineChunkHtmlPlugin\njs æ–‡ä»¶ ç”¨\nèµ„æºå‹ç¼© å¸¸ç”¨çš„å‹ç¼©æ–¹å¼æ˜¯ gzipï¼Œä¸€èˆ¬åœ¨æœåŠ¡å™¨ç«¯è®¾ç½®å¼€å§‹å‹ç¼©\nåœ¨è¯·æ±‚å¤´ä¸­æœ‰å­—æ®µ Accept-Encoding: gzip, deflate è¡¨ç¤ºç”¨æˆ·ä»£ç†æ”¯æŒçš„å†…å®¹ç¼–ç æ–¹å¼å’Œä¼˜å…ˆçº§\nä»£ç ç²¾ç®€ HTML åˆ ç©ºæ ¼ã€é—­åˆ\nCSS åˆ é™¤æœªä½¿ç”¨\nJS æ”¹åï¼Œtree Shakingï¼ˆåˆ†æ import çš„å†…å®¹å“ªäº›ç”¨äº†å“ªäº›æ²¡ç”¨ï¼Œä½†æ˜¯ require ä¸èƒ½å¾ˆå¥½åœ°åˆ†æï¼Œrequire(å˜é‡)ï¼‰\nSVG åˆ é™¤æ— ç”¨æ ‡ç­¾ï¼Œå±æ€§\nå›¾ç‰‡ å‡å°‘å†…å®¹ï¼ˆæ— æŸã€æœ‰æŸå‹ç¼©ï¼‰\nCDN å†…å®¹åˆ†å‘ç½‘ç»œ åœ¨ç‰©ç†çš„è§’åº¦ä¸Šç¼©çŸ­è¯·æ±‚çš„è·ç¦»ï¼Œåœ¨è·ç¦»è¯·æ±‚è¿‘çš„åœ°æ–¹åšç¼“å­˜æœåŠ¡å™¨\nDNS è§£ææœ‰è´Ÿè½½å‡è¡¡åŒä¸€ä¸ªåŸŸåå¯èƒ½ä¼šæœ‰å¤šä¸ª ip çš„é€‰æ‹©\nCDN ä¸€èˆ¬ä¸å’Œä¸»ç«™åœ¨åŒçº§åŸŸåï¼Œé˜²æ­¢åœ¨è¯·æ±‚ä¸­å¸¦æœ‰ä¸»ç«™çš„ cookieï¼Œæ¥å‡å°‘è¯·æ±‚ä¿¡æ¯\nå¯ä»¥ç”¨å‘½ä»¤è¡Œä¸Šä¼ æ–‡ä»¶åˆ° cdnï¼Œå†ç”¨ç›¸å…³å‘½ä»¤ä¿®æ”¹æ–‡ä»¶çš„è·¯å¾„ä¸º cdn è·¯å¾„\nnpm build publicUrl = \u0026lsquo;https://1.cdnx.com\u0026rsquo;\nCDN å¥½å¤„ï¼š\n cookie free å¹¶è¡Œè¯·æ±‚/å¤šè·¯å¤ç”¨ ä¸‹è½½é€Ÿåº¦å¿«ï¼Œåªç”¨åœ¨é™æ€å†…å®¹  CDN å®³å¤„ï¼š\n è¦é’± éƒ¨ç½²å˜å¤æ‚ å¯æ§æ€§å˜å·® è·¨åŸŸ å¯ä»¥ç”¨ CORS è§£å†³ï¼Œå…³äº CORS  è·¨åŸŸçš„è„šæœ¬ Error æ‹¿ä¸åˆ°å…·ä½“çš„é”™è¯¯ä¿¡æ¯å’Œå †æ ˆä¿¡æ¯-è§£å†³åŠæ³•\nç¼“å­˜ \u0026amp; å†…å®¹åå•† ä¹Ÿç§°ä¸ºï¼ˆå¼ºç¼“å­˜å’Œå¼±ç¼“å­˜ï¼‰\nCache-Control:\npublic/private,\nmax-age: 3600,\nmust-revalidate\npublic å…¬å¼€çš„ä¿¡æ¯ï¼Œä¸­é—´çš„èŠ‚ç‚¹éƒ½å¯ä»¥ç¼“å­˜\nprivate ç§äººçš„ä¿¡æ¯ åªæœ‰ç”¨æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯å¯ä»¥ç¼“å­˜\nmax-age ç¼“å­˜æ—¶é—´ï¼Œæœ€ä¹…æœ‰æ•ˆæœŸå•ä½ç§’ 3600 ä»£è¡¨ä¸€ä¸ªå°æ—¶\nmust-revalidate å¦‚æœç¼“å­˜è¿‡æœŸï¼Œå¿…é¡»é‡æ–°æ ¡éªŒ\nåå•†è¯·æ±‚è¿‡ç¨‹ï¼š\n ç”¨æˆ·å‘ CDN æœåŠ¡å™¨è¯·æ±‚ main-1.js æœåŠ¡å™¨è¿”å›å“åº”å†…å®¹ï¼Œå“åº”å¤´ä¸­æœ‰ Cache-Control 1 å°æ—¶ï¼ŒETag xxx ç”¨æˆ·çš„æµè§ˆå™¨ç¼“å­˜ main-1.js ä¸€ä¸ªå°æ—¶å main-1.js è¿‡æœŸäº†ï¼Œå¦‚æœè¿˜éœ€è¦è·å– main-1.jsï¼Œå°±éœ€è¦å†æ¬¡è¯·æ±‚æœåŠ¡å™¨\nè¿™æ¬¡çš„è¯·æ±‚å°±æ˜¯åå•†è¯·æ±‚ä¼šå¸¦ä¸Š main-1.js çš„ ETagï¼Œè¯·æ±‚å¤´æœ‰ If-None-Match: xxx(ETag çš„å€¼) æœåŠ¡å™¨æŠŠæ¥æ”¶çš„ ETag å’Œå®é™…æ–‡ä»¶çš„ ETag åšå¯¹æ¯”ï¼Œ\nå¦‚æœæ²¡å˜å°±è¿”å› 304 ä¸”æ²¡æœ‰å“åº”ä½“ä¹Ÿå°±æ˜¯æ²¡æœ‰å˜å¯ä»¥ç»§ç»­æ²¿ç”¨è¿‡æœŸçš„å†…å®¹ï¼Œ\nå¦‚æœå˜äº†å°±è¿”å› 200 å’Œæ–°çš„ main-1.js çš„å†…å®¹ï¼Œé‚£å°±éœ€è¦åˆ é™¤ï¼ˆæ²¡æœ‰ cache-control æˆ–è€… max-age=0ï¼‰æˆ–æ›´æ–°ï¼ˆæœ‰ cache-controlï¼‰è¦†ç›–ç¼“å­˜ä¸­ main-1.js çš„å†…å®¹  ETag æ˜¯æ–‡ä»¶çš„å“ˆå¸Œæ•£åˆ—å€¼\næœåŠ¡å™¨ä¸»åŠ¨ç¦ç”¨ç¼“å­˜ å¦‚æœå“åº”ä¸­ä¸åŠ  Cache-Controlï¼Œæµè§ˆå™¨ä¹Ÿä¼šé»˜è®¤ç¼“å­˜çš„\nç¦æ­¢ç¼“å­˜å¯ä»¥åœ¨å“åº”å¤´é‡Œæ·»åŠ ï¼š\nCache-Control: max-age=0, must-revalidate ä¸ç¼“å­˜ï¼Œæœ‰åå•†\nCache-Control: no-cache ä¸ç¼“å­˜ï¼Œæœ‰åå•†\nCache-Control: no-store ä¸åå•†ï¼Œä¸åå•†\næµè§ˆå™¨ä¸»åŠ¨ç¦ç”¨ç¼“å­˜ æ–¹æ³• 1 åªè¦ url ä¸ä¸€æ ·å°±ä¼šè·³è¿‡ç¼“å­˜\næ¯”å¦‚ï¼šget è¯·æ±‚ xxx.com/home å¦‚æœæ”¹ä¸º xxx.com/home?a=1 åŠ ä¸€ä¸ªéšæœºæ•°\næ–¹æ³• 2 è®¾ç½®è¯·æ±‚å¤´\nCache-Control: no-cache no-store max-age=0\nä»£ç çš„ä½ç½® css æ”¾åœ¨å¤´éƒ¨çš„åŸå› ï¼š\n1 css ä¸é˜»å¡ html çš„è§£æï¼Œè€Œä¸”ç”¨æˆ·æœ€å…ˆå…³æ³¨çš„æ˜¯é¡µé¢çš„æ˜¾ç¤ºï¼Œæ‰€ä»¥ css åº”è¯¥å°½æ—©ä¸‹è½½\n2 æ­¤å¤–ä¹Ÿå¯ä»¥é˜²æ­¢ css è¢« js é˜»å¡\nå†…è”çš„ js æ¨èæ”¾åœ¨å¤´éƒ¨çš„ css å‰çš„åŸå› ï¼š\n1 å†…è”çš„ js æ²¡æœ‰ç½‘ç»œè¯·æ±‚æ‰§è¡Œèµ·æ¥å¾ˆå¿«ï¼Œä¸ç”¨ç­‰ css ä¸‹è½½è§£æ\njs æ”¾åœ¨ body æœ€åçš„åŸå› ï¼š\n1 å¯ç›´æ¥è®¿é—®é¡µé¢çš„ DOMï¼Œæ— éœ€ç›‘å¬ DOM ready\n2 é¿å…é˜»å¡ html çš„è§£æè¿‡ç¨‹\nä»£ç æ‹†åˆ† js å’Œ css éƒ½åšåŒºåˆ†ï¼Œå¦‚æœéƒ½æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œï¼Œæ¯æ¬¡æ›´æ–°ç”¨æˆ·éƒ½éœ€è¦é‡æ–°ä¸‹è½½ï¼Œ\næ‹†åˆ†åä¸å˜çš„éƒ¨åˆ†ç”¨æˆ·å¯ä»¥ç”¨ç¼“å­˜ï¼Œå˜çš„éƒ¨åˆ†å†é‡æ–°è¯·æ±‚\njs åŠ¨æ€å¯¼å…¥ ä½¿ç”¨åº“æ—¶çš„åŠ¨æ€å¯¼å…¥\n1 2 3  import(\u0026#39;åº“åå­—\u0026#39;).then((x) =\u0026gt; { const fun1 = x.fun1() })   è·¯ç”±åŠ è½½ç»„ä»¶çš„åŠ¨æ€å¯¼å…¥\nVue\n1 2 3 4 5 6 7 8 9 10 11 12 13  const router = new VueRouter({ routes: [ { path: \u0026#39;/home\u0026#39;, component: () =\u0026gt; import(\u0026#39;./Home.vue\u0026#39;) }, { path: \u0026#39;/about\u0026#39;, component: () =\u0026gt; ({ component: import(\u0026#39;./About.vue\u0026#39;), loading: LoadingComponent, error: ErrorComponent, }), }, ], })   React\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16  import React, {Suspense, lazy} from \u0026#39;react\u0026#39; import {BrowserRouter as Router, Route, Switch} from \u0026#39;react-router-dom\u0026#39; const Home = lazy(() =\u0026gt; import(\u0026#39;./routes/Home\u0026#39;)) const About = lazy(() =\u0026gt; import(\u0026#39;./routes/About\u0026#39;)) const App = () =\u0026gt; { \u0026lt;Router\u0026gt; \u0026lt;Suspense fallback={LoadingComponent}\u0026gt; \u0026lt;Switch\u0026gt; \u0026lt;Route exact path=\u0026#34;/\u0026#34; component={Home}/\u0026gt; \u0026lt;Route path=\u0026#34;/about\u0026#34; component={About}/\u0026gt; \u0026lt;Switch\u0026gt; \u0026lt;/Suspense\u0026gt; \u0026lt;Router\u0026gt; }   å›¾ç‰‡æ‡’åŠ è½½ 1. \u0026lt;img src=\u0026quot;product1.jpg\u0026quot;/\u0026gt; 2. \u0026lt;img src=\u0026quot;placeholder.png\u0026quot; data-src=\u0026quot;prodcut1.jpg/\u0026gt; 3. ç›‘å¬windows on scroll findImgs().each img æ¯æœ‰ä¸€ä¸ªimgå°±ç”Ÿæˆä¸€ä¸ªæ–°çš„new imageå¯¹è±¡ new Image() .src = img.data.src å»è¯·æ±‚çœŸæ­£çš„å›¾ç‰‡ .onload img.src = img.dataset.src //è¯·æ±‚å®Œæ¯•åæ›¿æ¢placeholderçš„å›¾ç‰‡ é¢„åŠ è½½ æå‰å‡ºå‘æ‡’åŠ è½½çš„æ—¶é—´ï¼Œä¼˜åŒ–ç”¨æˆ·ä½“éªŒ\ncss ä»£ç ä¼˜åŒ– åˆ é™¤æ— ç”¨ css\nå‡å°‘é‡æ’æ¯”å¦‚ left åŠ¨ç”»æ”¹æˆ transform\nlink å¯ä»¥å¹¶è¡ŒåŠ è½½\n@import åªèƒ½ä¸²è¡ŒåŠ è½½\nå¯ç”¨ GPU ç¡¬ä»¶åŠ é€Ÿï¼šç»™å…ƒç´ åŠ ä¸Š transform: translate3d(0,0,0)\nç¼©å†™ #FFFFFF -\u0026gt; #FFF ; 0.1 -\u0026gt; .1 ; 0px -\u0026gt; 0\nç éœ€æ±‚\n","description":"","id":15,"section":"posts","tags":null,"title":"Webæ€§èƒ½ä¼˜åŒ–å­¦ä¹ ","uri":"https://llane.xyz/posts/web%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%AD%A6%E4%B9%A0/"},{"content":"ä»ç›´è§‚ä¸Šç†è§£æŸ¯é‡ŒåŒ–ï¼Œå°±æ˜¯åŸæœ¬éœ€è¦ä¸€æ¬¡ä¼  n ä¸ªå‚æ•°æ‰å¯ä»¥æ‰§è¡Œä¸€ä¸ªå‡½æ•°ï¼Œ\næŸ¯é‡ŒåŒ–åæˆ‘å¯ä»¥æ¯æ¬¡åªä¼ ä¸€ä¸ªå•ç‹¬çš„å‚æ•°æ¥è¿è¡Œä¸€ä¸ªå‡½æ•°\nä¾‹å­ 1ï¼š\næŠŠç‰¹å®šçš„å‡½æ•°æŸ¯é‡ŒåŒ–\n1 2 3  // æŠŠadd(1, 2, 3) å˜æˆcurriedAdd(1)(2)(3)ï¼Œè¿™å°±æ˜¯å‡½æ•°æŸ¯é‡ŒåŒ–  const curriedAdd = (a) =\u0026gt; (b) =\u0026gt; (c) =\u0026gt; add(a, b, c)   ä¾‹å­ 2:\nåšä¸€ä¸ªæŸ¯é‡ŒåŒ–å…¶ä»–å‡½æ•°çš„å‡½æ•°\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18  addTwo = (a, b) =\u0026gt; a + b addThree = (a, b, c) =\u0026gt; a + b + c addFour = (a, b, c, d) =\u0026gt; a + b + c + d const currify = (fn, params = []) =\u0026gt; { return (arg) =\u0026gt; { const newParams = params.concat(arg) if (newParams.length === fn.length) { return fn(...newParams) } else { return currify(fn, newParams) } } } console.log(currify(addTwo)(1)(2)) //3 console.log(currify(addThree)(1)(2)(3)) //6 console.log(currify(addFour)(1)(2)(3)(4)) //10   ä¾‹å­ 3ï¼š\nåšä¸€ä¸ªæŸ¯é‡ŒåŒ–å…¶ä»–å‡½æ•°çš„å‡½æ•°ï¼ˆå‚æ•°ä¸ªæ•°å¯ä»¥ä¸é™åˆ¶ä¸º 1ï¼‰\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17  addFour = (a, b, c, d) =\u0026gt; a + b + c + d const currify = (fn, params = []) =\u0026gt; { return (...args) =\u0026gt; { const newParams = params.concat(...args) if (newParams.length === fn.length) { return fn(...newParams) } else { return currify(fn, newParams) } } } console.log(currify(addFour)(1, 2, 3, 4)) //10 console.log(currify(addFour)(1, 2, 3)(4)) //10 console.log(currify(addFour)(1, 2)(3, 4)) //10 console.log(currify(addFour)(1)(2, 3)(4)) //10   ","description":"","id":16,"section":"posts","tags":null,"title":"å­¦ä¹ å‡½æ•°æŸ¯é‡ŒåŒ–","uri":"https://llane.xyz/posts/%E5%AD%A6%E4%B9%A0%E5%87%BD%E6%95%B0%E6%9F%AF%E9%87%8C%E5%8C%96/"},{"content":"é€’å½’çš„é—®é¢˜ js ä¸­çš„é€’å½’æ“ä½œä¼šåœ¨æ‰§è¡Œæ ˆä¸­ä¸æ–­å‹å…¥å‡½æ•°æ‰§è¡Œæ ˆï¼Œå†ä¸æ–­å¼¹å‡ºå‡½æ•°æ‰§è¡Œæ ˆ\nåœ¨å®é™…çš„æ‰§è¡Œç¯å¢ƒä¸­ï¼Œæ— è®ºæ˜¯æµè§ˆå™¨è¿˜æ˜¯ Node.js éƒ½æœ‰æœ€å¤§æ ˆæ•°çš„é™åˆ¶ï¼Œä¸€ä¸æ³¨æ„å°±ä¼šçˆ†æ ˆï¼ˆåœ¨ä¹‹å‰çš„ã€Šjs å®ç°æ·±æ‹·è´ã€‹ä¸€æ–‡ä¸­æˆ‘ä»¬å°±é‡åˆ°è¿‡çˆ†æ ˆçš„é—®é¢˜ï¼‰\nå¦å¤–å¦‚æœé€’å½’å¾ˆæ·±ï¼Œä¹Ÿå®¹æ˜“é€ æˆæ‰§è¡Œæ—¶é—´è¿‡é•¿çš„é—®é¢˜\né™ä½å‹æ ˆæ¬¡æ•°çš„åŠæ³•   å°¾é€’å½’ä¼˜åŒ–ï¼ˆä¼ å…¥ä¸Šä¸€æ¬¡è®¡ç®—çš„ç»“æœï¼Œæ‰€ä»¥ä¸éœ€è¦å‡ºæ ˆå»æ•´åˆè®¡ç®—äº†ï¼Œé‚£å°±è‡ªç„¶ä¹Ÿä¸éœ€è¦å‹æ ˆäº†ï¼Œä¸å†éœ€è¦æ ˆï¼‰\nç„¶è€Œ js æ²¡æœ‰å°¾é€’å½’ä¼˜åŒ–ï¼Œå®ƒè¿˜æ˜¯ä¼šåšå‹æ ˆçš„æ“ä½œ\u0026hellip;å•Š\u0026hellip;è¿™\nä½¿ç”¨å¾ªç¯æ¥ä»£æ›¿é€’å½’ï¼ŒæŠŠæ‰€æœ‰çš„ç»“æœè®°å½•åˆ°ä¸€ä¸ªæ•°ç»„ä¹‹ç±»çš„å˜é‡é‡Œï¼Œå¯ä»¥è¾¾åˆ°ç±»ä¼¼å°¾é€’å½’çš„æ“ä½œ\n  è®°å¿†åŒ–\næä¸€ä¸ª HashMap æ¥è®°å½•æ¯ä¸€æ¬¡çš„è®¡ç®—ç»“æœï¼Œå¦‚æœä¹‹åè¦è®¡ç®—çš„å€¼ä¹‹å‰å·²ç»ç®—è¿‡äº†ï¼Œå°±ç›´æ¥å» HashMap é‡Œå–ç»“æœ\nè¿™æ ·å¯ä»¥å‡å°‘é€’å½’ä¸­çš„é‡å¤è®¡ç®—ï¼ˆå‡å°‘äº†å‹æ ˆå‡ºæ ˆæ¬¡æ•°ï¼‰\n  React åˆ©ç”¨è®°å¿†åŒ–ä¼˜åŒ–æ¸²æŸ“ React.memo å°±ä½¿ç”¨äº†è®°å¿†åŒ–çš„åŠæ³•æ¥å‡å°‘è®¡ç®—\nå¦‚æœä¸€ä¸ªç»„ä»¶ï¼ˆåœ¨ react hooks çœ‹æ¥ç»„ä»¶ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ï¼‰å› ä¸ºä¸€äº›å’Œå®ƒæœ¬èº«æ— å…³çš„å˜é‡å¯¼è‡´åˆ·æ–°äº†ï¼ˆé‡å¤è®¡ç®—ï¼‰\nå¯ä»¥ç”¨ memo å»åŒ…è£¹å®ƒ\nè¿™æ ·åŒ…è£¹äº†ä¹‹åï¼Œå¦‚æœè¿™ä¸ªå‡½æ•°ç»„ä»¶è¾“å…¥çš„å‚æ•°æ²¡æœ‰å˜ï¼Œé‚£ä¹ˆæ¯æ¬¡å°±å–ç¼“å­˜çš„ç»“æœï¼Œä¸ç”¨é‡æ–°è®¡ç®—äº†\nå¦‚æœä¸€ä¸ªå‡½æ•°ç»„ä»¶çš„æŸä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•° handleï¼Œè¿™ä¸ªå‡½æ•° handle ä¼šéšç€ app åˆ·æ–°ä¹Ÿæ¯æ¬¡é‡æ–°æ‰§è¡Œé‡æ–°ç”Ÿæˆï¼Œ\nè¿™æ ·å°±ç®—å‡½æ•°ç»„ä»¶å·²ç»è¢« useMemo åŒ…è£¹äº†ï¼Œè¿˜æ˜¯ä¼šé‡æ–°æ¸²æŸ“ï¼ˆè®¡ç®—ï¼‰ï¼Œå› ä¸ºå¯¹ä»–æ¥è¯´å‚æ•°ä¸­çš„å‡½æ•° handle å˜äº†ï¼ˆæ¯æ¬¡ app é‡æ–°æ¸²æŸ“éƒ½ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„å‡½æ•° handleï¼‰\nå¯ä»¥ç”¨ useCallBack å»æ¸²æŸ“è¿™ä¸ª å‡½æ•° handle\nçŒœæµ‹åœ¨ react å†…éƒ¨æœ‰ä¸€ä¸ªç”¨äºè®°å¿†åŒ–çš„ HashMapï¼Œåªè¦ä¸€ä¸ªå‡½æ•°çš„è¾“å…¥å‚æ•°ä¸å˜ï¼Œå°±ä¼šå» HashMap é‡Œå–è¿™äº›å‚æ•°å¯¹åº”çš„å·²ç»ç”Ÿæˆè¿‡çš„å‡½æ•°\n","description":"","id":17,"section":"posts","tags":null,"title":"ä¼˜åŒ–é€’å½’æ–¹æ³•çš„æ€è€ƒ","uri":"https://llane.xyz/posts/%E4%BC%98%E5%8C%96%E9%80%92%E5%BD%92%E6%96%B9%E6%B3%95%E7%9A%84%E6%80%9D%E8%80%83/"},{"content":"javascript æ˜¯ä¸€é—¨å•çº¿ç¨‹è¯­è¨€ï¼Œä½†æ˜¯å…¶ä¸­æ¶‰åŠåˆ°äº†éœ€è¦å¾ˆå¤šå¼‚æ­¥çš„åœºæ™¯\næ¯”å¦‚æ‰€æœ‰çš„è¯·æ±‚æ˜¯å¼‚æ­¥çš„ï¼Œè¯»å–èµ„æºæ˜¯å¼‚æ­¥çš„ï¼Œè®¡æ—¶å™¨ä¹Ÿæ˜¯å¼‚æ­¥çš„\né‚£ä¹ˆè¿™ç©¶ç«Ÿæ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ\nnodejs çš„å¼•æ“æ˜¯ç”± C++å®ç°çš„ï¼Œä¸ºäº†æ”¯æŒ js è¿è¡Œæ—¶çš„å¼‚æ­¥ï¼Œnodejs å¼•æ“æä¾›äº† Eventloop çš„äº‹ä»¶å¾ªç¯æœºåˆ¶\nEventloop æ˜¯æŒ‡äº‹ä»¶æ‰§è¡Œçš„é˜¶æ®µå¾ªç¯ï¼ŒEventloop åœ¨ nodejs å’Œæµè§ˆå™¨é‡Œæ˜¯ä¸åŒ\nEventloop çš„é˜¶æ®µï¼ˆç®€åŒ–ï¼‰ å®˜æ–¹æ–‡æ¡£ï¼ˆåŸæ–‡çš„ç¿»è¯‘å¯ä»¥çœ‹è¿™é‡Œï¼‰æœ‰ 6 ä¸ªé˜¶æ®µï¼Œ\nç°åœ¨ç®€åŒ–ä¸º 3 ä¸ªé˜¶æ®µæ¥çœ‹ï¼Œé˜¶æ®µçš„æ‰§è¡Œé¡ºåºæ˜¯ 1ã€2ã€3ã€1ã€2ã€3\u0026hellip;\n timersï¼šæ‰§è¡Œ setTimeout å’Œ setInterval çš„å›è°ƒå‡½æ•° pollï¼šç­‰å¾… time åˆ°è¾¾æŸä¸ªç‚¹åè§¦å‘ timers ä¸­çš„å›è°ƒå‡½æ•° checkï¼šæ‰§è¡Œ setImmediate() çš„å›è°ƒå‡½æ•°  setTimeout(fn,0)å’Œ setImmediate è°å…ˆæ‰§è¡Œï¼Ÿ è¿™é‡Œå…ˆè¯´ä¸€ä¸‹ nodejs ä¸­å¼€å¯ Eventloop æ—¶å‘ç”Ÿçš„äº‹ï¼š\n å¼€å¯äº‹ä»¶å¾ªç¯ å¼€å¯ nodejs çš„ Eventloop è¿›ç¨‹ åŒæ—¶å¼‚æ­¥å¾—å¼€å§‹å¼€å§‹æ‰§è¡Œ jsï¼Œå¼€å¯ v8 å¼•æ“è¿›ç¨‹  1 å’Œ 2 å› ä¸ºæ˜¯å¼‚æ­¥å‘ç”Ÿçš„ï¼Œæ‰€ä»¥ä¸çŸ¥é“è°ä¼šå…ˆç»“æŸï¼Œä»–ä»¬çš„é¡ºåºå¯èƒ½æ˜¯ 1 å¼€å¯å®Œæ¯•ç„¶å 2 å¼€å¯å®Œæ¯•æŸï¼Œä¹Ÿå¯èƒ½æ˜¯ 2 å…ˆå¼€å¯å®Œæ¯•å† 1 å¼€å¯å®Œæ¯•\nç†æƒ³æƒ…å†µä¸‹ ç¯å¢ƒ 1.Eventloop å…ˆå¼€å¯å®Œæ¯•\næ¥ç€ç¯å¢ƒ 2.v8 å¼•æ“å†å¼€å¯å®Œæ¯•ï¼Œç„¶åå¼€å§‹åˆ†æå’Œæ‰§è¡Œ js ä»£ç ï¼ˆæ­¤æ—¶ Eventloop å·²ç»è¿è¡Œåˆ°é˜¶æ®µ 2.poll äº†ï¼‰\nåœ¨åˆ†æä»£ç æ—¶ï¼š\nsetTimeout å’Œ setInterval ä¼šæ”¾åˆ°é˜¶æ®µ 1.timers çš„æ‰§è¡Œé˜Ÿåˆ—é‡Œ\nsetImmediate ä¼šæ”¾åˆ° é˜¶æ®µ 3.check çš„æ‰§è¡Œé˜Ÿåˆ—é‡Œ\nEventlop å·²ç»è¿è¡Œåˆ° é˜¶æ®µ 2.poll ä¸­å¼€å§‹ç­‰å¾…\nå¦‚æœåœ¨é˜¶æ®µ 2.poll ä¸­å‘ç° é˜¶æ®µ 3.check ä¸­çš„æ‰§è¡Œé˜Ÿåˆ—é‡Œæœ‰å›è°ƒå‡½æ•°ï¼Œå°±é©¬ä¸Šå» é˜¶æ®µ 3.check é‡Œæ‰§è¡Œ setImmediate çš„å›è°ƒå‡½æ•°\nå¦‚æœåœ¨é˜¶æ®µ 2.poll ä¸­å‘ç° é˜¶æ®µ 3.check ä¸­çš„æ‰§è¡Œé˜Ÿåˆ—é‡Œæ²¡æœ‰å›è°ƒå‡½æ•°ï¼Œç­‰åˆ°é˜¶æ®µ 1 ä¸­çš„æ—¶é—´åˆ°äº†ä¹‹åä»é˜¶æ®µ 2 åˆ° é˜¶æ®µ 3 å†åˆ° é˜¶æ®µ 1ï¼Œæ‰§è¡Œ é˜¶æ®µ 1.timers é˜Ÿåˆ—ä¸­æ—¶é—´åˆ°äº†çš„å›è°ƒå‡½æ•°\nä¹‹åä¾æ¬¡å¾€å¤\næ‰€ä»¥æ­¤æ—¶ setImmediate ä¸€å®šä¼šåœ¨ setTimeout å’Œ setInterval å‰æ‰§è¡Œï¼Œå³ä¾¿ setTimeout å’Œ setInterval çš„ç­‰å¾…æ—¶é—´æ˜¯ 0\n psï¼šprocess.nextTick() ä¸å±äº Eventloop çš„ä¸€éƒ¨åˆ†ï¼Œæ„æ€æ˜¯åœ¨å“ªä¸ªé˜¶æ®µæ‰§è¡Œ nextTickï¼Œå°±åœ¨è¿™ä¸ªé˜¶æ®µç»“æŸåé©¬ä¸Šæ‰§è¡Œ\n ä½†æ˜¯å®é™…æƒ…å†µä¹Ÿå¯èƒ½æ˜¯ ç¯å¢ƒ 1.Eventloop è¿˜æ²¡å¼€å¯å®Œæ¯•\nç¯å¢ƒ 2.v8 å¼•æ“ç¡®å·²ç»å¼€å¯å®Œæ¯•äº†\næ‰§è¡Œ js æ—¶ï¼Œå…ˆæŠŠ setTimeout å’Œ setInterval æ”¾åˆ°é˜¶æ®µ 1.timers çš„é˜Ÿåˆ—é‡Œ\nç„¶å Eventloop å¼€å§‹é˜¶æ®µ 1ï¼Œå°±å…ˆå»é˜¶æ®µ 1 çš„æ‰§è¡Œé˜Ÿåˆ—é‡Œçœ‹æœ‰æ²¡æœ‰æ—¶é—´å·²ç»åˆ°çš„ setTimeout å’Œ setIntervalï¼Œæ­¤æ—¶å¦‚æœ setTimeout å’Œ setInterval è®¾ç½®çš„æ—¶é—´æ˜¯ 0ï¼Œå°±ä¼šç›´æ¥æ‰§è¡Œï¼Œæ¯” setImmediate è¿˜æ—©ï¼ˆå› ä¸ºè¿˜æ²¡åˆ°é˜¶æ®µ 3ï¼‰\næ‰€ä»¥ç»“è®ºæ˜¯ setTimeout(fn,0)å’Œ setImmediate è°å…ˆæ‰§è¡Œæ˜¯ä¸ç¡®å®šçš„\nå¾®ä»»åŠ¡å’Œå®ä»»åŠ¡ åœ¨ Node.js ç¯å¢ƒï¼š\nsetTimeout å±äºå®ä»»åŠ¡ï¼Œåœ¨ js åˆ†ææ—¶ä¼šé©¬ä¸Šæ”¾åˆ° timer é˜¶æ®µçš„é˜Ÿåˆ—\nsetImmediate å±äºå®ä»»åŠ¡ï¼Œåœ¨ js åˆ†ææ—¶ä¼šé©¬ä¸Šæ”¾åˆ° check é˜¶æ®µçš„é˜Ÿåˆ—\nnextTick å±äºå®ä»»åŠ¡ï¼Œä¼šé©¬ä¸Šæ”¾åˆ°å½“å‰é˜¶æ®µæ‰§è¡Œç»“æŸå\npromise.then(fn) (ä¸€èˆ¬æ¥è¯´ Promise æ˜¯ç”± nextTick å®ç°çš„) then åçš„ fn æ˜¯åœ¨ resolve çš„æ—¶å€™å†æ”¾åˆ°å½“å‰é˜Ÿåˆ—åæ‰§è¡Œï¼Œå±äºå¾®ä»»åŠ¡\nawait è½¬åŒ–ä¸º promise.then å†åˆ†æï¼Œä¹Ÿå±äºå¾®ä»»åŠ¡\nåœ¨æµè§ˆå™¨ç¯å¢ƒï¼š\nsetTimeout ä¸€ä¼šå„¿åšï¼Œå±äºå®ä»»åŠ¡\npromise.then(fn) fn åœ¨ resolve æ—¶æ”¾åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œå±äºå¾®ä»»åŠ¡\nawait + fn æ˜¯ promise çš„è¯­æ³•ç³–ï¼Œå¯ä»¥è½¬æ¢ä¸º fn.then()ï¼Œè€Œä¸” await ä¹‹åçš„ä»£ç ä¹Ÿä¼šåŒ…æ‹¬åœ¨ then é‡Œäº†, å±äºå¾®ä»»åŠ¡\nï¼ˆå¦‚æœ fn æ˜¯ä¸€ä¸ª Promise å°±æ˜¯ fn().then(await ä¹‹åçš„ä»£ç )ï¼Œå¦‚æœ fn ä¸æ˜¯ Promise å°±æŠŠä»–å˜ä¸º Promise.resolve(fn()).then(await ä¹‹åçš„ä»£ç )ï¼‰\n ï¼ˆsetImmediate åªæœ‰ IE æµè§ˆå™¨ä¸­æœ‰ï¼Œå…¶ä»–æµè§ˆå™¨æ²¡æœ‰å®ç°ï¼Œ nextTick åœ¨æµè§ˆå™¨ä¸­ä¹Ÿæ²¡æœ‰å®ç°ï¼Œä½†å…¶å®æœ‰ MutationObserverã€Object.observeï¼ˆå·²å¼ƒç”¨ï¼‰ æ¥ä»£æ›¿å¾®ä»»åŠ¡æ•ˆæœï¼‰\n ","description":"","id":18,"section":"posts","tags":null,"title":"Eventloopçš„ç†è§£","uri":"https://llane.xyz/posts/eventloop%E7%9A%84%E7%90%86%E8%A7%A3/"},{"content":"es6 ä¸­çš„ Promise å¯ä»¥ç®€åŒ– callback hellâ€œå›è°ƒåœ°ç‹±ï¼Œå›è°ƒå¥—å›è°ƒâ€é€ æˆçš„ä»£ç ç»“æ„ä¸Šçš„å¤šçº§ç¼©è¿›\nè®©ä»£ç çœ‹èµ·æ¥åƒåŒæ­¥çš„ï¼Œæ¶ˆé™¤å¤šçº§ç¼©è¿›ï¼Œä»ç»“æ„ä¸Šç®€åŒ–ä»£ç ï¼ˆä¹‹åæœ‰ await è¯­æ³•è®©ä»£ç çœ‹èµ·æ¥æ›´â€œåŒæ­¥â€ï¼‰\næ¶ˆç­ if error ä»£ç \næ¶ˆé™¤å›è°ƒåœ°ç‹±ä¹Ÿå¯ä»¥ç”¨å‘½åæ°å½“çš„å¤šä¸ªå­å‡½æ•°åŒ–è§£\nå…ˆæ¥çœ‹ä¸€ä¸‹ Promise çš„ API\nPromise æ˜¯ä¸€ä¸ªç±»\nç±»å‚æ•°ï¼šå°±ä¸€ä¸ªå‡½æ•°\nç±»æ–¹æ³•ï¼šall/allSettled/race/reject/resolve\nå¯¹è±¡å±æ€§ï¼šthenï¼ˆé‡è¦ï¼‰/finally/catch\nå¯¹è±¡å†…éƒ¨å±æ€§ï¼šstate=pendingï¼ˆæ‚¬è€Œæœªå†³ï¼‰/fulfilledï¼ˆæˆåŠŸï¼‰/rejectedï¼ˆå¤±è´¥ï¼‰\nè¿™æ¬¡çš„å®ç°éœ€è¦æ»¡è¶³ Promise/A+çš„æ ‡å‡†\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133  class Promise2 { state = \u0026#39;pending\u0026#39; callbacks = [] resolve(result) { nextTick(() =\u0026gt; { if (this.state !== \u0026#39;pending\u0026#39;) return this.state = \u0026#39;fulfilled\u0026#39; for (let handle of this.callbacks) { if (typeof handle[0] === \u0026#39;function\u0026#39;) { let x try { x = handle[0].call(undefined, result) } catch (error) { return handle[2].reject(error) } handle[2].resolveWith(x) } } }) } reject(reason) { nextTick(() =\u0026gt; { if (this.state !== \u0026#39;pending\u0026#39;) return this.state = \u0026#39;rejected\u0026#39; for (let handle of this.callbacks) { if (typeof handle[1] === \u0026#39;function\u0026#39;) { let x try { x = handle[1].call(undefined, reason) } catch (error) { return handle[2].resolveWith(x) } handle[2].resolveWith(x) } } }) } constructor(fn) { if (typeof fn !== \u0026#39;function\u0026#39;) { throw new Error(\u0026#39;Promiseçš„å‚æ•°éœ€è¦æ˜¯ä¸€ä¸ªå‡½æ•°\u0026#39;) } fn(this.resolve.bind(this), this.reject.bind(this)) } then(succeed?, fail?) { let handle = [] if (typeof succeed === \u0026#39;function\u0026#39;) { handle[0] = succeed } if (typeof fail === \u0026#39;function\u0026#39;) { handle[1] = fail } handle[2] = new Promise2(() =\u0026gt; {}) this.callbacks.push(handle) return handle[2] } resolveWithSelf() { this.reject(new TypeError(\u0026#39;x should not be this\u0026#39;)) } resolveWithPromise(x) { x.then( (result) =\u0026gt; { this.resolve(result) }, (reason) =\u0026gt; { this.reject(reason) } ) } getThen(x) { let then try { then = x.then } catch (error) { this.reject(error) } return then } resolveWithThenable(x) { try { x.then( (y) =\u0026gt; { this.resolveWith(y) }, (r) =\u0026gt; { this.reject(r) } ) } catch (error) { this.reject(error) } } resolveWithObject(x) { let then = this.getThen(x) if (then instanceof Function) { this.resolveWithThenable(x) } else { this.resolve(x) } } resolveWith(x) { if (this === x) { this.resolveWithSelf() } else if (x instanceof Promise2) { this.resolveWithPromise(x) } else if (x instanceof Object) { this.resolveWithObject(x) } else { this.resolve(x) } } } export default Promise2 function nextTick(fn) { if (process !== undefined \u0026amp;\u0026amp; typeof process.nextTick === \u0026#39;function\u0026#39;) { return process.nextTick(fn) } else { var counter = 1 var observer = new MutationObserver(fn) var textNode = document.createTextNode(String(counter)) observer.observe(textNode, { characterData: true, }) counter = counter + 1 textNode.data = String(counter) } }   ","description":"","id":19,"section":"posts","tags":null,"title":"Jså®ç°Promise","uri":"https://llane.xyz/posts/js%E5%AE%9E%E7%8E%B0promise/"},{"content":"API: æ•°ç»„+åˆå§‹ pidï¼ˆä¸€èˆ¬ä¸º 0ï¼‰\nå®ç°æ€è·¯ï¼šç”¨é€’å½’æˆ–è€…è½®è¯¢æ•°ç»„ä¸€æ­¥æ­¥åˆ›å»ºä¸€ä¸ªæ–°çš„æ•°ç»„å¯¹è±¡\nè¦æ±‚æ‹å¹³çš„åŸæ•°æ®å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7  let arr = [ { id: 1, name: \u0026#39;éƒ¨é—¨1\u0026#39;, pid: 0 }, { id: 2, name: \u0026#39;éƒ¨é—¨2\u0026#39;, pid: 1 }, { id: 3, name: \u0026#39;éƒ¨é—¨3\u0026#39;, pid: 1 }, { id: 4, name: \u0026#39;éƒ¨é—¨4\u0026#39;, pid: 3 }, { id: 5, name: \u0026#39;éƒ¨é—¨5\u0026#39;, pid: 4 }, ]   æœŸæœ›å¾—åˆ°çš„æ•°æ®æ ¼å¼ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23  ;[ { id: 1, name: \u0026#39;éƒ¨é—¨1\u0026#39;, pid: 0, children: [ { id: 2, name: \u0026#39;éƒ¨é—¨2\u0026#39;, pid: 1, children: [], }, { id: 3, name: \u0026#39;éƒ¨é—¨3\u0026#39;, pid: 1, children: [ // ç»“æœ ,,,  ], }, ], }, ]   ç‰ˆæœ¬ 1 åæ‰‹å°±æ˜¯ä¸€ä¸ªé€’å½’ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17  function getChild(data, result, pid) { for (let item of data) { if (item.pid === pid) { const newItem = { ...item, child: [] } result.push(newItem) getChild(data, result, item.id) } } } function arrayToTree(data, pid) { const result = [] getChild(data, result, pid) return result } arrayToTree(arr, 0)   ç‰ˆæœ¬ 1.2 æœ€ç®€é€’å½’ 1 2 3 4 5 6 7 8 9 10 11 12  function arrayToTree(data = [], pid = 0) { let tempData = [] if (data \u0026amp;\u0026amp; data.length) { for (let item of data) { if (item.pid === pid) { item.child = arrayToTree(data, item.id) tempData.push(item) } } } return tempData }   ç‰ˆæœ¬ 2 è€å­ä¼š Map 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27  function arrayToTree(arr) { const result = [] const itemMap = {} // arræ•°æ®ä¸“ä¸ºkeyä¸ºitem.idçš„map  for (const item of arr) { itemMap[item.id] = { ...item, child: [] } } for (const item of arr) { const id = item.id const pid = item.pid const treeItem = itemMap[id] if (pid === 0) { result.push(treeItem) } else { if (!itemMap[pid]) { itemMap[pid] = { child: [], } } itemMap[pid].child.push(treeItem) } } return result }   ç‰ˆæœ¬ 3 map ç»ˆæå­¦ä»¥è‡´ç”¨ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33  function arrayToTree(items) { const result = [] const itemMap = {} for (const item of items) { const id = item.id const pid = item.pid if (!itemMap[id]) { itemMap[id] = { children: [], } } itemMap[id] = { ...item, child: itemMap[id][\u0026#39;children\u0026#39;], } const treeItem = itemMap[id] if (pid === 0) { result.push(treeItem) } else { if (!itemMap[pid]) { itemMap[pid] = { children: [], } } itemMap[pid].children.push(treeItem) } } return result }   ","description":"","id":20,"section":"posts","tags":["jsåŸºç¡€","å­¦ä¹ ç¬”è®°"],"title":"Jså®ç°æ•°ç»„æ‹å¹³","uri":"https://llane.xyz/posts/js%E5%AE%9E%E7%8E%B0%E6%95%B0%E7%BB%84%E6%8B%8D%E5%B9%B3/"},{"content":"æ·±æ‹·è´ä½¿ç”¨åœºæ™¯ï¼š\n é»˜è®¤é€‰é¡¹ éƒ¨åˆ†ä¿®æ”¹  API: æ¥æ”¶ä¸€ä¸ªå¯¹è±¡æˆ–è€…åŸºæœ¬ç±»å‹ï¼Œå¯¹è±¡çš„ç±»å‹åŒ…æ‹¬ Arrayã€functionã€æ™®é€š Objectã€RegExp æ­£åˆ™è¡¨è¾¾å¼ã€Date\nè¿”å›ä¸€ä¸ªå’Œæ¥æ”¶å¯¹è±¡ä¸€æ ·çš„æ•°æ®ï¼Œä½†æ˜¯ä¸¤è€…ä¹‹é—´æ²¡æœ‰ä»»ä½•èŠ‚ç‚¹æœ‰è”ç³»ï¼Œä¿®æ”¹ A ä¸ä¼šå½±å“ B\nç‰ˆæœ¬ 0.1 æœ€ç®€å•ç‰ˆæœ¬ï¼ˆç›´æ¥ä¸€æŠŠæ¢­ï¼‰ ç›´æ¥ä½¿ç”¨ JSON åºåˆ—åŒ–\n1 2 3 4  let a = { a: 1, b: 2, c: 3 } let b = JSON.parse(JSON.stringify(a)) console.log(a) console.log(b)   ç¼ºç‚¹ï¼š\n1.ä¸æ”¯æŒå‡½æ•°ï¼Œæ¯”å¦‚å¯¹è±¡é‡Œæœ‰æœ‰ä¸€ä¸ª keyï¼Œvalue çš„ value æ˜¯ä¸€ä¸ªå‡½æ•°\n2.ä¸æ”¯æŒ undefined\n3.JSON åªæ”¯æŒæ ‘çŠ¶çš„ç»“æ„ä¸æ”¯æŒç¯çŠ¶çš„ç»“æ„ï¼Œå¦‚æœåŸå¯¹è±¡æœ‰ä¸€ä¸ªå¯¹è‡ªå·±çš„å¼•ç”¨ï¼ŒJSON çš„åºåˆ—åŒ–ä¼šæŠ¥é”™\n4.ä¸æ”¯æŒ Dateã€æ­£åˆ™è¡¨è¾¾å¼ã€Symbolã€Setã€Mapï¼ˆç»¼ä¸Šå°±æ˜¯æ‰€æœ‰ JSON ä¸æ”¯æŒçš„æ•°æ®ç±»å‹éƒ½ä¸æ”¯æŒï¼‰\nå…¶ä»–çš„æµ…æ‹·è´åŠæ³•ï¼š\n1.Object.assign({}, a)\n2.{\u0026hellip;a}\nç‰ˆæœ¬ 1 æˆ‘èƒ½æ‹·è´æœ‰ä¸åŒå¯¹è±¡çš„æ•°æ®äº† å¯ä»¥çœ‹åˆ° JSON åºåˆ—åŒ–çš„æ·±æ‹·è´æ–¹å¼å·²ç»ä¸æ»¡è¶³äº†ï¼Œ\né‚£ä¹ˆç°åœ¨æˆ‘ä»¬å¾—æ‰‹åŠ¨å®ç°ä¸€ä¸ªæ·±æ‹·è´äº†ï¼Œæˆ‘ä»¬ç”¨é€’å½’çš„å½¢å¼æ¥å®ç°\nåœ¨é€’å½’çš„æ—¶å€™ä¸€å®šä¼šé‡åˆ°ä¸åŒçš„æ•°æ®ç±»å‹ï¼Œè¦æŒ‰ç…§ä¸ç”¨çš„æ•°æ®ç±»å‹æ¥åˆ†ç±»è®¨è®º\njs ä¸€å…±æœ‰ 8 ç§æ•°æ®ç±»å‹ï¼Œ\nå¦‚æœæ˜¯ 7 ç§åŸºæœ¬ç±»å‹ä¹‹ä¸€å°±ç›´æ¥ return\nundefined\nnull\nboolean\nnumber\nstring\nsymbol\nbigint\nå¦‚æœæ˜¯ object å°±å†åˆ†ç±»è®¨è®ºï¼Œä¸åŒçš„ç±»å‹ç”¨ä¸åŒçš„æ„é€ æ–¹æ³•å»æ„é€ ä¸€ä¸ªæ–°çš„å¯¹è±¡\n Array å°±éå†å¤åˆ¶å±æ€§åˆ°ä¸€ä¸ªæ–°çš„æ•°ç»„ new Array function å°±åœ¨ä¸€ä¸ªæ–°çš„ function å†… source.apply(this, arguments) //source æ˜¯è¦æ‹·è´çš„å¯¹è±¡\nå†éå† source çš„å±æ€§åˆ°è¿™ä¸ªæ–°çš„ function Object ä¹Ÿ éå†å¤åˆ¶ key value åˆ°ä¸€ä¸ªæ–°å¯¹è±¡ new Object RegExp æ­£åˆ™è¡¨è¾¾å¼ æ•°æ®ç±»å‹ Date æ•°æ®ç±»å‹  å…¶ä¸­æ‰€æœ‰çš„å¤åˆ¶éƒ½ç”¨ deepClone è¿™ä¸ªå‡½æ•°è‡ªå·±é€’å½’\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24  function deepClone(source) { if (source instanceof Object) { let dist if (source instanceof Array) { dist = new Array() } else if (source instanceof Function) { dist = function () { return source.apply(this, arguments) } } else if (source instanceof RegExp) { dist = new RegExp(source.source, source.flags) } else if (source instanceof Date) { dist = new Date(source) } else { dist = new Object() } for (let key in source) { dist[key] = deepClone(source[key]) } return dist } return source }   ç‰ˆæœ¬ 2 æˆ‘èƒ½æ‹·è´å…·æœ‰ç¯ç»“æ„çš„æ•°æ®äº† åˆ°ç›®å‰ä¸ºæ­¢ä¸€åˆ‡é¡ºåˆ©ï¼Œä¹Ÿæ²¡æœ‰ä»€ä¹ˆå¤§é—®é¢˜\nå› ä¸ºè¦æ‹·è´çš„å¯¹è±¡çš„æ•°æ®æ˜¯æœ‰é™çš„ deepClone çš„é€’å½’ä¼šè‡ªåŠ¨ç»“æŸï¼Œä¸ç”¨ç‰¹åœ°ç»™ä¸€ä¸ªå‡ºå£\nä½†æ˜¯è€ƒè™‘åˆ°ä¸€ç§æƒ…å†µï¼Œåœ¨è®¨è®º JSON åºåˆ—åŒ–æ·±æ‹·è´çš„æ—¶å€™ç¬¬ä¸‰ç§æƒ…å†µæ˜¯æ‹·è´ç¯ç»“æ„ï¼Œ\nå³ä¸€ä¸ªå¯¹è±¡çš„æŸä¸ªå±æ€§å¼•ç”¨äº†è‡ªèº«ï¼Œæ¯”å¦‚ï¼šwindow.self === window\næˆ‘ä»¬ç›®å‰æ„å»ºçš„ deepClone æ–¹æ³•ï¼Œåœ¨é‡åˆ°æœ‰ç¯ç»“æ„çš„å¯¹è±¡æ—¶ä¼šä¸æ–­é€’å½’æ°¸è¿œæ²¡æœ‰å‡ºå£ç»“æŸ\næ•°ç»„ä¹Ÿå¯èƒ½å­˜åœ¨ç¯ç»“æ„:\n1  a[0] = a   å‡½æ•°ä¹Ÿå¯èƒ½å­˜åœ¨ç¯ç»“æ„:\n1 2 3 4  function x() { return x() } x()   è§£å†³åŠæ³•æ˜¯ä½¿ç”¨ç¼“å­˜æ¥æ ‡è®°å·²ç»å¤åˆ¶è¿‡çš„å¯¹è±¡\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46  let cache = [] function deepClone(source) { if (source instanceof Object) { let cacheDist = findCache(source) // æœ‰ç¼“å­˜  if (cacheDist) { return cacheDist } else { //æ— ç¼“å­˜  let dist if (source instanceof Array) { dist = new Array() } else if (source instanceof Function) { dist = function () { return source.apply(this, arguments) } } else if (source instanceof RegExp) { dist = new RegExp(source.source, source.flags) } else if (source instanceof Date) { dist = new Date(source) } else { dist = new Object() } // åŠ å…¥ç¼“å­˜  cache.push([source, dist]) for (let key in source) { dist[key] = deepClone(source[key]) } return dist } } // å¦‚æœæ˜¯åŸºæœ¬ç±»å‹å°±ç›´æ¥return  return source } // æŸ¥çœ‹å½“å‰çš„å¯¹è±¡æ˜¯å¦å·²ç»åœ¨ç¼“å­˜ä¸­ function findCache(source) { for (let i = 0; i \u0026lt; cache.length; i++) { if (cache[i][0] === source) { return cache[i][1] } } return undefined }   ç‰ˆæœ¬ 3 æˆ‘éœ€è¦è·³è¿‡åŸå‹å†æ‹·è´ ç°åœ¨å…·æœ‰ç¯ç»“æ„çš„å¯¹è±¡ç°åœ¨ä¹Ÿå¯ä»¥å¤åˆ¶äº†ã€‚\næ­¤å¤–è¿˜æœ‰ä¸€ä¸ªå‘ï¼Œæˆ‘ä»¬çŸ¥é“æ¯ä¸€ä¸ªå¯¹è±¡éƒ½æœ‰è‡ªå·±çš„åŸå‹ï¼Œ__proto__å±æ€§\nç›®å‰è¿˜æ²¡è€ƒè™‘æ˜¯å¦è¦æ‹·è´å¯¹è±¡çš„åŸå‹ï¼ˆè¿™é‡ŒåŸå‹å¾ˆå¯èƒ½è¿˜æœ‰åŸå‹æ˜¯å¾ˆæ·±çš„ä¸€ä¸ªå¯¹è±¡å±æ€§ï¼‰\nä¸€èˆ¬æ¥è¯´æˆ‘ä»¬ä¸éœ€è¦æ‹·è´ proto è¿™ä¸ªå±æ€§ï¼Œå› ä¸ºåŸå‹é‡Œçš„æ‰€æœ‰æ–¹æ³•å’Œå¯¹è±¡éƒ½æœ‰å„è‡ªçš„åŸå‹ï¼Œå¦‚æœæˆ‘ä»¬è¦å†³å®šæ‹·è´åŸå‹\nå°±æ„å‘³ç€è¦æŠŠ js ä¸­çš„å¾ˆå¤šåŸºæœ¬åŸå‹éƒ½æ‹·è´ä¸€éï¼Œæ‰€ä»¥è¿™é‡Œä¸€èˆ¬ä¸éœ€è¦æ‹·è´å¯¹è±¡çš„åŸå‹ï¼Œæ‰€ä»¥éœ€è¦ç»•å¼€å®ƒ\n1 2 3 4 5 6  for (let key in source) { // åªå¤åˆ¶å¯¹è±¡è‡ªå·±çš„å±æ€§ï¼Œè·³è¿‡åŸå‹çš„å±æ€§  if (source.hasOwnProperty(key)) { dist[key] = deepClone(source[key]) } }   æˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹ä»£ç ï¼Œä¸‹é¢æ˜¯å®Œæ•´ä»£ç \n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49  let cache = [] function deepClone(source) { if (source instanceof Object) { let cacheDist = findCache(source) // æœ‰ç¼“å­˜  if (cacheDist) { return cacheDist } else { //æ— ç¼“å­˜  let dist if (source instanceof Array) { dist = new Array() } else if (source instanceof Function) { dist = function () { return source.apply(this, arguments) } } else if (source instanceof RegExp) { dist = new RegExp(source.source, source.flags) } else if (source instanceof Date) { dist = new Date(source) } else { dist = new Object() } // åŠ å…¥ç¼“å­˜  cache.push([source, dist]) for (let key in source) { // åªå¤åˆ¶å¯¹è±¡è‡ªå·±çš„å±æ€§ï¼Œè·³è¿‡åŸå‹çš„å±æ€§  if (source.hasOwnProperty(key)) { dist[key] = deepClone(source[key]) } } return dist } } // å¦‚æœæ˜¯åŸºæœ¬ç±»å‹å°±ç›´æ¥return  return source } // æŸ¥çœ‹å½“å‰çš„å¯¹è±¡æ˜¯å¦å·²ç»åœ¨ç¼“å­˜ä¸­ function findCache(source) { for (let i = 0; i \u0026lt; cache.length; i++) { if (cache[i][0] === source) { return cache[i][1] } } return undefined }   ç‰ˆæœ¬ 4 å¼ºåŒ–æ‹·è´å‡½æ•°ï¼Œæœ€åçš„åŠ›é‡ï¼ ä½ æˆ–è®¸æœ‰æ³¨æ„åˆ°ï¼Œç›®å‰åœ¨å‡½æ•°å¤–é¢æœ‰ä¸€ä¸ª cache ç”¨äºå­˜æ”¾æ·±æ‹·è´æ—¶çš„ç¼“å­˜ï¼Œæˆ‘ä»¬åœ¨è°ƒç”¨å®Œåè¿˜å¾—æ¸…ç©ºå®ƒè¿™æ ·å¾ˆéº»çƒ¦\næˆ‘ä»¬å°è¯•å†™æˆä¸€ä¸ª classï¼Œæ¥åŒ…å« cache å˜é‡å’Œå¸®åŠ©å‡½æ•° findCache\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62  class DeepClone { cache constructor() { this.cache = [] } clone(source) { if (source instanceof Object) { let cacheDist = this.findCache(source) // æœ‰ç¼“å­˜  if (cacheDist) { return cacheDist } else { //æ— ç¼“å­˜  let dist if (source instanceof Array) { dist = new Array() } else if (source instanceof Function) { dist = function () { return source.apply(this, arguments) } } else if (source instanceof RegExp) { dist = new RegExp(source.source, source.flags) } else if (source instanceof Date) { dist = new Date(source) } else { dist = new Object() } // åŠ å…¥ç¼“å­˜  this.cache.push([source, dist]) for (let key in source) { // åªå¤åˆ¶å¯¹è±¡è‡ªå·±çš„å±æ€§ï¼Œè·³è¿‡åŸå‹çš„å±æ€§  if (source.hasOwnProperty(key)) { dist[key] = this.clone(source[key]) } } return dist } } // å¦‚æœæ˜¯åŸºæœ¬ç±»å‹å°±ç›´æ¥return  return source } // æŸ¥çœ‹å½“å‰çš„å¯¹è±¡æ˜¯å¦å·²ç»åœ¨ç¼“å­˜ä¸­  findCache(source) { for (let i = 0; i \u0026lt; this.cache.length; i++) { if (this.cache[i][0] === source) { return this.cache[i][1] } } return undefined } } const a = { self: a child: [ a: undefined, b: new Date() c: new RegExp(\u0026#34;hi\\\\d+\u0026#34;, \u0026#34;gi\u0026#34;) ] } const b = new DeepClone().clone(a)   ä»€ä¹ˆï¼Ÿæœ€åçš„é­”ç‹ æœ‰ä¸€ç§æƒ…å†µæ— è®ºæ˜¯åœ¨æµè§ˆå™¨è¿˜æ˜¯åœ¨ nodejs ç¯å¢ƒä¸­éƒ½ä¼šå­˜åœ¨\nå½“å¯¹è±¡æœ‰å­å±æ€§ï¼Œå­å±æ€§è¿˜æœ‰å­å±æ€§ã€‚ã€‚ã€‚å¯¹è±¡çš„ç»“æ„éå¸¸æ·±çš„æ—¶å€™ä¼šå¯¼è‡´é€’å½’è°ƒç”¨å¾ˆå¤šæ¬¡ï¼Œä¼šå‡ºç°å‡½æ•°æ‰§è¡Œæ ˆè¶…å‡ºæœ€å¤§å€¼çš„æƒ…å†µ\nï¼ˆçˆ†æ ˆï¼šRangeError: Maximum call stack size exceededï¼‰\nè¿™é‡Œè®¾æƒ³çš„åŠæ³•æ˜¯æŠŠå¯¹è±¡çš„çºµå‘çš„ç»“æ„æ¢æˆæ¨ªå‘çš„ç»“æ„ï¼ˆæ”¾åœ¨ç±»ä¼¼æ•°ç»„çš„ç»“æ„é‡Œï¼‰è¿™æ ·ç”¨ for å¾ªç¯æ¥é¿å…é€’å½’è¿‡äºæ·±çš„æƒ…å†µ\næš‚æ—¶ä¸çŸ¥é“æ€ä¹ˆè§£\næˆ‘é€‰æ‹©çœŸé¦™ è‡ªå·±å†™çš„ deepClone æ€»ä¼šæœ‰è€ƒè™‘ä¸å‘¨å…¨çš„åœ°æ–¹\nå®é™…å·¥ä½œä¸­å¯ä»¥å€ŸåŠ©ç¬¬ä¸‰æ–¹ï¼š\n// Lodash\nLodash.cloneDeep()\n// å¹²è„†ä¸ç”¨æ·±æ‹·è´äº†ï¼Œä½¿ç”¨éƒ¨åˆ†ä¿®æ”¹\nimmutable.js éƒ¨åˆ†ä¿®æ”¹\nimmer.js\n","description":"","id":21,"section":"posts","tags":["jsåŸºç¡€","å­¦ä¹ ç¬”è®°"],"title":"Jså®ç°æ·±æ‹·è´","uri":"https://llane.xyz/posts/js%E5%AE%9E%E7%8E%B0%E6%B7%B1%E6%8B%B7%E8%B4%9D/"},{"content":"è¿™ç¯‡æ–‡ç« æ¥è‡ª StackOverFlow çš„åˆ›å§‹äºº Joel åœ¨ 20 å¹´å‰å†™ä¸‹çš„ä¸€ç¯‡æ–‡ç« åŸæ–‡\nç°åœ¨æˆ‘ç¿»è¯‘æˆä¸­æ–‡\nä½ å¯ä»¥ç”¨ 13 ä¸ªé—®é¢˜æ¥è¡¡é‡ä½ çš„æŠ€æœ¯å›¢é˜Ÿ åˆ†æ•°è¯„ä¼°ï¼š \u0026gt;= 10 ä¼˜ç§€ \u0026gt;= 7 è¿˜å¯ä»¥ \u0026gt;= 5 éœ€è¦åŠ å¼º \u0026lt; 5 ç³Ÿç³•  ä½ ä»¬æ˜¯å¦ä½¿ç”¨ç‰ˆæœ¬æ§åˆ¶ï¼Œæ¯”å¦‚ Git æˆ– SVNï¼Ÿ ä½ ä»¬æ˜¯å¦èƒ½ä¸€é”®éƒ¨ç½²ï¼ˆæˆ–è€…ä¸€ä¸ªå‘½ä»¤ï¼‰ä»£ç åˆ°çº¿ä¸Šï¼Ÿ ä½ ä»¬åœ¨åˆå¹¶ä»£ç åˆ° master å‰æ˜¯å¦éœ€è¦ç»è¿‡æµ‹è¯•ï¼Ÿ ä½ ä»¬æ˜¯å¦æœ‰ä¸€ä¸ª BUG ç®¡ç†ä»“åº“ï¼Ÿ ä½ ä»¬åœ¨å¼€å§‹å¼€å‘æ–°çš„åŠŸèƒ½å‰æ˜¯å¦å…ˆä¿®å¤å·²çŸ¥ BUGï¼Ÿ ä½ ä»¬æ˜¯å¦æœ‰ç»™æ¯ä¸€ä¸ªå¼€å‘äººå‘˜ä¸€ä¸ªå®æ—¶æ›´æ–°çš„ä»»åŠ¡è¡¨ï¼Ÿï¼ˆå¦‚æœæ²¡æœ‰å°±å¾ˆå¯èƒ½ç»å¸¸åŠ ç­ï¼Œå› ä¸ºå‘å¸ƒéœ€æ±‚çš„äººä¸æ¸…æ¥šå¼€å‘äººå‘˜çš„å…·ä½“å·¥ä½œæƒ…å†µï¼‰ ä½ ä»¬æ˜¯å¦ä¼šåœ¨å†™ä»£ç å‰å†™è§„æ ¼æ–‡æ¡£ï¼ˆåŒ…å«æ‰€æœ‰è¦å®Œæˆçš„åŠŸèƒ½æè¿°ï¼‰ï¼Ÿ ä½ ä»¬çš„å¼€å‘ç¯å¢ƒæ˜¯å¦æ˜¯å®‰é™çš„ä¸ä¼šè¢«æ‰“æ‰°çš„ï¼ˆæ¯”å¦‚ï¼šäº§å“ç»ç†æ˜¯å¦ä¼šé¢‘ç¹æ‰¾ä½ ï¼‰ï¼Ÿ ä½ ä»¬å…¬å¸æ˜¯å¦ä¼šç»™ä½ ä»¬é…å¤‡æœ€å¥½çš„å¼€å‘è®¾å¤‡ã€æœ€å¥½çš„å¼€å‘è½¯ä»¶ï¼ˆå¯¹ï¼Œå°±æ˜¯å­—é¢æ„æ€æœ€å¥½çš„ï¼Œè¡¡é‡å…¬å¸çš„æŠ•å…¥ï¼‰ï¼Ÿ ä½ ä»¬æ˜¯å¦æœ‰ä¸“èŒçš„æµ‹è¯•äººå‘˜ï¼Ÿ ä½ ä»¬æ˜¯å¦æœ‰è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Ÿ ä½ ä»¬çš„æ–°åŠ å…¥æˆå‘˜æ˜¯å¦åœ¨æ‹›è˜æµç¨‹ä¸­è¦æ±‚ç°åœºå†™ä»£ç ï¼Ÿ ä½ ä»¬æ˜¯å¦ä¼šè§‚å¯Ÿç”¨æˆ·å¦‚ä½•ä½¿ç”¨ä½ ä»¬çš„è½¯ä»¶ï¼Ÿ  å¯ä»¥çœ‹åˆ°å³ä½¿æ˜¯ç°åœ¨ 2021 å¹´ï¼Œè¦å…¨éƒ¨å®Œæˆè¿™ 13 ä¸ªé—®é¢˜çš„æ¡ä»¶éƒ½æ˜¯å¾ˆéš¾çš„ã€‚\nè¿™å°±æ˜¯å¯¹è½¯ä»¶è´¨é‡æ„è¯†çš„å·®è·\n","description":"","id":22,"section":"posts","tags":null,"title":"å¦‚ä½•è¯„ä¼°ä½ çš„æŠ€æœ¯å›¢é˜Ÿ","uri":"https://llane.xyz/posts/%E5%A6%82%E4%BD%95%E8%AF%84%E4%BC%B0%E4%BD%A0%E7%9A%84%E6%8A%80%E6%9C%AF%E5%9B%A2%E9%98%9F/"},{"content":"HTTP HTTP å…¨ç§°æ˜¯ HyperText Transfer Protocol è¶…æ–‡æœ¬è½¬ç§»ï¼ˆä¼ è¾“ï¼‰åè®®\nç›®å‰ä¸»æµçš„ Http ç‰ˆæœ¬æ˜¯ 1.1ï¼Œäº 1997 å¹´ 1 æœˆå‘å¸ƒ\né€šå¸¸ä½¿ç”¨çš„ç½‘ç»œæ˜¯åœ¨ Tcp/IP åè®®çš„åŸºç¡€ä¸Šè¿è¡Œçš„\nHTTP åè®®æ˜¯åœ¨ TCP/IP åè®®çš„å­é›†\nTCP/IP åè®®æ—æŒ‰å±‚æ¬¡åˆ†ç±»å¯ä»¥åˆ†ä¸ºï¼š\nåº”ç”¨å±‚ï¼šåº”ç”¨ç¨‹åºé—´é€šè®¯\nè¡¨è¾¾å±‚ï¼ˆååŠ ï¼‰ï¼šå¤„ç†æ•°æ®æ ¼å¼ï¼Œæ•°æ®åŠ å¯†\nä¼šè¯å±‚ï¼ˆååŠ ï¼‰ï¼šå»ºç«‹ã€ç»´æŠ¤å’Œç®¡ç†ä¼šè¯\nä¼ è¾“å±‚ï¼šæä¾›å¤„äºç½‘ç»œè¿æ¥ä¸­çš„ä¸¤å°è®¡ç®—æœºä¹‹é—´çš„æ•°æ®ä¼ è¾“ï¼Œå»ºç«‹ä¸»æœºç«¯åˆ°ç«¯è¿æ¥\nç½‘ç»œå±‚ï¼šå¤„ç†ç½‘ç»œä¸Šçš„æ•°æ®åŒ…ï¼Œé€‰æ‹©åˆ°è¾¾å¯¹æ–¹è®¡ç®—æœºçš„ä¼ è¾“è·¯çº¿ï¼Œå¹¶æŠŠæ•°æ®åŒ…ä¼ é€ç»™å¯¹æ–¹ï¼Œå³ï¼šå¯»å€å’Œè·¯ç”±é€‰æ‹©\næ•°æ®é“¾è·¯å±‚ï¼šå¤„ç†è¿æ¥ç½‘ç»œçš„ç¡¬ä»¶éƒ¨åˆ†\nå±‚ä¸å±‚ä¼ è¾“æ—¶ï¼Œå‘é€æ—¶æ¯ç»è¿‡ä¸€å±‚éƒ½ä¼šæ‰“ä¸Šä¸€ä¸ªè¯¥å±‚æ‰€å±çš„é¦–éƒ¨ä¿¡æ¯ã€‚åä¹‹ï¼Œæ¥æ”¶æ—¶æ¯ç»è¿‡ä¸€å±‚å°±æŠŠå¯¹åº”çš„é¦–éƒ¨æ¶ˆå»\nå±‚æ¬¡åŒ–çš„å¥½å¤„æ˜¯ï¼Œä¸€ä¸ªå±‚å¦‚æœéœ€è¦æ”¹å˜è®¾è®¡å¯ä»¥å°½é‡å‡å°‘å¯¹å…¶ä»–å±‚çš„å½±å“ï¼ˆå°è£…è§£è—•çš„æ¦‚å¿µï¼Ÿï¼‰\næ¯ä¸ªå±‚åªéœ€è¦è€ƒè™‘è‡ªå·±çš„å·¥ä½œï¼Œä¸éœ€è¦çŸ¥é“å®Œæ•´çš„ç½‘ç»œæµç¨‹\nDNS çš„ç¼“å­˜ DNS åŸŸåç³»ç»Ÿ è§£æåŸŸåä¸ºå¯¹åº”çš„æœåŠ¡å™¨ ipï¼Œè¿™ä¸ªè§£æçš„ç»“æœä¼šè¢«ç¼“å­˜\nè¯»å– DNS ç¼“å­˜çš„é¡ºåº\n å…ˆçœ‹æµè§ˆå™¨çš„ç¼“å­˜ï¼Œæ¯”å¦‚ Chrome çš„ç¼“å­˜åœ¨chrome://net-internals/#dns å¦‚æœæ²¡æœ‰å°±å†çœ‹æ“ä½œç³»ç»Ÿçš„ç¼“å­˜ï¼Œ Host æ–‡ä»¶æ˜¯æ‰‹åŠ¨ç»™æ“ä½œç³»ç»Ÿæ·»åŠ  DNS è§£æç¼“å­˜ å¦‚æœæ²¡æœ‰æœ€åå»çœ‹ ISP ç«¯çš„ç¼“å­˜ ISP æ˜¯é€šä¿¡æœåŠ¡å•†  ä¸‰æ¬¡æ¡æ‰‹ DNS æ‰¾åˆ° ip åï¼Œæµè§ˆå™¨å¼€å§‹å»ºç«‹ TCP è¿æ¥ï¼Œå»ºç«‹ TCP è¿æ¥ä¼šè¿›è¡Œä¸‰æ¬¡æ¡æ‰‹\nä¸ºäº†å‡†ç¡®æ— è¯¯åœ°å°†æ•°æ®é€è¾¾ç›®æ ‡å¤„ï¼ŒTCP åè®®é‡‡ç”¨äº†ä¸‰æ¬¡æ¡æ‰‹\nä½¿ç”¨ TCP æ ‡å¿—ï¼ˆflagï¼‰ï¼š\nSYN(synchronize: ä¸ x åŒæ­¥ï¼ŒåŒæ­¥å®Œæ¯•)ã€\nACK(acknowledgementï¼šæ”¶åˆ°æ”¶åˆ°ï¼Œç¡®è®¤æ”¶åˆ°)\nè¿™æœ‰ç‚¹åƒå¯¹è®²æœºé‡Œçš„å¯¹è¯ï¼š\n æµè§ˆå™¨ï¼ˆå‘é€ç«¯ï¼‰å‘é€ SYN(x) ç»™æœåŠ¡å™¨ï¼ˆæ¥æ”¶ç«¯ï¼‰ï¼šè¿™é‡Œæ˜¯é•¿æ±Ÿï¼Œè¯·æ±‚åŒæ­¥ä¿¡æ¯ï¼Œæ”¶åˆ°è¯·å›å¤ æœåŠ¡å™¨ï¼ˆæ¥æ”¶ç«¯ï¼‰æ”¶åˆ°åå‘é€ ACK(x+1)/SYN(y) ç»™æµè§ˆå™¨ï¼ˆå‘é€ç«¯ï¼‰ï¼šè¿™é‡Œæ˜¯é»„æ²³ï¼Œç¡®è®¤æ”¶åˆ°ä½ çš„åŒæ­¥ä¿¡æ¯è¯·æ±‚ï¼Œæ”¶åˆ°è¯·å›å¤ æµè§ˆå™¨ï¼ˆå‘é€ç«¯ï¼‰å‘é€ ACK(y+1) ç»™æœåŠ¡å™¨ï¼ˆæ¥æ”¶ç«¯ï¼‰ï¼šè¿™é‡Œæ˜¯é•¿æ±Ÿï¼Œå·²æ”¶åˆ°ä½ çš„å›å¤ç¡®è®¤ï¼ŒæˆåŠŸå»ºç«‹è¿æ¥  å› ä¸ºå¯èƒ½åŒä¸€æ—¶é—´éƒ½å¤šä¸ªè¯·æ±‚ï¼Œæ•…ä½¿ç”¨ xï¼Œy æ¥æ ‡è®°ï¼Œx å’Œ y ä¸€èˆ¬æ˜¯ä» 0 å¼€å§‹çš„\nSYN æ˜¯ synchronizeï¼ˆåŒæ­¥ï¼‰çš„ç¼©å†™\nACK æ˜¯ acknowledgeï¼ˆè·æ‚‰ï¼Œæ”¶åˆ°ï¼‰çš„ç¼©å†™\nä¸‰æ¬¡æ¡æ‰‹ç¡®ä¿ï¼š\n A å¯ä»¥å‘ B å‘ä¿¡æ¯ B å¯ä»¥æ”¶åˆ°è¯¥ä¿¡æ¯ï¼ŒB ä¹Ÿå¯ä»¥å‘ A å‘ä¿¡æ¯ A å¯ä»¥æ”¶åˆ°è¯¥ä¿¡æ¯  æ­¤æ—¶åŒæ–¹éƒ½çŸ¥é“äº†å¯¹æ–¹å‡†å¤‡å¥½äº†ï¼Œå®Œå…¨å»ºç«‹äº†é€šè®¯ï¼ŒA å°±å¯ä»¥æ­£å¼å‘é€ HTTP è¯·æ±‚äº†\nå½“çœç•¥ç¬¬ä¸‰æ­¥çš„æ—¶å€™ï¼ŒæœåŠ¡å™¨ä¼šè®¤ä¸º A æ— æ³•æ¥æ”¶ä¿¡æ¯ï¼ŒA æˆ–è®¸å·²ç»æ–­å¼€è¿æ¥äº†ï¼Œå»ºç«‹å°±å¤±è´¥\nå››æ¬¡æŒ¥æ‰‹  A å¯¹ B è¯´ FIN(x) B å›å¤ A ACK(x+1) B å›å¤ A FIN(y) A å›å¤ B ACK(y+1)  ä¹‹åå°±å¯ä»¥æ­£å¼å…³é—­ HTTP è¿æ¥äº†ï¼Œé¿å…èµ„æºçš„æµªè´¹\nåœ¨æ­¥éª¤ 2 å’Œæ­¥éª¤ 3 ä¸­å¯èƒ½æœ‰å…¶ä»– B æœ€åè¦å‘é€ç»™ A çš„ä¿¡æ¯ï¼Œæ‰€ä»¥æ²¡æœ‰åƒ 3 æ¬¡æ¡æ‰‹æ—¶åˆå¹¶\nå…³é—­æ—¶ x å’Œ y ä¸€èˆ¬ä¸æ˜¯ 0\nFIN finish\nä¸€æ¬¡ç®€å•çš„æµè§ˆ web é¡µ ä¸€æ¬¡æµè§ˆ web é¡µé¢ï¼š\nHTTP åè®®å‘é€é’ˆå¯¹ web æœåŠ¡å™¨ llane.xyz çš„ HTTP è¯·æ±‚æŠ¥æ–‡ï¼Œ\nDNS åè®®è´Ÿè´£é€šè¿‡åŸŸåæ‰¾åˆ°å¯¹åº”çš„ IP åœ°å€\nTCP åè®®æŠŠè¯·æ±‚æŠ¥æ–‡åˆ†å‰²æˆæŠ¥æ–‡æ®µï¼ˆæŒ‰ç…§åºå·åˆ†ï¼‰\nIP åè®®æœç´¢å¯¹æ–¹åœ°å€ä¸€è¾¹ä¸­è½¬ä¸€è¾¹ä¼ é€\nTCP åè®®ä»å¯¹æ–¹é‚£é‡Œæ¥æ”¶æŠ¥æ–‡æ®µæŒ‰é¡ºåºé‡ç»„\nHTTP åè®®ä»å¯¹æ–¹é‚£é‡Œå¯¹ web æœåŠ¡å™¨è¯·æ±‚çš„å†…å®¹è¿›è¡Œå¤„ç†\nURI | URL URI ç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦ï¼Œç”¨å­—ç¬¦ä¸²æ ‡è¯†æŸä¸€äº’è”ç½‘èµ„æº\nURL ç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼Œè¡¨ç¤ºèµ„æºçš„åœ°å€\nURL æ˜¯ URI çš„å­é›†\nURI: åè®®æ–¹æ¡ˆåï½œç™»é™†ä¿¡æ¯è®¤è¯ï½œæœåŠ¡å™¨åœ°å€ï½œæœåŠ¡å™¨ç«¯å£å·ï½œå¸¦å±‚æ¬¡çš„æ–‡ä»¶è·¯å¾„ï½œæŸ¥è¯¢å­—æ®µï½œç‰‡æ®µæ ‡è¯†ç¬¦\nHTTP æ— çŠ¶æ€ HTTP æ˜¯ä¸€ç§ä¸ä¿å­˜çŠ¶æ€ï¼Œå³æ— çŠ¶æ€ï¼ˆstatelessï¼‰åè®®ã€‚HTTP åè®®è‡ªèº«ä¸å¯¹è¯·æ±‚å’Œå“åº”ä¹‹é—´çš„é€šä¿¡çŠ¶æ€è¿›è¡Œä¿å­˜ã€‚\nä¹Ÿå°±æ˜¯è¯´åœ¨ HTTP è¿™ä¸ªçº§åˆ«ï¼Œåè®®å¯¹å‘é€è¿‡çš„è¯·æ±‚æˆ–å“åº”éƒ½ä¸èƒ½åšæŒä¹…åŒ–å¤„ç†\nHTTP åˆå§‹ç‰ˆæœ¬éœ€è¦æ¯è¿›è¡Œä¸€æ¬¡ HTTP è¿æ¥å°±è¦æ–­å¼€ TCP è¿æ¥\nå¦‚æœä¸€ä¸ª HTML æ–‡æ¡£ä¸­åŒ…å«å¤šä¸ªå›¾ç‰‡ï¼Œå°±è¦è¿›è¡Œå¤šæ¬¡ HTTP å’Œ TCP çš„æ–­å¼€å’Œè¿æ¥\nHTTP1.1 å’Œéƒ¨åˆ† 1.0 ä½¿ç”¨æŒç»­è¿æ¥ï¼Œåªè¦ä»»æ„ä¸€æ®µä¸æå‡º TCP æ–­å¼€å°±ä¿æŒè¿æ¥çŠ¶æ€\nç®¡çº¿åŒ–ä½¿å¾—å¯ä»¥åŒæ—¶å¹¶è¡Œå‘é€å¤šä¸ªè¯·æ±‚ï¼Œä¸ç”¨ä¸€ä¸ªæ¥ä¸€ä¸ªç­‰\nå› ä¸º HTTP ä¸å¯¹ä¹‹å‰å‘ç”Ÿè¿‡çš„è¯·æ±‚å’Œå“åº”çš„çŠ¶æ€è¿›è¡Œç®¡ç†ï¼Œä¹Ÿå°±æ˜¯æ— æ³•æ ¹æ®ä¹‹å‰çš„çŠ¶æ€è¿›è¡Œæœ¬æ¬¡çš„è¯·æ±‚å¤„ç†\nç›®å‰ä¸»æµçš„åŠæ³•æ˜¯ç”¨ cookie æ¥åšçŠ¶æ€ï¼ˆsession ä¼šè¯ï¼‰ç®¡ç†\nCookie ä¼šæ ¹æ®æœåŠ¡ç«¯å‘é€çš„å“åº”æŠ¥æ–‡ä¸­çš„ Set-Cookie é€šçŸ¥å®¢æˆ·ç«¯ä¿å­˜ Cookieï¼Œä¹‹åå®¢æˆ·ç«¯çš„è¯·æ±‚ä¼šè‡ªåŠ¨åŠ å…¥ Cookie çš„å€¼\nHTTP æ–¹æ³• GET è·å–èµ„æºï¼Œè¯·æ±‚è®¿é—®å·²è¢« URI è¯†åˆ«çš„èµ„æº\nPOST ä¼ è¾“å®ä½“ä¸»ä½“ï¼Œè™½ç„¶ GET ä¹Ÿå¯ä»¥ä¼ è¾“å®ä½“çš„ä¸»é¢˜ï¼Œä½†æ˜¯ä¸€èˆ¬ä¸ç”¨ GET æ–¹æ³•ä¼ è¾“\nPUT ä¼ è¾“æ–‡ä»¶ï¼Œè¦æ±‚åœ¨æŠ¥æ–‡ä¸»ä½“ä¸­åŒ…å«æ–‡ä»¶å†…å®¹ï¼Œä¿å­˜åˆ°è¯·æ±‚ URI æŒ‡å®šçš„ä½ç½®ï¼Œä½†ä¸å¸¦éªŒè¯æœºåˆ¶æœ‰å®‰å…¨é—®é¢˜\nHEAD è·å–æŠ¥æ–‡é¦–éƒ¨ï¼Œå’Œ GET æ–¹æ³•ç±»ä¼¼ä½†æ˜¯ä¸è¿”å›æŠ¥æ–‡ä¸»ä½“éƒ¨åˆ†\nDELETE åˆ é™¤æ–‡ä»¶ï¼Œå’Œ PUT ç›¸åçš„æ–¹æ³•ï¼ŒæŒ‰ç…§è¯·æ±‚ URI åˆ é™¤æŒ‡å®šçš„èµ„æºï¼Œä½†ä¸å¸¦éªŒè¯æœºåˆ¶æœ‰å®‰å…¨é—®é¢˜\nOPTIONS æŸ¥è¯¢é’ˆå¯¹è¯·æ±‚ URI æŒ‡å®šèµ„æºæ”¯æŒçš„æ–¹æ³•ï¼Œç±»ä¼¼è¿”å› Allow: GET,POST,HEAD,OPTIONS\nTRACE è¿½è¸ªè·¯å¾„ï¼Œè®© web æœåŠ¡å™¨ç«¯å°†ä¹‹å‰çš„è¯·æ±‚é€šä¿¡ç¯å›ç»™å®¢æˆ·ç«¯\nCONNECT è¦æ±‚ç”¨éš§é“åè®®è¿æ¥ä»£ç† è¦æ±‚ä¸ä»£ç†æœåŠ¡å™¨é€šä¿¡æ—¶å»ºç«‹éš§é“ï¼Œå®ç°ç”¨éš§é“åè®®è¿›è¡Œ TCP é€šä¿¡ã€‚ä¸»è¦ç”¨ SSL(Secure Sockets Layer å®‰å…¨å¥—æ¥å±‚) å’Œ TLS(Transport Layer Security ä¼ è¾“å±‚å®‰å…¨)åè®®æŠŠé€šä¿¡å†…å®¹åŠ å¯†åç»ç½‘ç»œéš§é“ä¼ è¾“\næå‡ç¼–ç æ•ˆç‡ 1.å‹ç¼©ç¼–ç \nå¸¸è§çš„å†…å®¹ç¼–ç æœ‰ï¼š\ngzipï¼ˆGNU zipï¼‰\ncompressï¼ˆUNIX ç³»ç»Ÿçš„æ ‡å‡†å‹ç¼©ï¼‰\ndeflateï¼ˆzlibï¼‰\nidentityï¼ˆä¸è¿›è¡Œç¼–ç ï¼‰\n2.åˆ†å‰²å‘é€çš„åˆ†å—ä¼ è¾“ç¼–ç \nåœ¨ä¼ è¾“å¤§å®¹é‡æ•°æ®æ—¶ï¼Œé€šè¿‡æŠŠæ•°æ®åˆ†å‰²æˆå¤šå—ï¼Œèƒ½è®©æµè§ˆå™¨é€æ­¥æ˜¾ç¤ºé¡µé¢\nè¯·æ±‚æŠ¥æ–‡ä¸­çš„ Content-type è¯·æ±‚æŠ¥æ–‡ä¸­å‘é€çš„æ•°æ®å¯èƒ½æ˜¯å¤šéƒ¨åˆ†å¯¹è±¡é›†åˆ\nmultipart/form-data\nweb è¡¨å•ä¸Šä¼ æ—¶ä½¿ç”¨\nmultipart/byteranges\nçŠ¶æ€ç  206ï¼ˆPartial Contentï¼Œéƒ¨åˆ†å†…å®¹ï¼‰å“åº”æŠ¥æ–‡åŒ…å«äº†å¤šä¸ªèŒƒå›´çš„å†…å®¹æ—¶ä½¿ç”¨\nHTTP çŠ¶æ€ç  200 ok\n204 No content è¯·æ±‚æˆåŠŸä½†æ˜¯æ²¡æœ‰ä¿¡æ¯è¿”å›\n206 Partial content å¯¹èµ„æºä¸€éƒ¨åˆ†çš„è¯·æ±‚ï¼Œå“åº”æŠ¥æ–‡ä¸­æœ‰ Content-Range\n301 Moved Permanently æ°¸ä¹…é‡å®šå‘ï¼Œå¸Œæœ›ä»¥åç”¨æ–°çš„ URI è®¿é—®\n302 Found ä¸´æ—¶é‡å®šå‘ èµ„æºåˆ†é…äº†æ–°çš„ URIï¼Œå¸Œæœ›ï¼ˆæœ¬æ¬¡ï¼‰ç”¨æ–°çš„ä¸´æ—¶ URI è®¿é—®\n303 See other èµ„æºæœ‰å¦ä¸€ä¸ª URIï¼Œåº”ç”¨ GET æ–¹æ³•å®šå‘ï¼ˆå’Œ 302 å‡ ä¹ä¸€æ ·ï¼Œä½†æŒ‡å®šäº†è¦ç”¨ GET é‡å®šå‘ï¼‰\n304 Not Modified è™½ç„¶æ˜¯ 3xx ä½†ä¸æ˜¯é‡å®šå‘ï¼Œè¡¨ç¤ºæœ¬æ¬¡è¯·æ±‚ä¸ç¬¦åˆæŸäº›æ¡ä»¶\n307 Temporary Redirect ä¸´æ—¶é‡å®šå‘ ä¸ 302 æœ‰ç›¸åŒçš„å«ä¹‰ï¼Œç¦æ­¢ POST å˜ GET\n400 Bad Request è¯·æ±‚æŠ¥æ–‡ä¸­æœ‰è¯­æ³•é”™è¯¯\n401 Unauthorized è¯·æ±‚éœ€è¦æœ‰ç”¨æˆ·è®¤è¯ä¿¡æ¯ WWW-Authenticate ä¿¡æ¯ (æ­¤æ—¶å¦‚æœç”¨æˆ·æœªç™»å½•ï¼Œè¡¨ç¤ºéœ€è¦ç™»å½•)\n403 Forbidden è¯·æ±‚çš„èµ„æºè¢«æœåŠ¡å™¨æ‹’ç»äº† (æ­¤æ—¶å¦‚æœç”¨æˆ·å·²ç»ç™»å½•ï¼Œè¡¨ç¤ºæ²¡æœ‰æƒé™)\n404 Not Found æœåŠ¡å™¨ä¸Šæ— æ³•æ‰¾åˆ°è¯·æ±‚çš„èµ„æº\n500 Internal Server Error æœåŠ¡å™¨åœ¨æ‰§è¡Œæ—¶å‘ç”Ÿäº†é”™è¯¯\n503 Service Unavailable æœåŠ¡å™¨å¤„äºè¶…è´Ÿè½½æˆ–åœæœºç»´æŠ¤ï¼Œç°åœ¨æ— æ³•å¤„ç†è¯·æ±‚\nä¸€å°æœåŠ¡å™¨ï¼ˆå¯¹åº”ä¸€ä¸ª IPï¼‰å¯èƒ½æ‰˜ç®¡äº†å¤šä¸ªä¸»æœºåå’ŒåŸŸåçš„ web ç½‘ç«™ï¼Œä¸èƒ½åªå†™ IP éœ€è¦åœ¨ Host å†…æŒ‡å®šå®Œæ•´çš„ä¸»æœºåæˆ–åŸŸåçš„ URI\nä¿æŠ¤èµ„æºç¼“å­˜ ç¼“å­˜æ˜¯æŒ‡ä»£ç†æœåŠ¡å™¨æˆ–å®¢æˆ·ç«¯æœ¬åœ°ç£ç›˜å†…ä¿å­˜çš„èµ„æºå‰¯æœ¬ã€‚åˆ©ç”¨ç¼“å­˜å¯å‡å°‘å¯¹æºæœåŠ¡å™¨çš„è®¿é—®ï¼Œå› æ­¤ä¹Ÿå°±èŠ‚çœäº†é€šä¿¡æµé‡å’Œé€šä¿¡æ—¶é—´ã€‚\nç¼“å­˜æœåŠ¡å™¨æ˜¯ä»£ç†æœåŠ¡å™¨çš„ä¸€ç§ï¼Œå½“ä»£ç†è½¬å‘ä»æœåŠ¡å™¨è¿”å›çš„å“åº”æ—¶ï¼Œä»£ç†æœåŠ¡å™¨ä¼šä¿å­˜ä¸€ä»½èµ„æºçš„å‰¯æœ¬\nç¼“å­˜æœåŠ¡å™¨çš„ä¼˜åŠ¿åœ¨äºåˆ©ç”¨ç¼“å­˜å¯ä»¥é¿å…å¤šæ¬¡ä»æºæœåŠ¡å™¨è½¬å‘èµ„æºã€‚å› æ­¤å®¢æˆ·ç«¯å¯å°±è¿‘ä»ç¼“å­˜æœåŠ¡å™¨ä¸Šè·å–èµ„æºï¼Œè€ŒæºæœåŠ¡å™¨ä¹Ÿä¸å¿…å¤šæ¬¡å¤„ç†ç›¸åŒçš„è¯·æ±‚äº†\nç¼“å­˜çš„æœ‰æ•ˆæœŸ å½“é‡ä¸ŠæºæœåŠ¡å™¨ä¸Šçš„èµ„æºæ›´æ–°æ—¶ï¼Œå¦‚æœè¿˜æ˜¯ä½¿ç”¨ä¸å˜çš„ç¼“å­˜ï¼Œé‚£å°±ä¼šæ¼”å˜æˆè¿”å›æ›´æ–°å‰çš„â€œæ—§â€èµ„æºäº†\næ‰€ä»¥éœ€è¦ç¡®è®¤èµ„æºçš„æœ‰æ•ˆæ€§\nç¼“å­˜ä¸ä»…å¯ä»¥åœ¨äºç¼“å­˜æœåŠ¡å™¨å†…ï¼Œè¿˜å¯ä»¥å­˜åœ¨å®¢æˆ·ç«¯æµè§ˆå™¨ä¸­\nå¸¸è§çš„ HTTP è¯·æ±‚é¦–éƒ¨ Cache-Control: no-cache è¡¨ç¤ºç¼“å­˜æœåŠ¡å™¨åœ¨ç¡®è®¤æœ‰æ•ˆæ€§åä¸ç¼“å­˜è¿‡æœŸçš„èµ„æº\nCache-Control: no-store è¡¨ç¤ºç¼“å­˜æœåŠ¡å™¨ä¸è¿›è¡Œä»»ä½•ç¼“å­˜\nCache-Control: max-age ç¼“å­˜æœåŠ¡å™¨ä¸å†ç¡®è®¤æœ‰æ•ˆæ€§ï¼Œåªå…³æ³¨ max-ageï¼ˆç§’ï¼‰çš„ç¼“å­˜æœ€é•¿æ—¶é—´\nConnect: close HTTP1.1 é»˜è®¤æ˜¯æŒä¹…è¿æ¥çš„ï¼ŒæœåŠ¡å™¨è¦æ–­å¼€æ—¶æŒ‡å®šå€¼ä¸º close\nConnet: Keep-Alive HTTP1.1 ä¹‹å‰é»˜è®¤æ˜¯éæŒä¹…è¿æ¥ï¼Œéœ€è¦é¢å¤–æŒ‡å®šä¸º Keep-Alive\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,/;q=0.8 è¡¨ç¤ºç”¨æˆ·ä»£ç†èƒ½å¤„ç†çš„èµ„æºçš„åª’ä½“ç±»å‹å’Œ q ä¼˜å…ˆçº§\nAccept-Charset: iso-8859-5, unicode-1-1;q=0.8 è¡¨ç¤ºç”¨æˆ·ä»£ç†æ”¯æŒçš„ä¼˜å…ˆçº§å’Œä¼˜å…ˆçº§\nAccept-Encoding: gzip, deflate è¡¨ç¤ºç”¨æˆ·ä»£ç†æ”¯æŒçš„å†…å®¹ç¼–ç æ–¹å¼å’Œä¼˜å…ˆçº§\nAccept-Language: zh-cn, zh; q=0.7,en-us,en;q=0.3 è¡¨ç¤ºç”¨æˆ·ä»£ç†èƒ½å¤„ç†çš„è‡ªç„¶è¯­è¨€é›†å’Œä¼˜å…ˆçº§\nAuthorization Basic xxxxxxxxxx ç”¨æ¥å‘ŠçŸ¥ç”¨æˆ·ä»£ç†çš„è®¤è¯ä¿¡æ¯ï¼Œç”¨æˆ·åœ¨æ”¶åˆ° 401 çŠ¶æ€ç åä¼šæŠŠé¦–éƒ¨å­—æ®µ Authorization åŠ å…¥è¯·æ±‚\nExpect: 100-contine å‘ŠçŸ¥æœåŠ¡å™¨ï¼ŒæœŸæœ›å‡ºç°æŸç§ç‰¹å®šè¡Œä¸º\nHost: llane.xyz è™šæ‹Ÿä¸»æœºè¿è¡Œåœ¨åŒä¸€ä¸ª IP ä¸Šï¼Œå› æ­¤éœ€è¦ç”¨é¦–éƒ¨å­—æ®µ Host æ¥åŒºåˆ†\nIf-Match: \u0026ldquo;123456\u0026rdquo; ç”¨æ¥åŒ¹é…èµ„æºæ‰€ç”¨çš„å®ä½“æ ‡è®° ETagï¼Œä¸€è‡´æ—¶æ‰ä¼šæ‰§è¡Œè¯·æ±‚\nIf-None-Match: å¦‚æœèµ„æºåœ¨ ETag ä¸åŒ¹é…æ—¶æ‰ä¼šæ‰§è¡Œè¯·æ±‚\nIf-Modified-Since å¦‚æœèµ„æºåœ¨ xxx æ—¥æœŸåæ›´æ–°ï¼Œæ‰ä¼šæ¥å—è¯·æ±‚\nIf-Range: + ä¸€ä¸ª Etag\nRange: bytes=500-10000 æˆ– bytes=500-\nè¡¨ç¤ºèµ„æº ETag åŒ¹é…åèµ„æºè¯·æ±‚çš„èŒƒå›´\nReferer è¯·æ±‚çš„ URI æ˜¯ä»å“ªä¸ª web é¡µé¢å‘èµ·çš„\nUser-Agent åˆ›å»ºè¯·æ±‚çš„æµè§ˆå™¨æˆ–ç”¨æˆ·ä»£ç†çš„åç§°å’Œä¿¡æ¯ç­‰\nç½‘ç»œå®‰å…¨ Xss (è·¨ç«™è„šæœ¬æ”»å‡» Cross Site Scripting) è¢«åŠ¨æ”»å‡» é€šè¿‡å·§å¦™çš„æ–¹æ³•æ³¨å…¥æ¶æ„æŒ‡ä»¤ä»£ç åˆ°ç½‘é¡µï¼Œä½¿ç”¨æˆ·åŠ è½½å¹¶æ‰§è¡Œæ”»å‡»è€…æ¶æ„åˆ¶é€ çš„ç½‘é¡µç¨‹åº\ncsrf(è·¨ç«™è¯·æ±‚ä¼ªé€  Cross-site request forgery) è¢«åŠ¨æ”»å‡» ä¸€ç§æŒŸåˆ¶ç”¨æˆ·åœ¨å½“å‰å·²ç™»å½•ï¼ˆåˆ©ç”¨ cookie æˆ–è€… session ä¼šè¯ï¼‰çš„ Web åº”ç”¨ç¨‹åºä¸Šæ‰§è¡Œéæœ¬æ„çš„æ“ä½œçš„æ”»å‡»æ–¹æ³•\nChrome 51 å¼€å§‹ï¼Œæµè§ˆå™¨çš„ Cookie æ–°å¢åŠ äº†ä¸€ä¸ª SameSite å±æ€§ï¼Œç”¨æ¥é˜²æ­¢ CSRF æ”»å‡»å’Œç”¨æˆ·è¿½è¸ªã€‚cookie samesiteSite æ–‡ç« \n","description":"","id":23,"section":"posts","tags":null,"title":"è¯»ä¹¦ç¬”è®°ã€Šå›¾è§£HTTPã€‹","uri":"https://llane.xyz/posts/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0%E5%9B%BE%E8%A7%A3http/"},{"content":" æˆ‘æƒ³çŸ¥é“è¿™æ˜¯ä¸ºä»€ä¹ˆ \u0026ndash;è´¹æ›¼\n åŸºæ•°æ’åº åŸºæ•°æ’åºå°±æ˜¯æŒ‰ç…§æ•°å­—çš„â€ä½â€æ¥æ’åºã€‚\nâ€œä½â€œæ˜¯è¿›ä½çš„ä½ï¼Œæ¯”å¦‚åè¿›åˆ¶çš„åŸºæ•°æ˜¯ 10ï¼Œå°±å¯ä»¥æŒ‰ç…§ä¸ªåç™¾åƒä¸‡ç­‰ä½æ¥æ’åº\næ•´ä½“çš„æµç¨‹åˆ†ä¸ºï¼šåˆå§‹ã€è¡¥ä½ã€æ’ä¸ªä½ã€æ’åä½ã€æ’ç™¾ä½ã€\u0026hellip;\nå…ˆæŒ‰ä¸ªä½ä»å°åˆ°å¤§æ’åºï¼Œç„¶åå†æŒ‰åä½ã€ç™¾ä½æ’åº\u0026hellip;\nåªè¦æ’åºç®—æ³•æ˜¯ç¨³å®šçš„ï¼Œé‚£ä¹ˆæœ€åæ•´ä½“å°±æ˜¯æœ‰åºçš„ã€‚\nä¸ºäº†æ–¹ä¾¿çœ‹å‡ºæ•°å­—æ¯ä¸€ä½å…·ä½“æ˜¯å¤šå°‘ï¼Œå¯¹ä½æ•°å°‘çš„æ•°ç»„è¿›è¡Œäº†å·¦è¾¹çš„è¡¥ 0\nå¯è§ç®—æ³•çš„æ ¸å¿ƒåœ¨äºé€‰æ‹©çš„æ’åºç®—æ³•æ˜¯å¦æ˜¯ç¨³å®šçš„ï¼Œç¨³å®šçš„æ„æ€æ˜¯ç›¸åŒçš„å…ƒç´ çš„ç›¸å¯¹é¡ºåºä¸ä¼šæ”¹å˜\nå¦‚æœé€‰æ‹©çš„æ’åºç®—æ³•æ˜¯ä¸ç¨³å®šçš„ï¼Œé‚£ä¹ˆå¯¹ä¸€æ•´åˆ—ä½æ•°è¿›è¡Œæ’åºçš„æ—¶å€™å¾ˆå¯èƒ½ä¼šå½±å“ä¹‹å‰å·²ç»æ’å¥½åºçš„ä½\nåœ¨å¼€å§‹å†™ç®—æ³•å‰çœ‹ä¸€äº›ç›¸å…³çš„ api:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17  // åˆ¤æ–­æ•°å­—æœ€é•¿æœ‰å‡ ä½ï¼Œè½®å¾ªæ•°ç»„ let array = [666, 520, 36, 49, 9, 600, 8, 502, 998, 32] let maxLength = 0 for (let v of array) { let length = String(v).length if (length \u0026gt; maxLength) { maxLength = length } } // æ ¹æ®æœ€é•¿çš„æ•°å­—è¿›è¡Œå·¦è¾¹çš„è¡¥ä½0 String(321).padStart(maxLength, \u0026#39;0\u0026#39;) // è·å–åˆ¶å®šä½ä¸Šçš„æ•°å­— \u0026#39;321\u0026#39;[0] // \u0026#39;3\u0026#39; \u0026#39;321\u0026#39;[1] // \u0026#39;2\u0026#39; \u0026#39;321\u0026#39;[2] // \u0026#39;1\u0026#39;   å¯¹æ•°ç»„æ’åº maxLength æ¬¡ï¼Œæ¯ä¸€æ¬¡çš„è¾“å‡ºä½œä¸ºä¸‹ä¸€æ¬¡çš„è¾“å…¥ï¼Œsort ç®—æ³•åªè¦æ˜¯ç¨³å®šçš„æ’åºç®—æ³•å°±å¯ä»¥äº†\nè¿™é‡Œä½¿ç”¨æ¡¶æ’åº\nä¸ªä½ä¸Šçš„æ•°å­—èŒƒå›´æ˜¯ 0-9ï¼Œæ‰€ä»¥éœ€è¦ 10 ä¸ªæ¡¶\n1 2 3 4  let buckets = [] for (let i = 0; i \u0026lt; 10; i++) { buckets.push([]) }   ç„¶åæŒ‰ä¸ªä½ä¸Šçš„æ•°å€¼æŠŠè¯¥å…ƒç´ æ”¾åˆ°ä¸åŒçš„æ¡¶é‡Œ\n1 2 3 4 5 6 7 8  for (let v of array) { let pad = String(v).padStart(maxLength, \u0026#39;0\u0026#39;) let bucketIndex = pad[maxLength - 1] //æœ€åä¸€ä½  buckets[bucketIndex].push(v) } console.log(buckets) // [ [ 520, 600 ], [], [ 502, 32 ], [], [], [], [ 666, 36 ], [], [ 8, 998 ], [ 49, 9 ] ]   å› ä¸ºæ¡¶çš„é—´éš”æ˜¯ 1ï¼Œæ‰€ä»¥ä¸éœ€è¦å†æ’åºäº†ï¼Œç›´æ¥æŒ‰é¡ºåºè¾“å‡ºæ¯ä¸ªæ¡¶çš„å…ƒç´ å³å¯\n1 2 3 4  let result = [] for (let bucket of buckets) { result.push(...bucket) }   å®Œæ•´ä»£ç ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37  function radioSort(array) { // è·å–æœ€å¤§é•¿åº¦  let maxLength = 0 for (let v of array) { let length = String(v).length if (length \u0026gt; maxLength) { maxLength = length } } // ä»ä¸ªä½å¼€å§‹æ’åº  for (let i = 0; i \u0026lt; maxLength; i++) { // è¿™ä¸€æ¬¡çš„è¾“å‡ºä½œä¸ºä¸‹ä¸€æ¬¡çš„è¾“å…¥  array = sort(array, i) } function sort(array, index) { let buckets = [] // 0-9 10ä¸ªæ•°å­—åˆ†é…10ä¸ªæ¡¶æ”¾  for (let i = 0; i \u0026lt; 10; i++) { buckets.push([]) } for (let v of array) { let pad = String(v).padStart(maxLength, \u0026#39;0\u0026#39;) let num = pad[maxLength - 1 - index] // é…åˆindexå–æ•°å­—  buckets[num].push(v) // æŠŠæ•°å­—æ”¾åˆ°å¯¹åº”çš„æ¡¶é‡Œ  } let result = [] // ç”±äº10ä¸ªæ¡¶æ˜¯æœ‰å¾ªåºçš„æ‰€ä»¥è½®è¯¢æ¡¶ä¾æ¬¡è§£æ„å‡ºæ¥å°±è¡Œ  for (let bucket of buckets) { result.push(...bucket) } return result } return array }   æ€»ç»“ï¼š\nåŸºæ•°æ’åºçš„æ€§èƒ½ï¼Œå–å†³äºå†…éƒ¨æ’åºç®—æ³•çš„é€‰æ‹©ã€‚å¦‚æœä½¿ç”¨æ¡¶æ’åºï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(k*n)ï¼Œå…¶ä¸­ k ä¸ºæœ€å¤§å…ƒç´ çš„ä½æ•°ã€‚\næˆ‘åˆ›å»ºäº†ä¸€ä¸ªé›†åˆ jest å¯ä»¥æµ‹è¯•ç®—æ³•çš„é¶åœºé¡¹ç›®ï¼š\nhttps://github.com/Llane00/algorithm-range-tests\nå°†åŒæ­¥æ–‡ç« ä¸­çš„ä»£ç åˆ°è¿™ä¸ªé¡¹ç›®ä¸‹\nä½¿ç”¨ vscode çš„è¯»è€…å¯ä»¥å®‰è£…æ‹“å±•æ’ä»¶ jestï¼Œè¿™ä¸ªæ’ä»¶å¯ä»¥è‡ªåŠ¨æ£€æµ‹ test æ–‡ä»¶è‡ªåŠ¨è¿è¡Œï¼Œéå¸¸æ–¹ä¾¿ã€‚\n","description":"","id":24,"section":"algorithm","tags":["ç®—æ³•åŸºç¡€","å­¦ä¹ ç¬”è®°"],"title":"èœé¸Ÿå­¦ç®—æ³•-9-åŸºæ•°æ’åº","uri":"https://llane.xyz/algorithm/9-%E5%9F%BA%E6%95%B0%E6%8E%92%E5%BA%8F/"},{"content":" æˆ‘æƒ³çŸ¥é“è¿™æ˜¯ä¸ºä»€ä¹ˆ \u0026ndash;è´¹æ›¼\n æ¡¶æ’åºï¼š\nå…ˆåˆ†ç±»ï¼ŒæŠŠæ•°æ®æ”¾è¿›ç›¸åº”çš„æ¡¶é‡Œï¼Œç„¶åå¯¹æ¯ä¸ªæ¡¶è¿›è¡Œå±€éƒ¨æ’åºï¼Œæœ€åå†æŠŠæ¡¶æ’åºä¸€ä¸‹\næœ‰å››æ­¥:\n1.åˆ›å»ºæ¡¶\n2.å½’ç±»ï¼ˆæŠŠå…ƒç´ æ”¾åˆ°å¯¹åº”çš„æ¡¶é‡Œï¼‰\n3.æ’åº\n4.åˆå¹¶\nåˆ›å»ºæ¡¶ 1 2 3 4 5 6 7 8 9 10  let array = [3, 8, 6, 1, 5, 7, 9, 2, 4] let min = Math.min(...array) let max = Math.max(...array) let size = 3 let count = Math.floor((max - min) / size) + 1 // countä»1å¼€å§‹è®¡ç®—éœ€è¦åŠ 1 let buckets = [] for (let i = 0; i \u0026lt; count; i++) { buckets.push([]) } console.log(buckets) // [ [], [], []]   å½’ç±» 1 2 3 4 5 6  for (let value of array) { let bucketIndex = Math.floor((vlaue - min) / size) // bucketIndexä»0å¼€å§‹è®¡ç®—ä¸éœ€è¦åŠ 1  buckets[bucketIndex].push(value) } console.log(buckets) // [ [ 3, 1, 2 ], [ 6, 5, 4 ], [ 8, 7, 9 ] ]   æ’åº \u0026amp;\u0026amp; åˆå¹¶ æ’åºç”¨å…¶ä»–ä»»ä¸€æ’åºç®—æ³•éƒ½å¯ä»¥ï¼Œæ¯”å¦‚æ•°æ®é‡ä¸å¤ªå¤§çš„æ—¶å€™ï¼Œæ’å…¥æ’åºå°±æ¯”è¾ƒé€‚åˆ\nå› ä¸ºåŒºé—´æœ¬æ¥å°±æ˜¯æœ‰åºçš„ï¼Œåˆå¹¶çš„æ—¶å€™ç›´æ¥é“¾æ¥è¿™äº›æ•°ç»„å°±å¯ä»¥äº†\n1 2 3 4 5 6  let result = [] for (let bucket of buckets) { result.push(...insertionSort(bucket)) } console.log(result) // [ 1, 2, 3, 4, 5, 6, 7, 8, 9 ]   å®Œæ•´ä»£ç ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35  // æ¡¶æ’åº function bucketSort(array, size = 10) { let max = Math.max(...array) let min = Math.min(...array) let count = Math.floor((max - min) / size) + 1 let buckets = [] for (let i = 0; i \u0026lt; count; i++) { buckets.push([]) } for (let value of array) { let bucketIndex = Math.floor((value - min) / size) buckets[bucketIndex].push(value) } let result = [] for (let bucket of buckets) { result.push(...insertionSort(bucket)) } return result } // æ’å…¥æ’åº function insertionSort(array) { for (let i = 1; i \u0026lt; length; i++) { let j = i let target = array[j] while (j \u0026gt; 0 \u0026amp;\u0026amp; array[j - 1] \u0026gt; target) { array[j] = array[j - 1] j-- } array[j] = target } return array }   å¤æ‚åº¦ \u0026amp;\u0026amp; æ€»ç»“ æ¡¶æ’åºæ˜¯åˆ†å¸ƒå¼æ’åºï¼Œé€‚åˆå¤„ç†å¤§æ‰¹é‡æ•°æ®ã€‚éœ€è¦é¢å¤–ç©ºé—´ï¼Œæ˜¯å¤–éƒ¨æ’åºã€‚\næ¡¶æ’åºæ˜¯å¦ç¨³å®šï¼Œå–å†³äºç¬¬äºŒæ­¥æ’åºç®—æ³•çš„é€‰æ‹©ã€‚\næ—¶é—´å¤æ‚åº¦æ˜¯çº¿æ€§çº§ O(n)ï¼Œå¯ä»¥ç®€å•ç†è§£ï¼šæ¡¶çš„èŒƒå›´å¤§å°æ˜¯äººä¸ºæŒ‡å®šçš„ï¼Œå®ƒä¸éšæ•°æ®è§„æ¨¡å˜åŒ–ï¼Œå¦‚æœæ•°æ®ç›¸å¯¹å‡åŒ€åˆ†å¸ƒï¼Œé‚£ä¹ˆæ¡¶çš„ä¸ªæ•°å°±æ˜¯æ ¸å¿ƒå½±å“å› å­äº†ã€‚\næˆ‘åˆ›å»ºäº†ä¸€ä¸ªé›†åˆ jest å¯ä»¥æµ‹è¯•ç®—æ³•çš„é¶åœºé¡¹ç›®ï¼š\nhttps://github.com/Llane00/algorithm-range-tests\nå°†åŒæ­¥æ–‡ç« ä¸­çš„ä»£ç åˆ°è¿™ä¸ªé¡¹ç›®ä¸‹\nä½¿ç”¨ vscode çš„è¯»è€…å¯ä»¥å®‰è£…æ‹“å±•æ’ä»¶ jestï¼Œè¿™ä¸ªæ’ä»¶å¯ä»¥è‡ªåŠ¨æ£€æµ‹ test æ–‡ä»¶è‡ªåŠ¨è¿è¡Œï¼Œéå¸¸æ–¹ä¾¿ã€‚\n","description":"","id":25,"section":"algorithm","tags":["ç®—æ³•åŸºç¡€","å­¦ä¹ ç¬”è®°"],"title":"èœé¸Ÿå­¦ç®—æ³•-8-æ¡¶æ’åº","uri":"https://llane.xyz/algorithm/8-%E6%A1%B6%E6%8E%92%E5%BA%8F/"},{"content":" æˆ‘æƒ³çŸ¥é“è¿™æ˜¯ä¸ºä»€ä¹ˆ \u0026ndash;è´¹æ›¼\n è®¡æ•°ï¼šæ•°ä¸€æ•°æ¯ä¸ªå…ƒç´ é‡å¤å‡ºç°çš„æ¬¡æ•°\nç»Ÿè®¡å®Œåï¼Œä»å°åˆ°å¤§æŒ‰ç…§ç»Ÿè®¡çš„é‡å¤æ¬¡æ•°ä¸€ä¸ªä¸ªå¡«å……åˆ°ä¸€ä¸ªæ–°æ•°ç»„\nä»æŸ¥å’Œæ’ä¸¤ä¸ªéƒ¨åˆ†è®²\næŸ¥ è®°ä¸‹æ¯ä¸ªå…ƒç´ å‡ºç°çš„é‡å¤æ¬¡æ•°\n1 2 3 4 5 6 7  let array = [3, 2, 1, 2, 3, 2, 0, 4] let counts = [] for (let v of array) { counts[v] = (counts[v] || 0) + 1 } console.log(counts)   æ’ 1 2 3 4 5 6 7 8 9 10  let result = [] for (let i = 0; i\u0026lt; counts; i++) { let count = counts[i] while(count\u0026gt;0) { result.push(i) count-- } } console.log(result)   ä¼˜åŒ–-æ”¯æŒè´Ÿæ•´æ•°æ’åº åˆ©ç”¨æ•°ç»„çš„keyæ¥è¡¨ç¤ºå…ƒç´ ï¼Œvalueæ¥è¡¨ç¤ºå…ƒç´ é‡å¤çš„æ¬¡æ•°ï¼ŒçœŸæ˜¯å¤ªæ£’äº†\nä½†ä¹Ÿæœ‰å±€é™ï¼Œkeyåªèƒ½æ˜¯0æˆ–è€…æ­£æ•´æ•°ï¼Œè¿™å°±æ„å‘³ç€å¾…æ’åºçš„æ•°ç»„çš„å…ƒç´ ä¹Ÿå¿…é¡»æ˜¯0æˆ–è€…æ­£æ•´æ•°\nåœ¨æ·±å…¥jsçš„ç¬¬16ç¯‡ä¸­æ›¾æåˆ°è¿‡biasåå·®å€¼è¿™ä¸ªæ¦‚å¿µï¼Œåœ¨ä¸æ–¹ä¾¿å­˜å‚¨è´Ÿæ•°çš„æ—¶å€™ï¼ŒæŠŠæ‰€æœ‰å€¼éƒ½åŠ ä¸Šbiasä½¿å¾—æ‰€æœ‰å€¼éƒ½å¤§äºç­‰äº0ï¼Œç­‰è¦è¯»å–çš„æ—¶å€™å†å‡å»bias\nè¿™é‡Œä¹Ÿå¯ä»¥è¿™ä¹ˆä¼˜åŒ–ï¼Œä½¿å¾—è®¡æ•°æ’åºå¯ä»¥æ”¯æŒè´Ÿæ•°æ­£æ•°\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15  let array = [-3, -2, -1, -2, -3, -2, 0, -4] let counts = [], result = [] let min = Math.min(...array) // è¿™é‡Œminçš„æ­£è´Ÿä¸ç¡®å®š for (let v of array) { // minçš„æ­£è´Ÿä¸ç¡®å®š v-minå¯ä»¥ä¿è¯éƒ½å¤§äº0  counts(v - min) = (counts[v - min] || 0) + 1 } for (let i = 0; i \u0026lt; counts.length; i++) { let count = counts[i] while (count \u0026gt; 0) { result.push(i + min) count-- } }   è¿™é‡Œçš„resultæ˜¯æ–°æ•°ç»„ï¼Œéœ€è¦é¢å¤–å ç”¨ç©ºé—´ï¼Œå¯ä»¥ç»§ç»­ä¼˜åŒ–\nä¼˜åŒ–ç©ºé—´å¤æ‚åº¦ æƒ³æ³•æ˜¯ç›´æ¥åœ¨åŸæ•°ç»„ä¸Šæ›¿æ¢\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17  let array = [-3, -2, -1, -2, -3, -2, 0, -4] let counts = [], index = 0 let min = Math.min(...array) for (let v of array) { counts(v - min) = (counts[v - min] || 0) + 1 } for (let i = 0; i \u0026lt; counts.length; i++) { let count = counts[i] while (count \u0026gt; 0) { // ä¸»è¦çœ‹è¿™é‡Œ  array[j] = i + min index++ count-- } }   å¤æ‚åº¦ \u0026amp;\u0026amp; æ€»ç»“ è®¡æ•°æ’åºé€‚åˆæ•´æ•°æ’åºï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(n+k)ã€‚\nç®€å•è¯´æ˜ä¸€ä¸‹ä¸ºå•¥æ˜¯O(n+k)ã€‚è¿™é‡Œä½¿ç”¨äº†ä¸¤å±‚å¾ªç¯ï¼Œå¤–å±‚ç”±countsçš„lengthâ€”â€”å¾…æ’æ•°ç»„æœ€å€¼ä¹‹å·®ï¼ˆè®°ä¸ºkï¼‰â€”â€”å†³å®šçš„ï¼Œ\nè€Œwhileå¾ªç¯æ¬¡æ•°æ˜¯countå†³å®šçš„ï¼Œè€Œæ‰€æœ‰countä¹‹å’Œæ­£å¥½ä¸ºarrayçš„lengthï¼ˆè®°ä¸ºnï¼‰ã€‚\nå¦å¤–å…³äºç©ºé—´çš„ä½¿ç”¨ï¼Œå¼€ç¯‡å®ç°æ–¹å¼çš„ç©ºé—´å¤æ‚åº¦ä¸ºO(n+k)ï¼Œå®Œæ•´ä»£ç é‡Œçš„å®ç°çš„ç©ºé—´å¤æ‚åº¦ä¸ºO(k)ã€‚\nå¯è§å½“kç‰¹åˆ«å¤§æ—¶ï¼Œå°†ä¼šä½¿ç”¨å¾ˆå¤šç©ºé—´ã€‚\næˆ‘åˆ›å»ºäº†ä¸€ä¸ªé›†åˆjestå¯ä»¥æµ‹è¯•ç®—æ³•çš„é¶åœºé¡¹ç›®ï¼š\nhttps://github.com/Llane00/algorithm-range-tests\nå°†åŒæ­¥æ–‡ç« ä¸­çš„ä»£ç åˆ°è¿™ä¸ªé¡¹ç›®ä¸‹\nä½¿ç”¨vscodeçš„è¯»è€…å¯ä»¥å®‰è£…æ‹“å±•æ’ä»¶jestï¼Œè¿™ä¸ªæ’ä»¶å¯ä»¥è‡ªåŠ¨æ£€æµ‹testæ–‡ä»¶è‡ªåŠ¨è¿è¡Œï¼Œéå¸¸æ–¹ä¾¿ã€‚\næ„Ÿè°¢è€å§šçš„æ–‡ç« ï¼šæ‰‹å†™ç®—æ³•å¹¶è®°ä½å®ƒï¼šè®¡æ•°æ’åº\n","description":"","id":26,"section":"algorithm","tags":["ç®—æ³•åŸºç¡€","å­¦ä¹ ç¬”è®°"],"title":"èœé¸Ÿå­¦ç®—æ³•-7-è®¡æ•°æ’åº","uri":"https://llane.xyz/algorithm/7-%E8%AE%A1%E6%95%B0%E6%8E%92%E5%BA%8F/"},{"content":" æˆ‘æƒ³çŸ¥é“è¿™æ˜¯ä¸ºä»€ä¹ˆ \u0026ndash;è´¹æ›¼\n åœ¨èœé¸Ÿç®—æ³•ç¬¬ä¸€ç¯‡ä¸­æˆ‘ä»¬å­¦ä¹ äº†ç®€æ˜“ç‰ˆçš„å¿«é€Ÿæ’åºï¼Œæœ¬ç¯‡ä»‹ç»çš„æ˜¯å®Œæ•´ç‰ˆçš„å¿«é€Ÿæ’åºï¼Œé©¬ä¸Šä½ å°±çŸ¥é“ç®€æ˜“ç‰ˆçš„æœ‰å¤šå±‘ï¼\nç›¸å¯¹äºç¬¬äº”ç¯‡ä¸­çš„å½’å¹¶æ’åºï¼Œå¿«é€Ÿæ’åºå®Œæ•´ç‰ˆä»åŸç†æ˜¯å¯ä»¥ç§°ä¸ºå½’åˆ†æ’åº\nå…·ä½“è¿‡ç¨‹ï¼š\né€‰å–æœ€åä¸€ä¸ªå…ƒç´ ä¸ºåˆ†ç•Œç‚¹ï¼Œéå†æ•°ç»„æ¯ä¸€æ¬¡éå†éƒ½å»æ‰¾åˆ°å°äºç­‰äºåˆ†ç•Œç‚¹çš„å…ƒç´ å†å¾€æ•°ç»„å‰é¢äº¤æ¢\næ­¤æ—¶å®Œæˆäº†å°†æ•°ç»„ä¸€åˆ†ä¸ºä¸‰\nå› ä¸ºæ˜¯åŸåœ°æ’åºï¼Œæ‰€ä»¥ä¸éœ€è¦å½’å¹¶æ’åºçš„åˆå¹¶æ“ä½œ\nåˆ† å…ˆæŒ‰ç…§å…·ä½“è¿‡ç¨‹å†™å‡ºã€Šå¦‚ä½•å°†æ•°ç»„ä¸€åˆ†ä¸ºä¸‰ã€‹çš„ä»£ç \n1 2 3 4 5 6 7 8 9 10  let array = [2, 4, 1, 9, 6, 3, 8, 5, 7] let j = 0 //è¿™æ˜¯å·¦è¾¹éƒ¨åˆ†æœ€åä¸€ä½çš„index let pivot = array[array.length - 1] for (let i = 0; i \u0026lt; array.length; i++) { if (array[i] \u0026lt;= pivot) { ;[array[j], array[i]] = [array[i], array[j]] //äº¤æ¢array[i] åˆ°æœ€å‰é¢  j++ } } console.log(array) //[2, 4, 1, 6, 3, 5, 7, 9, 8] å°äºç­‰äºåˆ†ç•Œç‚¹æ‰€ä»¥åˆ†ç•Œç‚¹è‡ªå·±ä¹Ÿäº¤æ¢ä½ç½®åˆ°ä¸­é—´äº†   æˆ‘ä»¬å°†å…¶å°è£…ä¸ºå‡½æ•°\n1 2 3 4 5 6 7 8 9 10 11  function partition(array, start, end) { let j = start let pivot = array[end] for (let i = start; i \u0026lt;= pivot; i++) { if (array[i] \u0026lt;= pivot) { ;[array[j], array[i]] = [array[i], array[j]] j++ } } return j - 1 //å‡å»forå¾ªç¯æœ€åå¤šåŠ çš„ä¸€æ¬¡ï¼Œè¿”å›çš„æ˜¯åˆ†ç•Œç‚¹äº¤æ¢åˆ°ä¸­é—´ä½ç½®åçš„index }   é€’å½’ å›å¿†ä¸€ä¸‹åœ¨ç®€æ˜“ç‰ˆé‡Œçš„é€’å½’æ­¥éª¤ï¼š 1.å°†æ•°ç»„åˆ†ä¸ºä¸‰éƒ¨åˆ† 2.é€’å½’å¤„ç†å·¦è¾¹çš„éƒ¨åˆ† 3.é€’å½’å¤„ç†å³è¾¹çš„éƒ¨åˆ†\n1 2 3 4 5 6  function quickSort(array, start = 0, end = array.length - 1) { let pivotIndex = partition(array, start, end) quickSort(array, start, pivotIndex - 1) quickSort(array, pivotIndex + 1, end) return array }   é€’å½’çš„å‡ºå£æ˜¯ï¼Œå½“æ•°ç»„å…ƒç´ å°äº 2 å°±ä¸ç”¨é€’å½’äº†\nå³ï¼š\n1 2 3 4 5 6 7 8 9  function quickSort(array, start = 0, end = array.length - 1) { if (end - start \u0026lt; 2) { return array } let pivotIndex = partition(array, start, end) quickSort(array, start, pivotIndex - 1) quickSort(array, pivotIndex + 1, end) return array }   å¤æ‚åº¦ å¿«é€Ÿæ’åºçš„æ—¶é—´å¤æ‚åº¦å¹³å‡æ˜¯ O(nlogn)ï¼Œåœ¨æœ€åçš„æƒ…å†µä¸‹ï¼Œå»æ’åºä¸€ä¸ªå·²ç»æ’å¥½åºçš„æ•°ç»„ï¼Œæ—¶é—´å¤æ‚åº¦ä¼šæå‡è‡³ O(n^2)\næ‰€ä»¥ partition æ–¹æ³•æ˜¯å¯ä»¥ä¼˜åŒ–çš„ï¼Œå¸¸è§ç­–ç•¥æœ‰é€‰ä¸­é—´ã€éšæœºé€‰ã€ä¸‰é€‰ä¸€ç­‰ã€‚å‡å¦‚è¿™é‡Œæˆ‘ä»¬éšæœºé€‰ä¸€ä¸ªåˆ†åŒºç‚¹ï¼Œå†ä¸æœ€åçš„å…ƒç´ äº¤æ¢ï¼Œå°±èƒ½å¤§æ¦‚ç‡é¿å…æœ€åæƒ…å½¢çš„å‡ºç°ã€‚\n1 2 3 4  //è·å–éšæœºåˆ†ç•Œç‚¹ let randomIndex = Math.floor(Math.random() * (end - start + 1) + start) swap(array, end, randomIndex) let pivot = array[end]   ç”±äºæ˜¯åŸåœ°æ’åºï¼Œæ‰€ä»¥æ²¡æœ‰ç©ºé—´å¤æ‚åº¦ï¼Œä½†æ˜¯é€’å½’éœ€è¦è°ƒç”¨æ ˆï¼Œæ‰€ä»¥æ€»ä½“çš„ç©ºé—´å¤æ‚åº¦ä¸º O(logn)ï¼Œè¿™é‡Œç›¸è¾ƒäºç®€å•ç‰ˆçš„å¿«é€Ÿæ’åºçš„ç©ºé—´å¤æ‚åº¦ O(nlogn)æ˜¯æœ‰ä¼˜åŒ–çš„\næˆ‘åˆ›å»ºäº†ä¸€ä¸ªé›†åˆ jest å¯ä»¥æµ‹è¯•ç®—æ³•çš„é¶åœºé¡¹ç›®ï¼š\nhttps://github.com/Llane00/algorithm-range-tests\nå°†åŒæ­¥æ–‡ç« ä¸­çš„ä»£ç åˆ°è¿™ä¸ªé¡¹ç›®ä¸‹\nä½¿ç”¨ vscode çš„è¯»è€…å¯ä»¥å®‰è£…æ‹“å±•æ’ä»¶ jestï¼Œè¿™ä¸ªæ’ä»¶å¯ä»¥è‡ªåŠ¨æ£€æµ‹ test æ–‡ä»¶è‡ªåŠ¨è¿è¡Œï¼Œéå¸¸æ–¹ä¾¿ã€‚\næ„Ÿè°¢è€å§šçš„æ–‡ç«  æ‰‹å†™ç®—æ³•å¹¶è®°ä½å®ƒï¼šå¿«é€Ÿæ’åºï¼ˆæœ€æ˜“ç†è§£ç‰ˆï¼‰\n","description":"","id":27,"section":"algorithm","tags":["ç®—æ³•åŸºç¡€","å­¦ä¹ ç¬”è®°"],"title":"èœé¸Ÿå­¦ç®—æ³•-6-å¿«é€Ÿæ’åºå®Œæ•´ç‰ˆ","uri":"https://llane.xyz/algorithm/6-%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F%E5%AE%8C%E6%95%B4%E7%89%88/"},{"content":" è¿™ä¸ªç³»åˆ—æ˜¯æˆ‘è¯»å†´ç¾½è€å¸ˆåšå®¢çš„æ„Ÿæ‚Ÿï¼Œ\nåŠ å…¥äº†ä¸ªäººçš„è§£è¯»å’Œç»ƒä¹ é¢˜çš„è§£ç­”\n å…³äºæµ®ç‚¹æ•°ç²¾åº¦å¯¼è‡´ js çš„è®¡ç®—é”™è¯¯é—®é¢˜ï¼Œæˆ‘ä¹‹å‰åœ¨Js å¤§æ•°ç›¸åŠ æœ‰æåˆ°è¿‡ï¼Œé‚£è¿™ç¯‡æ–‡ç« å°†å†æ¬¡æ·±å…¥ç ”ç©¶å¯¼è‡´é”™è¯¯çš„åŸå› ã€‚\nECMAScript ä¸­çš„ Number ç±»å‹ä½¿ç”¨ IEEE754 æ ‡å‡†æ¥è¡¨ç¤ºæ•´æ•°å’Œæµ®ç‚¹æ•°å€¼ã€‚\nIEEE754 å…¨ç§°ä¸º IEEE äºŒè¿›åˆ¶æµ®ç‚¹æ•°ç®—æ•°æ ‡å‡†ï¼Œè¿™ä¸ªæ ‡å‡†å®šä¹‰äº†è¡¨ç¤ºæµ®ç‚¹æ•°çš„æ ¼å¼ç­‰å†…å®¹\nåœ¨ IEEE754 ä¸­ï¼Œè§„å®šäº†å››ç§è¡¨ç¤ºæµ®ç‚¹æ•°å€¼çš„æ–¹å¼ï¼šå•ç²¾ç¡®åº¦ï¼ˆ32 ä½ï¼‰ã€åŒç²¾ç¡®åº¦ï¼ˆ64 ä½ï¼‰ã€å»¶ä¼¸å•ç²¾ç¡®åº¦ä¸å»¶ä¼¸åŒç²¾ç¡®åº¦ã€‚\nECMAScript é‡‡ç”¨çš„æ˜¯åŒç²¾ç¡®åº¦ï¼Œç”¨ 64 ä½å­—èŠ‚å‚¨å­˜ä¸€ä¸ªæµ®ç‚¹æ•°\næµ®ç‚¹æ•°è½¬äºŒè¿›åˆ¶ 1020 åè¿›åˆ¶ï¼š\n1020 = 1 _ 10^3 + 0 _ 10^2 + 2 _ 10^1 + 0 _ 10^0\n1020 äºŒè¿›åˆ¶ï¼š\n1020 = 1 _ 2^9 + 1 _ 2^8 + 1 _ 2^7 + 1 _ 2^6 + 1 _ 2^5 + 1 _ 2^4 + 1 _ 2^3 + 1 _ 2^2 + 0 _ 2^1 + 0 _ 2^0\næˆ‘ä¹‹å‰ä¸€ç›´å¥½å¥‡ç”¨äºŒè¿›åˆ¶è¡¨ç¤ºå°æ•°æ˜¯ä»€ä¹ˆæ ·çš„ï¼Œå› ä¸ºè®¡ç®—å™¨å’Œç½‘ä¸Šçš„åœ¨çº¿è½¬äºŒè¿›åˆ¶éƒ½ä¸æ”¯æŒå°æ•°\nä½†ç»†æƒ³ä¸€ä¸‹ä¸€å®šè¿˜æ˜¯ç±»ä¼¼çš„ï¼Œæ¯”å¦‚ï¼š\n0.75 = a _ 2^-1 + b _ 2^-2 + c _ 2^-3 + d _ 2^-4 + \u0026hellip;\nåœ¨äºŒè¿›åˆ¶é‡Œ abcd åªèƒ½æ˜¯ 0 æˆ– 1\nè¦ç»§ç»­ç®—å‡ºä¸Šé¢çš„ abcd æ˜¯ 0 è¿˜æ˜¯ 1ï¼Œæˆ‘ä»¬åœ¨ç­‰å·ä¸¤è¾¹åŒæ—¶ä¹˜ä»¥ 2\n1 + 0.5 = a _ 2^0 + b _ 2^-1 + c _ 2^-2 + d _ 2^-3\u0026hellip;\na * 2^0 = aï¼Œ ç”±äº a åªèƒ½æ˜¯ 1 æˆ– 0ï¼Œè¿™é‡Œ a åº”è¯¥æ˜¯ç»„æˆ 1.5 é‡Œçš„æœ€å¤§å€¼ï¼Œæ‰€ä»¥ a ä¸º 1\nå‰©ä¸‹çš„çš„æ˜¯ï¼š\n0.5 = b _ 2^-1 + c _ 2^-2 + d * 2^-3\u0026hellip;\nå†æ¬¡ä¸¤è¾¹éƒ½ä¹˜ä»¥ 2\n1 + 0 = b _ 2^0 + c _ 2^-2 + d * 2^-3\u0026hellip;\nåŒä¸Šå¾—å‡º b ä¹Ÿæ˜¯ 1ï¼ŒåŒæ—¶ç­‰å·å·¦è¾¹å·²ç»ä¸º 0 äº†ï¼Œæ‰€ä»¥ 0.75 çš„äºŒè¿›åˆ¶å°±æ˜¯ 0.11\nç„¶è€Œä¸æ˜¯æ‰€æœ‰çš„æ•°éƒ½åƒ 0.75 è¿™ä¹ˆå¥½ç®—ï¼Œæˆ‘ä»¬æ¥ç®—ä¸‹ 0.1ï¼š\n1 2 3 4 5 6 7 8 9 10 11  0.1 = a * 2^-1 + b * 2^-2 + c * 2^-3 + d * 2^-4 + ... 0 + 0.2 = a * 2^0 + b * 2^-1 + c * 2^-2 + ... (a = 0) 0 + 0.4 = b * 2^0 + c * 2^-1 + d * 2^-2 + ... (b = 0) 0 + 0.8 = c * 2^0 + d * 2^-1 + e * 2^-2 + ... (c = 0) 1 + 0.6 = d * 2^0 + e * 2^-1 + f * 2^-2 + ... (d = 1) 1 + 0.2 = e * 2^0 + f * 2^-1 + g * 2^-2 + ... (e = 1) 0 + 0.4 = f * 2^0 + g * 2^-1 + h * 2^-2 + ... (f = 0) 0 + 0.8 = g * 2^0 + h * 2^-1 + i * 2^-2 + ... (g = 0) 1 + 0.6 = h * 2^0 + i * 2^-1 + j * 2^-2 + ... (h = 1) ....   ç„¶åä½ å°±ä¼šå‘ç°ï¼Œè¿™ä¸ªè®¡ç®—åœ¨ä¸åœçš„å¾ªç¯ï¼Œæ‰€ä»¥ 0.1 ç”¨äºŒè¿›åˆ¶è¡¨ç¤ºå°±æ˜¯ 0.00011001100110011â€¦â€¦\nIEEE754 ä¸­çš„å‚¨å­˜è§„åˆ™ IEEE754 çš„å‚¨å­˜è§„åˆ™å…¶å®å°±æ˜¯ç§‘å­¦è®¡æ•°æ³•:\n æ­£è´Ÿ _ è¿›åˆ¶çš„æŒ‡æ•° _ æœ‰ä¸€ä½ä¸ªä½çš„å°æ•°(x.x)\n    sign Exponent Mantissa     1 Bit 11 Bits 52 Bits    æˆ‘ä»¬çŸ¥é“-1020 åè¿›åˆ¶çš„ç§‘å­¦è®¡æ•°æ³•æ˜¯ -1 _ 10^3 _ 1.02\né‚£åœ¨è®¡ç®—æœºé‡Œæˆ‘ä»¬åªå…³æ³¨äºŒè¿›åˆ¶ï¼Œ\n0.1 çš„äºŒè¿›åˆ¶æ˜¯ 0.00011001100110011â€¦â€¦\nç§‘å­¦è®¡æ•°æ³•æ˜¯ 1 _ 2^-4 _ 1.1001100110011â€¦â€¦\näºŒè¿›åˆ¶çš„ç¬¬ä¸‰éƒ¨åˆ†çš„ä¸ªä½ä¸€å®šæ˜¯ 1ï¼Œåœ¨å‚¨å­˜çš„æ—¶å€™èƒ½çœä½ç½®å°±çœï¼Œè¿™ä¸ª 1 å°±ä¸å­˜å‚¨äº†ï¼Œåªå­˜å°æ•°ç‚¹åçš„æ•°å­—\nç”±äºç¬¬äºŒéƒ¨åˆ†çš„ Exponent æ˜¯å¯ä»¥ä¸ºè´Ÿæ•°çš„ï¼ˆå°æ•°ï¼‰ï¼Œ11 ä½å¯ä»¥å‚¨å­˜çš„èŒƒå›´æ˜¯ 0 ï½ 2046ï¼Œ\nä½†æ˜¯è¦åˆ†æ­£è´Ÿï¼Œæ‰€æœ‰å‚¨å­˜çš„èŒƒå›´æ˜¯-1023 ï½ 1023ï¼Œ\nä½†æ˜¯å­˜è´Ÿæ•°å¾ˆéº»çƒ¦ï¼Œæ‰€ä»¥ç”¨äº†ä¸€ä¸ªåŠæ³•ï¼šæŠŠ 0 å½“ä½œ 1023ï¼ŒæŠŠ 1023 å½“ä½œ 2046ï¼Œæ‰€æœ‰æ•°éƒ½åŠ ä¸Š 1023 å³ 0 ï½ 2048ï¼Œ\nå½“è¦ç”¨çš„æ—¶å€™å†å‡å» 1023ï¼ˆæŠŠ 1023 è®°åš biasï¼‰\nåœ¨è¿™ä¸ªæ ‡å‡†ä¸‹ï¼š\næˆ‘ä»¬ä¼šç”¨ 1 ä½å­˜å‚¨ Sï¼Œ0 è¡¨ç¤ºæ­£æ•°ï¼Œ1 è¡¨ç¤ºè´Ÿæ•°ã€‚\nç”¨ 11 ä½å­˜å‚¨ E + biasï¼Œå¯¹äº 11 ä½æ¥è¯´ï¼Œbias çš„å€¼æ˜¯ 2^(11-1) - 1ï¼Œä¹Ÿå°±æ˜¯ 1023ã€‚\nç”¨ 52 ä½å­˜å‚¨ Fractionã€‚\nä¸¾ä¸ªä¾‹å­ï¼Œå°±æ‹¿ 0.1 æ¥çœ‹ï¼Œå¯¹åº”äºŒè¿›åˆ¶æ˜¯ 1 _ 1.1001100110011â€¦â€¦ _ 2^-4ï¼Œ\nSign æ˜¯ 0ï¼Œ\nE + bias æ˜¯ -4 + 1023 = 1019ï¼Œ1019 ç”¨äºŒè¿›åˆ¶è¡¨ç¤ºæ˜¯ 1111111011ï¼Œ\nFraction æ˜¯ 1001100110011â€¦â€¦\n0.1 å¯¹åº” 64 ä¸ªå­—èŠ‚ä½çš„å®Œæ•´è¡¨ç¤ºå°±æ˜¯ï¼š\n0 01111111011 1001100110011001100110011001100110011001100110011010\nåŒç†, 0.2 è¡¨ç¤ºçš„å®Œæ•´è¡¨ç¤ºæ˜¯ï¼š\n0 01111111100 1001100110011001100110011001100110011001100110011010\næ‰€ä»¥å½“ 0.1 å­˜ä¸‹æ¥çš„æ—¶å€™ï¼Œå°±å·²ç»å‘ç”Ÿäº†ç²¾åº¦ä¸¢å¤±ï¼Œå½“æˆ‘ä»¬ç”¨æµ®ç‚¹æ•°è¿›è¡Œè¿ç®—çš„æ—¶å€™ï¼Œä½¿ç”¨çš„å…¶å®æ˜¯ç²¾åº¦ä¸¢å¤±åçš„æ•°\nåœ¨è¿ç®—æ—¶ä¹Ÿä¼šå‘ç”Ÿç²¾åº¦ä¸¢å¤±ï¼Œå‚¨å­˜å’Œè¿ç®—éƒ½æœ‰å¯èƒ½å‘ç”Ÿè¶…å‡ºä½æ•°ç²¾åº¦ä¸¢å¤±ã€‚\n","description":"","id":28,"section":"restart-js","tags":["jsåŸºç¡€","å­¦ä¹ ç¬”è®°"],"title":"ä»å¤´å­¦ä¹ js-16-æµ®ç‚¹æ•°ç²¾åº¦","uri":"https://llane.xyz/restart-js/16-%E6%B5%AE%E7%82%B9%E6%95%B0%E7%B2%BE%E5%BA%A6/"},{"content":" æˆ‘æƒ³çŸ¥é“è¿™æ˜¯ä¸ºä»€ä¹ˆ \u0026ndash;è´¹æ›¼\n ã€Šå½’å¹¶ã€‹æŒ‡çš„æ˜¯é€’å½’+åˆå¹¶ï¼Œæ˜¯å…¸å‹çš„åˆ†è€Œæ²»ä¹‹ç®—æ³•\næŠŠä¸€ä¸ªæ•°ç»„ä¸€åˆ†ä¸ºäºŒï¼Œé€’å½’åœ°æ’åºå¥½æ¯ä¸€éƒ¨åˆ†ï¼Œæœ€ååˆå¹¶\nå¹¶ è¿™ä¸ªç®—æ³•çš„æ ¸å¿ƒç‚¹æ˜¯å¦‚ä½•åˆå¹¶ä¸¤ä¸ªå„è‡ªå·²ç»æ’å¥½åºçš„æ•°ç»„ï¼Œæ‰€ä»¥å…ˆä»åˆå¹¶å¼€å§‹\nä¸¤æƒç›¸è¾ƒå–å…¶è½»\næ•°ç»„ A æœ‰ä¸€ä¸ªæŒ‡é’ˆ i\næ•°ç»„ B æœ‰ä¸€ä¸ªæŒ‡é’ˆ j\nå°†ä»–ä»¬ä»å¤´ä¸€ä¸ªä¸ªæ¯”è¾ƒï¼Œè¾ƒå°çš„å°±æ”¾åˆ°ç»“æœæ•°ç»„é‡Œï¼Œç„¶åå¯¹åº”çš„æŒ‡é’ˆ++\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16  let left = [2, 4, 6, 9], i = 0 let right = [1, 3, 6, 10, 11], j = 0 let result = [] while (i \u0026lt; left.length \u0026amp;\u0026amp; j \u0026lt; right.length) { if (left[i] \u0026lt; right[j]) { result.push(left[i]) i++ } else { result.push(right[j]) j++ } } console.log(result) //1,2,3,4,6,6,9   ä»”ç»†çœ‹ result é‡Œè¿˜æ¼äº† right é‡Œçš„ 10 å’Œ 11ï¼Œå› ä¸º left çš„æ•°å­—éƒ½å·²ç»æ”¾åˆ° result é‡Œäº†ï¼Œi==left.lengthï¼Œå¾ªç¯å°±è·³å‡ºäº†\næ‰€æœ‰è¿˜éœ€è¦å¤„ç†è¿™ç§æƒ…å†µ\n1 2 3 4 5 6  if (i \u0026lt; left.length) { result.push(...left.slice(i)) } if (j \u0026lt; right.length) { result.push(...right.slice(j)) }   ä¸ºäº†æ¸…æ™°è¡¨è¾¾äºŒè€…è°éƒ½å¯èƒ½å‰©ä½™ï¼Œè¿™é‡Œæ²¡æœ‰ç›´æ¥ä½¿ç”¨ if\u0026hellip;elseã€‚äº‹å®ä¸Šä¸ä¼šå‡ºç°äºŒè€…éƒ½æœ‰å‰©ä½™æƒ…å†µçš„ï¼ˆwhile å¾ªç¯ä¿è¯çš„ï¼‰ã€‚å¦å¤–ï¼Œè¿™é‡Œä½¿ç”¨äº†æ•°ç»„ç›¸å…³ APIï¼ˆconcat ä¹Ÿå¯ä»¥ï¼‰ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨å¾ªç¯æ¥åšã€‚\nåˆ† æŠŠä¸€ä¸ªæ•°ç»„ä¸€åˆ†ä¸ºäºŒ\n1 2 3  let middlePoint = Math.floor(array.length / 2) //lengthå¯èƒ½ä¸ºå¥‡æ•°ï¼Œå‘ä¸‹å–æ•´ let left = array.slice(0, middlePoint) let right = array.slice(middlePoint)   é€’å½’ é€’å½’çš„æ­¥éª¤ï¼š 1.æ•°ç»„åˆ†æˆä¸¤åŠ 2.é€’å½’å¤„ç†å·¦è¾¹çš„éƒ¨åˆ† 3.é€’å½’å¤„ç†å³è¾¹çš„éƒ¨åˆ† 4.åˆå¹¶äºŒè€…çš„ç»“æœ\n1 2 3 4 5 6  function mergeSort(array) { let middlePoint = Math.floor(array.length / 2) let left = merageSort(array.slice(0, middle)) let right = mergeSort(array.slice(middle)) return merge(left, right) }   è¿™é‡Œé€’å½’çš„å‡ºå£æ˜¯\nå½“æ•°ç»„å…ƒç´ ä¸ªæ•°å°äº 2 æ—¶ï¼Œå°±å·²ç»æ˜¯æ’å¥½åºçš„ä¸ç”¨å†åˆ†äº†\n1 2 3  if (array.length \u0026lt; 2) { return array }   ä¸‹é¢æ˜¯å®Œæ•´ä»£ç ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34  function merge(left, right) { let i = 0 let j = 0 let result = [] while (i \u0026lt; left.length \u0026amp;\u0026amp; j \u0026lt; right.length) { if (left[i] \u0026lt; right[j]) { result.push(left[i]) i++ } else { result.push(right[j]) j++ } } if (i \u0026lt; left.length) { result.push(...left.slice(i)) } if (j \u0026lt; right.length) { result.push(...right.slice(j)) } return result } function mergeSort(array) { if (array.length \u0026lt; 2) { return array } let middlePoint = Math.floor(array.length / 2) let left = mergeSort(array.slice(0, middlePoint)) let right = mergeSort(array.slice(middlePoint)) return merge(left, right) }   å¤æ‚åº¦ å½’å¹¶æ’åºéœ€è¦é¢å¤–ç©ºé—´ï¼Œç©ºé—´å¤æ‚åº¦ä¸º O(n)ï¼Œä¸æ˜¯æœ¬åœ°æ’åºï¼Œç›¸ç­‰å…ƒç´ æ˜¯ä¸ä¼šäº¤æ¢å‰åé¡ºåºï¼Œå› è€Œæ˜¯ç¨³å®šæ’åºã€‚\næ—¶é—´å¤æ‚åº¦ä¸º O(nlogn)ï¼Œæ˜¯æ¯”è¾ƒä¼˜ç§€çš„ç®—æ³•\næˆ‘åˆ›å»ºäº†ä¸€ä¸ªé›†åˆ jest å¯ä»¥æµ‹è¯•ç®—æ³•çš„é¶åœºé¡¹ç›®ï¼š\nhttps://github.com/Llane00/algorithm-range-tests\nå°†åŒæ­¥æ–‡ç« ä¸­çš„ä»£ç åˆ°è¿™ä¸ªé¡¹ç›®ä¸‹\nä½¿ç”¨ vscode çš„è¯»è€…å¯ä»¥å®‰è£…æ‹“å±•æ’ä»¶ jestï¼Œè¿™ä¸ªæ’ä»¶å¯ä»¥è‡ªåŠ¨æ£€æµ‹ test æ–‡ä»¶è‡ªåŠ¨è¿è¡Œï¼Œéå¸¸æ–¹ä¾¿ã€‚\næ„Ÿè°¢è€å§šçš„æ–‡ç«  æ‰‹å†™ç®—æ³•å¹¶è®°ä½å®ƒï¼šå½’å¹¶æ’åº\n","description":"","id":29,"section":"algorithm","tags":["ç®—æ³•åŸºç¡€","å­¦ä¹ ç¬”è®°"],"title":"èœé¸Ÿå­¦ç®—æ³•-5-å½’å¹¶æ’åº","uri":"https://llane.xyz/algorithm/5-%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F/"},{"content":" è¿™ä¸ªç³»åˆ—æ˜¯æˆ‘è¯»å†´ç¾½è€å¸ˆåšå®¢çš„æ„Ÿæ‚Ÿï¼Œ\nåŠ å…¥äº†ä¸ªäººçš„è§£è¯»å’Œç»ƒä¹ é¢˜çš„è§£ç­”\n æœ¬æ–‡è®²è§£javascriptçš„å„ç§ç»§æ‰¿å’Œä¼˜ç¼ºç‚¹\n1.åŸå‹é“¾ç»§æ‰¿ 1 2 3 4 5 6 7 8 9 10 11 12 13 14  function Parent() { this.name = \u0026#34;Neo\u0026#34; } Parent.prototype.getName = function() { console.log(this.name) } function Child() {} Child.prototype = new Parent() var child1 = new Child() child1.getName()   é—®é¢˜ï¼š\n1.å¼•ç”¨ç±»å‹çš„å±æ€§è¢«æ‰€æœ‰å®ä¾‹å…±äº«ï¼Œçœ‹ä¾‹å­ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14  function Parent() { this.names = [\u0026#34;Anderson\u0026#34;, \u0026#34;Neo\u0026#34;]; } function Child(){} Child.prototype = new Parent() var child1 = new Child() var child2 = new Child() child1.names.push(\u0026#34;the one\u0026#34;) console.log(child1.names) //[\u0026#39;Anderson\u0026#39;, \u0026#39;Neo\u0026#39;, \u0026#39;the one\u0026#39;] console.log(child2.names) //[\u0026#39;Anderson\u0026#39;, \u0026#39;Neo\u0026#39;, \u0026#39;the one\u0026#39;] child2ä¸child1å…±äº«äº†åŸå‹Parentä¸Šçš„å±æ€§names    2.åœ¨åˆ›å»ºChildå®ä¾‹æ—¶ï¼Œä¸èƒ½å‘Parentä¼ å‚\n2.å€Ÿç”¨æ„é€ å‡½æ•°ï¼ˆç»å…¸ç»§æ‰¿ï¼‰ 1 2 3 4 5 6 7 8 9 10 11 12 13 14  function Parent() { this.names = [\u0026#34;Anderson\u0026#34;, \u0026#34;Neo\u0026#34;] } function Child() { Parent.call(this) } var child1 = new Child() child1.names.push(\u0026#34;the one\u0026#34;); console.log(child1.names) //[\u0026#34;Anderson\u0026#34;, \u0026#34;Neo\u0026#34;, \u0026#34;the one\u0026#34;]  var child2 = new Child() console.log(child2.names) //[\u0026#34;Anderson\u0026#34;, \u0026#34;Neo\u0026#34;]   ä¼˜ç‚¹ï¼š\n1.é¿å…äº†å¼•ç”¨ç±»å‹çš„å±æ€§è¢«æ‰€æœ‰å®ä¾‹å…±äº«\n2.å¯åœ¨åœ¨Childä¸­å‘Parentsä¼ å‚\nä¾‹å­ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13  function Parent(name) { this.name = name } function Child(name) { Parent.call(this, name) } var child1 = new Child(\u0026#34;child_A\u0026#34;) var child2 = new Child(\u0026#34;child_B\u0026#34;) console.log(child1.name) //child_A console.log(child2.name) //child_B   ç¼ºç‚¹ï¼š\næ–¹æ³•éƒ½åœ¨æ„é€ å‡½æ•°ä¸­å®šä¹‰ï¼Œæ¯æ¬¡åˆ›å»ºå®ä¾‹éƒ½ä¼šè°ƒç”¨ä¸€éæ–¹æ³•\n3.ç»„åˆç»§æ‰¿ 1çš„åŸå‹å’Œ2çš„æ„é€ å‡½æ•°ç»§æ‰¿çš„ç»“åˆ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29  function Parent(name) { this.name = name; this.colors = [\u0026#39;red\u0026#39;, \u0026#39;blue\u0026#39;, \u0026#39;green\u0026#39;] } Parent.prototype.getName = function() { console.log(this.name) } function Child(name, age) { Parent.call(this, name) this.age = age } Child.prototype = new Parent(); Child.prototype.constructor = Child; var child1 = new Child(\u0026#34;Neo\u0026#34;, 20) child1.colors.push(\u0026#39;black\u0026#39;) console.log(child1.name) // Neo console.log(child1.age) // 20 console.log(child1.colors) // [\u0026#34;red\u0026#34;, \u0026#34;blue\u0026#34;, \u0026#34;green\u0026#34;, \u0026#34;black\u0026#34;]  var chlid2 = new Child(\u0026#34;Smith\u0026#34;ï¼Œ 28) console.log(child2.name); // Smith console.log(child2.age); // 28 console.log(child2.colors); // [\u0026#34;red\u0026#34;, \u0026#34;blue\u0026#34;, \u0026#34;green\u0026#34;]    ä¼˜ç‚¹ï¼šèåˆåŸå‹é“¾ç»§æ‰¿å’Œæ„é€ å‡½æ•°çš„ä¼˜ç‚¹ï¼Œæ˜¯ JavaScript ä¸­æœ€å¸¸ç”¨çš„ç»§æ‰¿æ¨¡å¼\nç¼ºç‚¹ï¼šç¼ºå°‘å°è£…æ€§\n4.åŸå‹å¼å°è£… 1 2 3 4 5  function createObj(o) { function F(){}; F.prototype = o; return new F(); }   æ–°åˆ›å»ºä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œè¿™ä¸ªæ„é€ å‡½æ•°çš„åŸå‹è®¾ä¸ºçˆ¶å¯¹è±¡ï¼Œè¿”å›è¿™ä¸ªæ„é€ å‡½æ•°åˆ›å»ºçš„å®ä¾‹å¯¹è±¡\nè¿™å°±æ˜¯ES5 Object.createçš„æ¨¡æ‹Ÿå®ç°ï¼Œå°†ä¼ å…¥çš„å¯¹è±¡ä½œä¸ºåˆ›å»ºçš„å¯¹è±¡çš„åŸå‹\nç¼ºç‚¹ï¼šåŒ…å«å¼•ç”¨ç±»å‹çš„å±æ€§å€¼ä¼šåœ¨å®ä¾‹ä¹‹é—´å…±äº«ï¼Œè¿™ç‚¹å’ŒåŸå‹ç»§æ‰¿ä¸€æ ·\n1 2 3 4 5 6 7 8 9 10 11 12 13  var person = { name: \u0026#34;Neo\u0026#34;, friends: [\u0026#34;Morpheus\u0026#34;, \u0026#34;Trinity\u0026#34;] } var person1 = createObj(person) var person2 = createObj(person) person1.name = \u0026#39;Agent\u0026#39;; console.log(person2.name) //Neo  person1.friends.push(\u0026#34;Smith\u0026#34;) console.log(person2.friends) //[\u0026#34;Morpheus\u0026#34;, \u0026#34;Trinity\u0026#34;, \u0026#34;Smith\u0026#34;]   è¿™é‡Œä¿®æ”¹person1.nameçš„å€¼ï¼Œperson2çš„å€¼æ²¡æœ‰æ”¹å˜ï¼Œå¹¶ä¸æ˜¯å› ä¸ºperson1å’Œperson2æœ‰ç‹¬ç«‹çš„nameå€¼ï¼Œè€Œæ˜¯å› ä¸ºperson1.name = \u0026ldquo;Agent\u0026rdquo;ï¼Œç»™person1æ·»åŠ äº†nameå€¼\n5.å¯„ç”Ÿå¼ç»§æ‰¿ åˆ›å»ºä¸€ä¸ªä»…ç”¨äºå°è£…ç»§æ‰¿è¿‡ç¨‹çš„å‡½æ•°ï¼Œè¯¥å‡½æ•°åœ¨å†…éƒ¨ä»¥æŸç§å½¢å¼æ¥åšå¢å¼ºå¯¹è±¡ï¼Œæœ€åè¿”å›å¯¹è±¡\n1 2 3 4 5 6 7  function createObj(o) { var clone = Object.create(o) clone.sayHi = function() { console.log(\u0026#34;Hi\u0026#34;) } return clone }   ç¼ºç‚¹å’Œå€Ÿç”¨æ„é€ å‡½æ•°æ¨¡å¼ä¸€æ ·ï¼Œæ¯æ¬¡ç”Ÿæˆä¸€ä¸ªæ–°çš„å¯¹è±¡éƒ½ä¼šåˆ›å»ºä¸€éæ–¹æ³•\n6.å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿ å†çœ‹ä¸€æ¬¡ç»„åˆç»§æ‰¿å¼çš„ä»£ç \n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17  function Parent(name) { this.name = name this.colors = [\u0026#39;red\u0026#39;, \u0026#39;blue\u0026#39;, \u0026#39;green\u0026#39;] } Parent.prototype.getName = function () { console.log(this.name) } function Child(name, age) { Parent.call(this, name) this.age = age } Child.prototype = new Parent() var child1 = new Child(\u0026#34;Neo\u0026#34;, 20)   ç»„åˆç»§æ‰¿æœ€å¤§çš„ç¼ºç‚¹æ˜¯ä¼šè°ƒç”¨ä¸¤æ¬¡çˆ¶æ„é€ å‡½æ•°\nä¸€æ¬¡æ˜¯åœ¨è®¾ç½®Child.prototype = new Parent()çš„æ—¶å€™\nä¸€æ¬¡æ˜¯åœ¨å®ä¾‹åŒ–Childæ–°å¯¹è±¡çš„æ—¶å€™ new Child(\u0026ldquo;Neo\u0026rdquo;, 20),\nåœ¨newçš„æ—¶å€™ä¼šæ‰§è¡ŒParent.call(this, name)\næ‰€ä»¥æ­¤æ—¶\nChild.prototype\nå’Œ\nchild1\néƒ½æœ‰ä¸€ä¸ªcolorå±æ€§ï¼Œå€¼ä¸º[\u0026lsquo;red\u0026rsquo;, \u0026lsquo;blue\u0026rsquo;, \u0026lsquo;green\u0026rsquo;]\næˆ‘ä»¬å¯ä»¥ç»§ç»­æ”¹è¿›æ–¹æ³•æ¥é¿å…è¿™ä¸€æ¬¡çš„é‡å¤è°ƒç”¨\nä¸ä½¿ç”¨Child.prototype = new Parent()ï¼Œè€Œæ˜¯é—´æ¥çš„è®©Child.prototypeå¯ä»¥è®¿é—®åˆ°Parent.prototype\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20  function Parent(name) { this.name = name this.colors = [\u0026#39;red\u0026#39;, \u0026#39;blue\u0026#39;, \u0026#39;green\u0026#39;] } Parent.prototype.getName = function() { console.log(this.name) } function Child(name, age) { this.name = name this.age = age } //å…³å¥çš„3æ­¥ function F(){} F.prototype = Parent.prototype Child.prototype = new F() var child3 = new Child(\u0026#34;Neo\u0026#34;, 25)   æœ€åæˆ‘ä»¬æ¥å°è£…ä¸€ä¸‹è¿™ä¸ªç»§æ‰¿æ–¹æ³•ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14  function object(o) { function F(){} F.prototype = o return new F() } function prototype(Child, Parent) { var prototype = object(Parent.prototype) prototype.constructor = Child Child.prototype = prototype } //ä½¿ç”¨æ—¶ prototype(Child, Parent)   è¿™ç§æ–¹å¼çš„é«˜æ•ˆç‡ä½“ç°åœ¨å®ƒåªè°ƒç”¨äº†ä¸€æ¬¡Parentæ„é€ å‡½æ•°ï¼Œå› æ­¤é¿å…äº†åœ¨Parent.prototypeä¸Šåˆ›å»ºäº†ä¸å¿…è¦çš„ã€å¤šä½™çš„å±æ€§ã€‚ä¸æ­¤åŒæ—¶åŸå‹é“¾è¿˜èƒ½ä¿æŒä¸å˜ï¼Œå¯ä»¥æ­£å¸¸ä½¿ç”¨instanceofå’ŒisPrototypeOfã€‚\nå¼€å‘äººå‘˜æ™®éè®¤ä¸ºå¯„ç”Ÿç»„åˆå¼ç»§æ‰¿æ˜¯å¼•ç”¨ç±»å‹æœ€ç†æƒ³çš„ç»§æ‰¿èŒƒå¼ã€‚\n","description":"","id":30,"section":"restart-js","tags":["jsåŸºç¡€","å­¦ä¹ ç¬”è®°"],"title":"ä»å¤´å­¦ä¹ js-15-ç»§æ‰¿","uri":"https://llane.xyz/restart-js/15-%E7%BB%A7%E6%89%BF/"},{"content":" æˆ‘æƒ³çŸ¥é“è¿™æ˜¯ä¸ºä»€ä¹ˆ \u0026ndash;è´¹æ›¼\n ä»æœ‰åºåºåˆ—çš„å°¾éƒ¨å¼€å§‹ï¼Œé€ä¸ªä¸ç›®æ ‡å…ƒç´ æ¯”è¾ƒï¼Œå¦‚æœå¤§äºè¯¥å…ƒç´ ï¼Œè¯¥å…ƒç´ éœ€è¦åç§»\næ ¸å¿ƒæ˜¯å¦‚ä½•åœ¨æœ‰åºåºåˆ—é‡Œæ‰¾åˆ°æ­£ç¡®çš„æ’å…¥ä½ç½®\næœ‰ç‚¹åƒæ‰“ç‰Œå¼€å§‹çš„æ—¶å€™æ•´ç†æ‰‹ç‰Œï¼Œæ¯æ¬¡éƒ½æŠŠæ–°å‘çš„ç‰Œä»æœ€å³ä¾§çš„æ‰‹ç‰Œä¸€å¼ å¼ å¾€å·¦çœ‹ï¼ŒæŠŠæ–°ç‰Œæ’å…¥å·²ç»æ’å¥½é¡ºåºçš„æ‰‹ç‰Œé‡Œã€‚\nç¼“å­˜ç›®æ ‡å…ƒç´ ï¼Œä»æœ‰åºåºåˆ—å°¾éƒ¨å¼€å§‹é€ä¸ªæ¯”è¾ƒï¼Œ\nå¦‚æœå½“å‰åºåˆ—çš„æ•°å­—å¤§äºç›®æ ‡å…ƒç´ åˆ™æŠŠå½“å‰åºåˆ—çš„æ•°å­—åç§»åˆ°ç›®æ ‡å…ƒç´ çš„ä½ç½®ä¸Šï¼ˆç›®æ ‡å…ƒç´ çš„å€¼å·²ç»ç¼“å­˜äº†ï¼ŒåŒæ—¶åç§»åå½“å‰åºåˆ—æ•°å­—çš„ä½ç½®å˜ä¸ºç©ºï¼‰ï¼Œ\nç»§ç»­é€ä¸ªæ¯”è¾ƒï¼Œå¦‚æœç›®æ ‡å…ƒç´ å¤§äºå½“å‰åºåˆ—æ•°å­—ï¼Œå½“å‰åºåˆ—æ•°å­—å°±åç§»\nå¦‚æœå°äºç­‰äºå½“å‰åºåˆ—æ•°å­—å°±æŠŠç›®æ ‡å…ƒç´ æ’å…¥ ä¸Šä¸€æ¬¡ç§»åŠ¨åºåˆ—æ•°å­—åçš„ç©ºä½é‡Œ\n1 2 3 4 5 6 7 8 9 10 11 12  function insertionSort(array) { for (let i = 0; i \u0026lt; array.lenth; i++) { let j = i let target = array[j] while (j \u0026gt; 0 \u0026amp;\u0026amp; array[j - 1] \u0026gt; target) { array[j] = array[j - 1] j-- } array[j] = target } return array }   å¤æ‚åº¦ \u0026amp;\u0026amp; æ€»ç»“ æ’å…¥æ’åºä¸éœ€è¦é¢å¤–ç©ºé—´ï¼Œæ˜¯æœ¬åœ°æ’åºï¼Œç›¸ç­‰å…ƒç´ æ˜¯ä¸ä¼šäº¤æ¢å‰åé¡ºåºï¼Œå› è€Œä¹Ÿæ˜¯ç¨³å®šæ’åºï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(n^2)ï¼Œé€‚ç”¨äºå°‘é‡æ•°æ®æ’åºã€‚ç›¸æ¯”å†’æ³¡æ’åºå’Œé€‰æ‹©æ’åºï¼Œæ’å…¥æ’åºçš„ä½¿ç”¨ç›¸å¯¹å¤šä¸€äº›ã€‚å› ä¸ºå‰ä¸¤è€…æ˜¯äº¤æ¢æ’åºï¼Œæœ¬è´¨ä¸Šéœ€è¦ 3 æ¬¡åŸå­æ“ä½œçš„ã€‚\næˆ‘åˆ›å»ºäº†ä¸€ä¸ªé›†åˆ jest å¯ä»¥æµ‹è¯•ç®—æ³•çš„é¶åœºé¡¹ç›®ï¼š\nhttps://github.com/Llane00/algorithm-range-tests\nåç»­çš„æ–‡ç« å°†åŒæ­¥ä»£ç åˆ°è¿™ä¸ªé¡¹ç›®ä¸‹\nä½¿ç”¨ vscode çš„è¯»è€…å¯ä»¥å®‰è£…æ‹“å±•æ’ä»¶ jestï¼Œè¿™ä¸ªæ’ä»¶å¯ä»¥è‡ªåŠ¨æ£€æµ‹ test æ–‡ä»¶è‡ªåŠ¨è¿è¡Œï¼Œéå¸¸æ–¹ä¾¿ã€‚\næ„Ÿè°¢è€å§šçš„æ–‡ç«  æ‰‹å†™ç®—æ³•å¹¶è®°ä½å®ƒï¼šæ’å…¥æ’åº\n","description":"","id":31,"section":"algorithm","tags":["ç®—æ³•åŸºç¡€","å­¦ä¹ ç¬”è®°"],"title":"èœé¸Ÿå­¦ç®—æ³•-4-æ’å…¥æ’åº","uri":"https://llane.xyz/algorithm/4-%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F/"},{"content":" è¿™ä¸ªç³»åˆ—æ˜¯æˆ‘è¯»å†´ç¾½è€å¸ˆåšå®¢çš„æ„Ÿæ‚Ÿï¼Œ\nåŠ å…¥äº†ä¸ªäººçš„è§£è¯»å’Œç»ƒä¹ é¢˜çš„è§£ç­”\n æœ¬æ–‡ä¼šä»‹ç»ä¸åŒåˆ›å»ºå¯¹è±¡çš„æ–¹æ³•ï¼Œæ¥æ¢ç©¶ä¸åŒè§£å†³æ–¹æ¡ˆçš„ä¼˜ç¼ºç‚¹\n1.å·¥å‚æ¨¡å¼ åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„å¯¹è±¡ï¼Œç„¶åç»™å®ƒåŠ ä¸Šå±æ€§å’Œæ–¹æ³•ï¼Œæœ€åè¿”å›è¿™ä¸ªå¯¹è±¡\n1 2 3 4 5 6 7 8  function createPerson(name){ var obj = new Object(); obj.name = name; obj.getName = function () { console.log(this.name) }; return obj }   ä¼˜ç‚¹ï¼šç®€å•ç›´æ¥\nç¼ºç‚¹ï¼šå¯¹è±¡æ— æ³•è¯†åˆ«ï¼Œæ‰€æœ‰å®ä¾‹çš„åŸå‹å…¨éƒ½ç›´æ¥æŒ‡å‘Object.prototype\n2.æ„é€ å‡½æ•°æ¨¡å¼ åˆ›å»ºä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œç„¶ååˆ©ç”¨newæ¥åˆ›å»ºå…¶å®ä¾‹\n1 2 3 4 5 6 7 8  function Person(name) { this.name = name; this.getName = function (){ console.log(this.name); } } let Neo2 = new Person(\u0026#34;Neo\u0026#34;);   ä¼˜ç‚¹ï¼šæ‰€æœ‰å®ä¾‹èƒ½å½’ç±»ä¸ºä¸€ä¸ªç‰¹å®šçš„åŸå‹äº†\nç¼ºç‚¹ï¼šæ¯æ¬¡åˆ›å»ºå®ä¾‹æ—¶ï¼Œæ¯ä¸ªæ–¹æ³•éƒ½è¦è¢«åˆ›å»ºä¸€æ¬¡ï¼Œè€Œå®é™…ä¸Šæ¯ä¸ªå®ä¾‹ç”¨çš„æ–¹æ³•æ˜¯ä¸€æ ·çš„ï¼Œè¿™é€ æˆäº†ä¸å¿…è¦çš„æ•°æ®é‡å¤\n2.1æ„é€ å‡½æ•°æ¨¡å¼ä¼˜åŒ– æˆ‘ä»¬å°è¯•è§£å†³2ä¸­çš„ç¼ºç‚¹ï¼Œå¾ˆå®¹æ˜“æƒ³åˆ°å»æŠŠæ„é€ å‡½æ•°é‡Œçš„æ–¹æ³•æŠ½å‡ºæ¥ï¼Œç„¶ååªè¦æŠŠæ„é€ å‡½æ•°çš„æ–¹æ³•æŒ‡å‘æŠ½å‡ºçš„æ–¹æ³•å°±å¥½äº†\n1 2 3 4 5 6 7 8 9 10  function getName() { console.log(this.name) } function Person(name) { this.name = name; this.getName = getName; } let Neo2 = new Person(\u0026#34;Neo\u0026#34;)   ä¼˜ç‚¹ï¼šä¸ç”¨é¢å¤–ç”Ÿæˆé‡å¤çš„æ–¹æ³•å¯¹è±¡äº†ï¼Œæ–¹æ³•å¯ä»¥æŠ½å‡ºå»äº†\nç¼ºç‚¹ï¼šå› ä¸ºæ–¹æ³•è¢«æŠ½å‡ºå»äº†ï¼Œå¤±å»äº†å°è£…æ€§\n3.åŸå‹æ¨¡å¼ å°è¯•æŠŠå±æ€§å’Œæ–¹æ³•éƒ½åŠ åˆ°æ„é€ å‡½æ•°çš„åŸå‹ä¸Šå»ï¼Œå†åˆ©ç”¨new æ„é€ å‡½æ•°æ¥æ‰¹é‡åˆ›å»ºå¯¹è±¡\n1 2 3 4 5 6 7 8  function Person(name){} Person.prototype.name = \u0026#34;Neo\u0026#34;; Person.prototype.getName = function(){ console.log(this.name) // } let Neo3 = new Person()   ä¼˜ç‚¹ï¼šè§£å†³äº†åœ¨åˆ›å»ºå¤šä¸ªå¯¹è±¡çš„æ—¶å€™ä¸ä¼šåˆ›å»ºé‡å¤çš„æ–¹æ³•å¯¹è±¡\nç¼ºç‚¹ï¼šæ„é€ å‡½æ•°ä¸èƒ½æ¥å—å®ä¾‹åˆå§‹åŒ–å‚æ•°nameï¼Œä¸”æ‰€æœ‰åœ¨åŸå‹ä¸Šçš„å±æ€§å’Œæ–¹æ³•éƒ½ä¼šè¢«å…±äº«ï¼ˆæ²¡æœ‰å°è£…æ€§ï¼‰\n3.1åŸå‹æ¨¡å¼ä¼˜åŒ– 1 2 3 4 5 6 7 8 9 10  function Person(name){} Person.prototype = { name: \u0026#34;Neo\u0026#34;, getName: function(){ console.log(this.name) } } let Neo3 = new Person()   ä¼˜ç‚¹ï¼šæŠŠå¯¹åŸå‹çš„èµ‹å€¼è¿‡ç¨‹å°è£…åŒ–äº†\nç¼ºç‚¹ï¼šç›´æ¥èµ‹å€¼æ„é€ å‡½æ•°çš„åŸå‹ï¼Œä½¿å¾—åŸå‹çš„constructorå±æ€§ä¸¢å¤±\n3.2åŸå‹æ¨¡å¼å†ä¼˜åŒ– 1 2 3 4 5 6 7 8 9 10 11  function Person(name) {} Person.prototype = { constructor: Person, name: \u0026#34;Neo\u0026#34;, getName: function() { console.log(this.name) } } let Neo3 = new Person()   ä¼˜ç‚¹ï¼šè¿™æ¬¡å¯ä»¥è¡¥å…¨ä¸¢å¤±äº†constructorå±æ€§äº†\nç¼ºç‚¹ï¼šä¾æ—§ä¸èƒ½åˆå§‹åŒ–å‚æ•°ï¼Œå¯¹newå‡ºæ¥çš„å®ä¾‹ä¹Ÿæ²¡æœ‰è§£å†³å¿…é¡»å…±äº«æ‰€æœ‰å±æ€§å’Œæ–¹æ³•é—®é¢˜\n4.ç»„åˆæ¨¡å¼ ç»“åˆæ„é€ æ¨¡å¼å’ŒåŸå‹æ¨¡å¼çš„ä¼˜ç‚¹\n1 2 3 4 5 6 7 8 9 10 11 12  function Person(name) { this.name = name; } Person.prototype = { constructor: Person, getName: function() { console.log(this.name) } } let Neo4 = new Person(\u0026#34;Neo\u0026#34;)   ä¼˜ç‚¹ï¼šå¯ä»¥åˆå§‹åŒ–ï¼Œä¸ç”¨é‡å¤ç”Ÿæˆç›¸åŒçš„å‡½æ•°å¯¹è±¡\nç¼ºç‚¹ï¼šç»“æ„ä¸Šå¿…é¡»åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†\n4.1åŠ¨æ€åŸå‹æ¨¡å¼ 1 2 3 4 5 6 7 8 9 10  function Person(name){ this.name = name; if(typeof this.getName != \u0026#34;function\u0026#34;) { Person.prototype.getName = fucntion() { console.log(this.name) } } } var person1 = new Person(\u0026#34;Neo\u0026#34;);   æ³¨æ„ï¼šä½¿ç”¨åŠ¨æ€åŸå‹æ¨¡å¼æ—¶ï¼Œä¸èƒ½ç”¨å¯¹è±¡å­—é¢é‡é‡å†™åŸå‹\nå¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22  function Person(name) { this.name = name; if (typeof this.getName != \u0026#34;function\u0026#34;) { //æ­¤å¤„ç›´æ¥ç”¨ç”¨å¯¹è±¡å­—é¢é‡é‡å†™åŸå‹ï¼Œå°†ä¼šå¼•å‘é”™è¯¯  Person.prototype = { constructor: Person, getName: function () { console.log(this.name); } } } } var person1 = new Person(\u0026#39;kevin\u0026#39;); var person2 = new Person(\u0026#39;daisy\u0026#39;); // æŠ¥é”™ å¹¶æ²¡æœ‰è¯¥æ–¹æ³• person1.getName(); // æ³¨é‡Šæ‰ä¸Šé¢çš„ä»£ç ï¼Œè¿™å¥æ˜¯å¯ä»¥æ‰§è¡Œçš„ã€‚ person2.getName();   æˆ‘ä»¬æ¥ä¸€æ­¥æ­¥åˆ†æåŸå› ï¼Œ\nnew Person(\u0026lsquo;kevin\u0026rsquo;)åå‘ç”Ÿçš„äº‹ï¼š\n1.åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡\n2.æŠŠå¯¹è±¡çš„åŸå‹æŒ‡å‘Person.prototype\n3.æ‰§è¡Œ Person.apply(obj)\n4.è¿”å›å¯¹è±¡\nå…¶ä¸­ç¬¬3æ­¥ï¼ŒPerson.apply(obj),\nå°†ä¼šæ‰§è¡Œobj.Person\nç”±äºé¦–æ¬¡æ—¶obj.getNameä¸æ˜¯functionï¼Œäºæ˜¯æ‰§è¡Œifè¯­å¥ æ­¤æ—¶obj.prototypeå­˜çš„æ˜¯Person.prototypeçš„åœ°å€æŒ‡é’ˆxï¼ˆç¬¬2æ­¥çš„æ‰§è¡Œç»“æœï¼‰ æŠŠPerson.prototypeé‡æ–°èµ‹å€¼æ„å‘³ç€Person.prototypeé‡æ–°èµ‹å€¼äº†ä¸€ä¸ªæ–°å¯¹è±¡çš„åœ°å€y\nåŠ¨æ€åŸå‹æ¨¡å¼ä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥èµ‹å€¼\u0026ndash;ç¤ºä¾‹demoï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13  let obj = { name: \u0026#34;obj\u0026#34; }; let per = obj; //è¿™é‡Œperå­˜çš„æ˜¯å¯¹è±¡objçš„åœ°å€  //objé‡æ–°èµ‹å€¼ä¸ºä¸€ä¸ªæ–°å¯¹è±¡çš„åœ°å€ obj = { age: 20 }; // obj { age:20 } //æ–°å¯¹è±¡çš„åœ°å€ // per { name:\u0026#34;obj\u0026#34; } //è¿˜æ˜¯æŒ‡å‘æ—§objçš„åœ°å€   ç»“æœï¼š\nobj.prototype è¿˜æ˜¯æŒ‡å‘æ—§åŸå‹çš„åœ°å€ï¼Œæ²¡æœ‰getName\nPerson.prototype æŒ‡å‘æ–°çš„å¯¹è±¡ï¼Œæœ‰getNameæ–¹æ³•\n// æŠ¥é”™ person1çš„åŸå‹æŒ‡å‘æ—§åŸå‹ï¼Œå¹¶æ²¡æœ‰getNameæ–¹æ³•\nperson1.getName();\n// person2çš„åŸå‹æŒ‡å‘æ–°åŸå‹å¯¹è±¡ï¼Œæœ‰getNameæ–¹æ³•\nperson2.getName();\né‚£å¯ä»¥ä¿®æ”¹ä»£ç ä¸º\n1 2 3 4 5 6 7 8 9 10 11 12 13 14  function Person(name) { this.name = name; if (typeof this.getName != \u0026#34;function\u0026#34;) { Person.prototype = { constructor: Person, getName: function() { console.log(this.name) } } } //ç”¨æœ€æ–°çš„Person.propertyå†æ¬¡ç”Ÿæˆå¯¹è±¡è¿”å›ï¼Œæ„é€ å‡½æ•°å¦‚æœè¿”å›åˆ°æ˜¯å¯¹è±¡ï¼Œç›´æ¥è¿”å›è¿™ä¸ªå¯¹è±¡  return new Person(name); }   5.1 å¯„ç”Ÿæ„é€ å‡½æ•°æ¨¡å¼ å…ˆçœ‹ä»£ç \n1 2 3 4 5 6 7 8 9 10 11 12 13  function Person(name) { var o = new object(); o.name = name; o.getName = function() { console.log(this.name) }; return o; //æ„é€ å‡½æ•°å¦‚æœè¿”å›åˆ°æ˜¯å¯¹è±¡ï¼Œç›´æ¥è¿”å›è¿™ä¸ªå¯¹è±¡ï¼Œoæ˜¯objectçš„ä¸€ä¸ªå®ä¾‹å’ŒPersonç±»æ²¡æœ‰å…³ç³»ï¼Œhttps://www.cnblogs.com/kenanyah/p/13246934.html } var person1 = new Person(\u0026#34;Neo\u0026#34;) console.log(person1 instanceOf Person) // false å®ä¾‹æ— æ³•æŒ‡å‘æ„é€ å‡½æ•° console.log(Person1 instanceOf Object) //true   åˆ›å»ºå‡ºæ¥çš„å®ä¾‹å¯¹è±¡æ— æ³•æŒ‡å‘æ„é€ å‡½æ•°ï¼Œåªæ˜¯å¯„ç”Ÿåœ¨æ„é€ å‡½æ•°é‡Œçš„å·¥å‚æ¨¡å¼ï¼Œå’Œå·¥å‚æ¨¡å¼ä¸åŒçš„æ˜¯å®ƒå¯ä»¥è°ƒç”¨newæ¥åˆ›å»ºå®ä¾‹\n5.2 ç¨³å¦¥æ„é€ å‡½æ•°æ¨¡å¼ 1 2 3 4 5 6 7 8 9 10 11 12 13  function person(name) { var o = new Object(); o.getName = function() { console.log(name); } return o; } var person1 = person(\u0026#34;Neo\u0026#34;) person1.getName(); //Neo person1.name = \u0026#34;Llane\u0026#34;; person1.getName(); //Neo console.log(person1.name); //Llane   æ‰€è°“ç¨³å¦¥å¯¹è±¡ï¼ŒæŒ‡çš„æ˜¯æ²¡æœ‰å…¬å…±å±æ€§ï¼Œå…¶æ–¹æ³•ä¹Ÿä¸å¼•ç”¨thisçš„å¯¹è±¡\nä¸å¯„ç”Ÿæ„é€ å‡½æ•°æ¨¡å¼æœ‰ä¸¤ç‚¹ä¸åŒï¼š\n1.æ–°åˆ›å»ºçš„å®ä¾‹æ–¹æ³•ä¸å¼•ç”¨this\n2.ä¸ä½¿ç”¨newæ“ä½œç¬¦è°ƒç”¨æ„é€ å‡½æ•°\nç¨³å¦¥å¯¹è±¡é€‚åˆåœ¨ä¸€äº›å®‰å…¨çš„ç¯å¢ƒä¸­ï¼Œ\nç¨³å¦¥æ„é€ å‡½æ•°å’Œå·¥å‚æ¨¡å¼ä¸€æ ·ï¼Œæ— æ³•è¯†åˆ«å®ä¾‹å¯¹è±¡æ‰€å±ç±»å‹\n","description":"","id":32,"section":"restart-js","tags":["jsåŸºç¡€","å­¦ä¹ ç¬”è®°"],"title":"ä»å¤´å­¦ä¹ js-14-åˆ›å»ºå¯¹è±¡","uri":"https://llane.xyz/restart-js/14-%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1/"},{"content":"æˆ‘ä»¬å¯ä»¥åœ¨Reactå®˜ç½‘-Reactå“²å­¦è¿™é‡Œæ‰¾åˆ°Reactå¯¹è‡ªå·±çš„å®šä¹‰ï¼š\n æˆ‘ä»¬è®¤ä¸ºï¼ŒReact æ˜¯ç”¨ JavaScript æ„å»ºå¿«é€Ÿå“åº”çš„å¤§å‹ Web åº”ç”¨ç¨‹åºçš„é¦–é€‰æ–¹å¼ã€‚\n å…³é”®è¯ï¼šå¿«é€Ÿã€å¤§å‹ï¼Œ\né˜»ç¢å¿«é€Ÿå“åº”çš„ä¸»è¦æ˜¯ï¼šCPUçš„ç“¶é¢ˆä¸IOçš„ç“¶é¢ˆ\nReactæƒ³åˆ°çš„è§£å†³åŠæ³•æ˜¯ç”¨å¹¶å‘çš„æ›´æ–°(è§†å›¾)æ¨¡å¼æ¥ä»£æ›¿ç°åœ¨çš„åŒæ­¥æ›´æ–°æ¨¡å¼\nReact Fiber æ¶æ„æ¨å‡ºï¼Œå› ä¸ºæ—§çš„æ¶æ„æ²¡æ³•å®ç°å¹¶å‘æ›´æ–°\n","description":"","id":33,"section":"Reactjs","tags":["React"],"title":"3-React-å“²å­¦","uri":"https://llane.xyz/reactjs/3-react-%E5%93%B2%E5%AD%A6/"},{"content":"ä»å‡½æ•°çš„è§’åº¦æ¥ç†è§£hooksçš„æ¦‚å¿µ Reactç†å¿µï¼šUI = f(data)\nè§†å›¾UIä¼šæ ¹æ®è‡ªå˜é‡å˜åŒ–\nè‡ªå˜é‡ï¼š useState å®šä¹‰è‡ªå˜é‡\nuseReducer(å¤æ‚ç‰ˆçš„useStateï¼Œä¸ºäº†æ–¹ä¾¿æ“ä½œæ›´å¤šè‡ªå˜é‡)\nuseContext ä¸ºäº†è·¨ç»„ä»¶æ“ä½œè‡ªå˜é‡\nå› å˜é‡ï¼š å®šä¹‰æ— å‰¯ä½œç”¨çš„å› å˜é‡ï¼ˆå› å˜é‡ä¾èµ–è‡ªå˜é‡å˜åŒ–ï¼‰\nuseMemo ç¼“å­˜ä¸€ä¸ªå› å˜é‡(ç”±è‡ªå˜é‡è®¡ç®—å¾—åˆ°çš„å˜é‡)+å®šä¹‰ä¾èµ–\nuseCallBack ç¼“å­˜ä¸€ä¸ªå‡½æ•°ç±»å‹çš„å› å˜é‡(å®é™…æƒ…å†µä¸‹å¯èƒ½æ˜¯ä¸€ä¸ªç‚¹å‡»å“åº”äº‹ä»¶ï¼Œäº‹ä»¶è§¦å‘åç”±è‡ªå˜é‡è®¡ç®—å¾—åˆ°å› å˜é‡)+å®šä¹‰ä¾èµ–\nå®šä¹‰æœ‰å‰¯ä½œç”¨çš„å› å˜é‡ï¼ˆå‰¯ä½œç”¨æŒ‡çš„æ˜¯ä¼šå¯¼è‡´è§†å›¾åœ¨ç›¸åŒè‡ªå˜é‡çš„æƒ…å†µä¸‹å´å‡ºç°äº†ä¸åŒè§†å›¾çš„æ“ä½œï¼‰\nuseEffect å› å˜é‡\næ ‡è®°å˜é‡ï¼š useRef æ ‡è®°å˜é‡ ä¸ºäº†è®©ç»„ä»¶çš„é€»è¾‘æ›´çµæ´»\nmoreï¼š\n9åˆ†é’ŸæŒæ¡React Hooksæ­£ç¡®è®¤çŸ¥\n","description":"","id":34,"section":"Reactjs","tags":["React"],"title":"å­¦ä¹ React_hooks_2","uri":"https://llane.xyz/reactjs/2-react-hooks/"},{"content":" æˆ‘æƒ³çŸ¥é“è¿™æ˜¯ä¸ºä»€ä¹ˆ \u0026ndash;è´¹æ›¼\n é€‰æ‹©æ’åºï¼Œæ˜¯æ¯æ¬¡éå†éƒ½é€‰æœ€å°çš„ä¸€ä¸ªæ•°äº¤æ¢åˆ°å·²ç»æ’å¥½çš„åºåˆ—çš„åé¢\næœ‰ç‚¹åƒä»å°åˆ°å¤§ï¼Œä¾æ¬¡æ‰¾åˆ°æ¯ä¸ªä½ç½®ä¸Šæ­£ç¡®çš„æ•°\n5 4 3 2 1\nç¬¬ä¸€æ¬¡éå†å‘ç°æœ€å°çš„æ˜¯ 1\næŠŠ 5 å’Œ 1 äº¤æ¢\n1 4 3 2 5\nç¬¬äºŒæ¬¡éå†ä» 4 å¼€å§‹ï¼ˆ1 å·²ç»æ˜¯æ’å¥½çš„åºåˆ—äº†ï¼‰å¼€å§‹å‘ç°åœ¨ï¼ˆ4 3 2 5ï¼‰é‡Œæœ€å°çš„æ˜¯ 2\næŠŠ 4 å’Œ 2 äº¤æ¢\n1 2 3 4 5\nç¬¬ä¸‰æ¬¡éå†ä» 3 å¼€å§‹åœ¨ï¼ˆ3 4 5ï¼‰é‡Œ 3 å·²ç»æ˜¯æœ€å°çš„äº†ï¼Œè¿™æ¬¡ä¸äº¤æ¢\nç¬¬å››æ¬¡éå†ä» 4 å¼€å§‹ï¼ŒåŒä¸Šå‘ç° 4 ä¹Ÿå·²ç»æ˜¯æœ€å°çš„äº†\nç¬¬äº”æ¬¡æœ€åè¿™æ¬¡éå†ä¸ç”¨åšäº†ï¼Œåœ¨å‰é¢éƒ½æ˜¯ä»å°åˆ°å¤§æ’å¥½åºçš„ï¼Œæœ€åè¿™ä¸ªæ•°å­—å°±æ˜¯æœ€å¤§çš„\næˆ‘ä»¬å¼€å§‹å†™ä»£ç ï¼š\n1 2 3 4 5 6 7 8  //å…ˆçœ‹åœ¨ä¸€æ¬¡éå†é‡Œåšäº†ä»€ä¹ˆ  let minNumberIndex = 0 for (let i = 0; i \u0026lt; array.length; i++) { if (array[i] \u0026lt; array[minNumberIndex]) { minNumberIndex = i } }   1 2 3 4 5 6 7 8 9 10 11 12 13 14  function selectionSort(array) { for (var j = 0; j \u0026lt; array.length - 1; j++) { let minNumberIndex = j for (let i = j; i \u0026lt; array.length; i++) { if (array[i] \u0026lt; array[minNumberIndex]) { minNumberIndex = i } } if (minNumberIndex !== j) { ;[array[i], array[minNumberIndex]] = [array[minNumberIndex], array[i]] } } return array }   é€‰æ‹©æ’åºå’Œå†’æ³¡æ’åºå¾ˆç±»ä¼¼éƒ½æ˜¯åœ¨æ¯ä¸€æ¬¡éå†çš„æ—¶å€™å»æ‰¾æœ€å¤§æˆ–è€…æœ€å°çš„å€¼ï¼Œç„¶åæŠŠæ‰¾åˆ°çš„å€¼å»ï¼ˆé€šè¿‡äº¤æ¢ï¼‰æ’å¥½åºåˆ—ï¼Œ\nä¸‹ä¸€æ¬¡çš„éå†ä»ä½™ä¸‹çš„æ•°å­—é‡Œè¿›è¡Œ\næ€»ç»“ï¼š\né€‰æ‹©æ’åºä¸éœ€è¦é¢å¤–ç©ºé—´ï¼Œæ˜¯æœ¬åœ°æ’åºï¼Œç›¸ç­‰å…ƒç´ æ˜¯ä¸ä¼šäº¤æ¢å‰åé¡ºåºï¼Œå› è€Œä¹Ÿæ˜¯ç¨³å®šæ’åºï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(n^2)ï¼Œé€‚ç”¨äºå°‘é‡æ•°æ®æ’åºï¼Œä½†å®é™…ä¸­ç”¨å¾—ä¸å¤š\néå¸¸æ„Ÿè°¢è€å§šçš„æ–‡ç« ï¼š\næ‰‹å†™ç®—æ³•å¹¶è®°ä½å®ƒï¼šé€‰æ‹©æ’åº\n","description":"","id":35,"section":"algorithm","tags":["ç®—æ³•åŸºç¡€","å­¦ä¹ ç¬”è®°"],"title":"èœé¸Ÿå­¦ç®—æ³•-3-é€‰æ‹©æ’åº","uri":"https://llane.xyz/algorithm/3-%E9%80%89%E6%8B%A9%E6%8E%92%E5%BA%8F/"},{"content":"ç”±äºæˆ‘ç›®å‰è¿˜æ˜¯ç”¨vscodeå±…å¤šï¼Œvscodeçš„æ’ä»¶å’Œç¯å¢ƒé…ç½®å¯¹å‰ç«¯å¼€å‘æ›´åŠ å‹å¥½ï¼Œæˆ‘æ‰“ç®—è¿˜æ˜¯åœ¨vscodeä¸Šå¼€å‘ï¼Œè¾…åŠ©ç”¨vscode+vimçš„å¿«æ·é”®æ¥æ­é…ä½¿ç”¨\nè¿™é‡Œæ¨èä¸€äº›vscodeä¸Šçš„æ’ä»¶ï¼š\n1.Vim è®°å¾—æŒ‰ç…§æ’ä»¶æ–‡æ¡£è¾“å…¥å‘½ä»¤ç„¶ååœ¨vscodeçš„settingsä¸­åŠ å…¥é»˜è®¤çš„ä¸€äº›æŒ‰é”®é…ç½®ï¼Œ\nä¸å¾—ä¸è¯´è¿™ä¸ªjjé€€å‡ºinsertæ¨¡å¼çš„å¿«æ·é”®æ¯”ESCæˆ–è€…command+cæˆ–è€…command+[ éƒ½è¦å¥½ç”¨\n2.TabOut å¯ä»¥åœ¨insertæ¨¡å¼ä¸‹ç”¨tabæŒ‰é”®æ¥è·³å‡ºæ‹¬å·å’ŒèŠ±æ‹¬å·ï¼Œå®æµ‹å¥½ç”¨ï¼Œæˆ‘å±…ç„¶æ‰çŸ¥é“\nvimå¯¹ä¸­æ–‡è¾“å…¥å…¶å®æ˜¯ä¸å¤ªå‹å¥½çš„ï¼Œnormalæ¨¡å¼ä¸‹å¦‚æœæ­¤æ—¶æ˜¯æ‹¼éŸ³è¾“å…¥ä¼šå¾ˆéº»çƒ¦\ninsertæ¨¡å¼ä¸‹æƒ³æŒ‰jjåˆ°normalç»“æœå‘ç°ç°åœ¨æ˜¯æ‹¼éŸ³æ¨¡å¼åˆå¾—åˆ é™¤jj\nå°½ç®¡æˆ‘å·²ç»å°è¯•å®‰è£…äº†im-selectä¾ç„¶è¿˜æ˜¯è§‰å¾—ä¸ä¾¿, å¯ä»¥å‚è€ƒè¿™ä¸ªçŸ¥ä¹ä¸Šçš„é—®é¢˜ https://www.zhihu.com/question/303850876\nåç»­æˆ‘ä¼šå°è¯•æŠŠ.vimrc çš„ä¸€äº›å®ç”¨å¿«æ·é”®é…ç½®ç»“åˆåˆ°vscodeä¸­çš„settings.json\nto be continued \u0026hellip;\n","description":"","id":36,"section":"posts","tags":["å­¦ä¹ ç¬”è®°"],"title":"Vimä½¿ç”¨ç¬”è®°2","uri":"https://llane.xyz/posts/vim%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B02/"},{"content":" è¿™ä¸ªç³»åˆ—æ˜¯æˆ‘è¯»å†´ç¾½è€å¸ˆåšå®¢çš„æ„Ÿæ‚Ÿï¼Œ\nåŠ å…¥äº†ä¸ªäººçš„è§£è¯»å’Œç»ƒä¹ é¢˜çš„è§£ç­”\n ç±»æ•°ç»„ åœ¨ä¹‹å‰æ¨¡æ‹Ÿå®ç°applyå’Œbindæ—¶æˆ‘ä»¬å…¶å®å·²ç»é‡è§è¿‡argumentsè¿™æ ·çš„ç±»æ•°ç»„æ–‡ä»¶äº†\n1 2 3 4 5 6 7  var array = [\u0026#39;A\u0026#39;, \u0026#39;B\u0026#39;, \u0026#39;C\u0026#39;] var arrayLike = { 0: \u0026#39;A\u0026#39;, 1: \u0026#39;B\u0026#39;, 2: \u0026#39;C\u0026#39;, lenght: 3 }   ç±»æ•°ç»„æ–‡ä»¶çš„è¯»å–ï¼Œéå†æ–¹å¼å’Œæ•°ç»„ä¸€æ ·\n1 2 3 4 5 6 7 8  array[0] arrayLike[0] array.length arrayLike.length for(var i=0; i\u0026lt;array.length; i++){} for(var i=0; i\u0026lt;arrayLike.length; i++){}   ä½†æ˜¯ç±»æ•°ç»„ç»ˆç©¶ä¸æ˜¯æ•°ç»„ä¸èƒ½è°ƒç”¨æ•°ç»„çš„åŸå‹æ–¹æ³•ï¼Œæ¯”å¦‚pushã€spliceã€slice\nå¸¸ç”¨çš„åšæ³•æ˜¯Array.prototype.splice.call(arrayLike, 2)\nåˆ©ç”¨callåœ¨ç›´æ¥è°ƒç”¨ArrayåŸå‹æ–¹æ³•çš„æ—¶å€™æŠŠthisæŒ‡å‘arrayLikeå¯¹è±¡\nå¦å¤–ç»å¸¸éœ€è¦æŠŠç±»æ•°ç»„å¯¹è±¡è½¬ä¸ºæ•°ç»„ï¼Œæ–¹æ³•å¦‚ä¸‹ï¼š\n1 2 3 4 5  Array.prototype.slice.call(arrayLike) //slice ç”¨äºæˆªå–æ•°ç»„ä»startåˆ°endï¼Œçœç•¥endæ—¶é»˜è®¤åˆ°æ•°ç»„æœ«å°¾ Array.prototype.splice.call(arrayLike, 0) //splice å¯ä»¥æ’å…¥åˆ é™¤ï¼Œå‚æ•°index, deleteNumber, item1,...,itemX Array.prototype.concat.call([], arrayLike) Array.from(arrayLike) //es6 Array.from [...arguments] //es6 æ‹“å±•è¿ç®—ç¬¦   Arugumentså¯¹è±¡ åœ¨å‡½æ•°ä½“ä¸­argumentsæŒ‡ä»£å‡½æ•°çš„Argumentså¯¹è±¡\nArugumentsçš„lengthï¼ŒæŒ‡çš„æ˜¯å®å‚çš„é•¿åº¦\nArgumentsçš„calleeé€šè¿‡å®ƒå¯ä»¥è°ƒç”¨å‡½æ•°æœ¬èº«\n1 2 3 4 5 6 7 8 9 10 11 12 13  //ç”¨calleeæ¥è§£å†³ä¹‹å‰ç¬¬8ç¯‡ä¸­çš„forå¾ªç¯æ— æ³•ä¿å­˜iåˆ°å‡½æ•°å†…éƒ¨çš„é—®é¢˜  var data = [] for (var i = 0; i\u0026lt; 3; i++) { (data[i] = function(){ console.log(arguments.callee.i) ).i = i } data[0](); //0 data[1](); //1 data[2](); //2   ä¹ä¸€çœ‹åœ¨forå¾ªç¯ä¸­çš„é‚£éƒ¨åˆ†æœ‰ç‚¹å¥‡æ€ªï¼Œæˆ‘ä»¬æ‹†å¼€çœ‹\nxxx.i = i æ˜¯åœ¨xxxçš„å±æ€§ièµ‹å€¼ä¸ºi\næ‹¬å·å†…:\ndata[i] = æŸä¸ªä¸œè¥¿\n(data[i] = èµ‹å€¼å†…å®¹).i = i å…¶å®å°±æ˜¯\ndata[i].i = i\næ¥ä¸‹æ¥çœ‹èµ‹å€¼çš„å†…å®¹\næ˜¯ä¸€ä¸ªå‡½æ•°å¯¹è±¡ï¼Œå‡½æ•°å¯¹è±¡åœ¨åˆ›å»ºçš„æ—¶å€™ä¸ä¼šæ‰§è¡Œå†…éƒ¨çš„ä»£ç \nargument.callee æŒ‡çš„å°±æ˜¯ data[i]\nargument.callee.i è‡ªç„¶å°±æ˜¯data[i].i\né‚£å› ä¸ºçº¯çš„èµ‹å€¼ = xx ä¼šåœ¨forå¾ªç¯é‡Œç«‹å³æ‰§è¡Œï¼Œæ‰€æœ‰içš„æ¯ä¸ªçŠ¶æ€éƒ½ä¼šå­˜åœ¨å¯¹åº”çš„data[x]é‡Œ\narguments å’Œå¯¹åº”å‚æ•°çš„ç»‘å®š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28  function foo(name, age, sex, hobbit) { console.log(name, arguments[0]); // name name  // æ”¹å˜å½¢å‚  name = \u0026#39;new name\u0026#39;; console.log(name, arguments[0]); // new name new name  // æ”¹å˜arguments  arguments[1] = \u0026#39;new age\u0026#39;; console.log(age, arguments[1]); // new age new age  // æµ‹è¯•æœªä¼ å…¥çš„æ˜¯å¦ä¼šç»‘å®š  console.log(sex); // undefined  sex = \u0026#39;new sex\u0026#39;; console.log(sex, arguments[2]); // new sex undefined  arguments[3] = \u0026#39;new hobbit\u0026#39;; console.log(hobbit, arguments[3]); // undefined new hobbit  } foo(\u0026#39;name\u0026#39;, \u0026#39;age\u0026#39;)   ä¼ å…¥å‚æ•°æ—¶ï¼Œå®å‚å’Œargumentsçš„å€¼ä¼šå…±äº«ï¼Œæ²¡æœ‰ä¼ å…¥å‚æ•°æ—¶ï¼Œå®å‚å’Œargumentsçš„å€¼ä¸ä¼šå…±äº«\nåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹éƒ½ä¸ä¼šå…±äº«\nä¼ é€’å‚æ•°\nå°†å‚æ•°ä»ä¸€ä¸ªå‡½æ•°ä¼ é€’åˆ°å¦ä¸€ä¸ªå‡½æ•°\n1 2 3 4 5 6 7 8 9  //åˆ©ç”¨applyçš„ç¬¬äºŒä¸ªå‚æ•°å¯ä»¥ç›´æ¥ä¼ ä¸€ä¸ªæ•°ç»„ function foo(){ bar.apply(this, [...arguments]) } function bar(){ console.log(a, b, c) } foo(1, 2, 3)   ","description":"","id":37,"section":"restart-js","tags":["jsåŸºç¡€","å­¦ä¹ ç¬”è®°"],"title":"ä»å¤´å­¦ä¹ js-13-ç±»æ•°ç»„å¯¹è±¡ä¸arguments","uri":"https://llane.xyz/restart-js/13-%E7%B1%BB%E6%95%B0%E7%BB%84%E5%AF%B9%E8%B1%A1%E4%B8%8Earguments/"},{"content":" æˆ‘æƒ³çŸ¥é“è¿™æ˜¯ä¸ºä»€ä¹ˆ \u0026ndash;è´¹æ›¼\n å†’æ³¡æ’åºæˆ‘æƒ³æ˜¯å¤§éƒ¨åˆ†äººæ¥è§¦çš„ç¬¬ä¸€ä¸ªæ’åºç®—æ³•ï¼ŒåŸç†ä¹Ÿå¾ˆå½¢è±¡ï¼Œ\næ¯ä¸€æ¬¡è½®è¯¢éƒ½ä¼šå°†è¿™ä¸€è½®é‡Œèƒ½æ‰¾åˆ°çš„æœ€å¤§ï¼ˆå°ï¼‰çš„æ•°å­—é€šè¿‡ä¸€ä¸ªä¸ªç›¸é‚»æ¯”è¾ƒå’Œäº¤æ¢ä½ç½®ï¼Œæœ€åå½’åˆ°æ•°ç»„çš„åé¢\nå…ˆæ¥çœ‹ä¸€æ¬¡è½®è¯¢çš„æ“ä½œï¼ŒæŠŠæœ€å¤§å€¼æ”¾åˆ°æœ€å\n1 2 3 4 5 6  let array = [5, 4, 3, 2, 1] for (let i = 0; i \u0026lt; array.length - 1; i++) { if (array[i] \u0026gt; array[i + 1]) { ;[array[i + 1], array[i]] = [array[i], array[i + 1]] //swap  } }   array æœ‰ n ä¸ªå…ƒç´ ï¼Œå°±è¦åš n æ¬¡è½®è¯¢çš„æ“ä½œ\n1 2 3 4 5 6 7 8  let array = [5, 4, 3, 2, 1] for (let j = 0; j \u0026lt; array.length; j++) { for (let i = 0; i \u0026lt; array.length - 1; i++) { if (array[i] \u0026gt; array[i + 1]) { ;[array[i + 1], array[i]] = [array[i], array[i + 1]] //swap  } } }   è¿™é‡Œè¿˜èƒ½ä¼˜åŒ–ä¸€ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°ï¼š\nç¬¬ä¸€æ¬¡ j==0 æ—¶\ni==3 æ—¶å°±æŠŠæœ€å¤§å€¼äº¤æ¢åˆ°æœ€åäº†\nç¬¬äºŒæ¬¡ j==1 æ—¶\ni==2 æ—¶å°±æŠŠæœ€å¤§å€¼äº¤æ¢åˆ°æœ€åäº†\nç¬¬ä¸‰æ¬¡ j==2 æ—¶\ni==1 æ—¶å°±æŠŠæœ€å¤§å€¼äº¤æ¢åˆ°æœ€åäº†\nç¬¬å››æ¬¡ j==3 æ—¶\ni==0 æ—¶å°±æŠŠæœ€å¤§å€¼äº¤æ¢åˆ°æœ€åäº†\nä¹Ÿå°±æ˜¯æ¯æ¬¡å¼€å§‹æ–°çš„è½®è¯¢æ—¶ï¼Œlength éƒ½æ¯”ä¸Šä¸€æ¬¡å°‘ 1\n1 2 3 4 5 6 7 8 9 10 11 12 13 14  let array = [5, 4, 3, 2, 1] function bubbleSort(array) { for (let j = 0; j \u0026lt; array.length; j++) { for (let i = 0; i \u0026lt; array.length - 1 - j; i++) { if (array[i] \u0026gt; array[i + 1]) { ;[array[i + 1], array[i]] = [array[i], array[i + 1]] //swap  } } } return array } console.log(bubbleSort(array))   æ€»ç»“ï¼š\nå†’æ³¡æ’åºä¸éœ€è¦é¢å¤–ç©ºé—´ï¼Œæ˜¯æœ¬åœ°æ’åºï¼Œç›¸ç­‰å…ƒç´ æ˜¯ä¸ä¼šäº¤æ¢å‰åé¡ºåºï¼Œå› è€Œä¹Ÿæ˜¯ç¨³å®šæ’åºï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(n^2)ï¼Œé€‚ç”¨äºå°‘é‡æ•°æ®æ’åºï¼Œä½†å®é™…ä¸­ç”¨å¾—ä¸å¤š\néå¸¸æ„Ÿè°¢è€å§šçš„æ–‡ç« ï¼š\næ‰‹å†™ç®—æ³•å¹¶è®°ä½å®ƒï¼šå†’æ³¡æ’åº\n","description":"","id":38,"section":"algorithm","tags":["ç®—æ³•åŸºç¡€","å­¦ä¹ ç¬”è®°"],"title":"èœé¸Ÿå­¦ç®—æ³•-2-å†’æ³¡æ’åº","uri":"https://llane.xyz/algorithm/2-%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F/"},{"content":" è¿™ä¸ªç³»åˆ—æ˜¯æˆ‘è¯»å†´ç¾½è€å¸ˆåšå®¢çš„æ„Ÿæ‚Ÿï¼Œ\nåŠ å…¥äº†ä¸ªäººçš„è§£è¯»å’Œç»ƒä¹ é¢˜çš„è§£ç­”\n new Fn() ä¸€å…±åšäº† 4 ä»¶äº‹ï¼š\n ç”Ÿæˆä¸€ä¸ªä¸´æ—¶ç©ºå¯¹è±¡ var temp = {} ä¸´æ—¶å¯¹è±¡çš„åŸå‹ä¸ºæ„é€ å‡½æ•° Fn çš„åŸå‹ temp.__proto__ = Fn.prototype æ‰§è¡Œ Fn å‡½æ•°ï¼ŒæŠŠ temp ä½œä¸º thisï¼ŒF.call(temp) åœ¨ Fn é‡Œ return this  çœ‹ä¸€ä¸ªä¾‹å­\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18  function Person(name, age) { this.name = name this.age = age } Person.prototype.runSpeed = 10 // 10km/h  Person.prototype.run = function () { console.log(\u0026#39;running\u0026#39;) } var theOne = new Person(\u0026#39;Neo\u0026#39;, 20) console.log(theOne.name) //Neo console.log(theOne.age) //20 console.log(theOne.runSpeed) //10  theOne.run() //running   js ä¸­çš„å…³é”®è¯ new å¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œè¿™ä¸ªæ–°å¯¹è±¡çš„åŸå‹æ˜¯ new åé¢è·Ÿçš„æ„é€ å‡½æ•°çš„åŸå‹ï¼Œ\nåœ¨ä¸Šé¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œå®ä¾‹ theOne çš„åŸå‹æ˜¯ Personï¼Œå®ä¾‹ theOne å¯ä»¥ï¼š\n1.è®¿é—®åˆ°æ„é€ å‡½æ•° Person çš„å±æ€§\n2.è®¿é—®åˆ°æ„é€ å‡½æ•° Person çš„åŸå‹çš„å±æ€§\nå°è¯•æ¨¡æ‹Ÿï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14  function objectFactory() { // åˆ›é€ ä¸€ä¸ªç©ºå¯¹è±¡  var obj = Object({}) //å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯objçš„æ„é€ å‡½æ•°ï¼Œä½¿å¾—objå¯ä»¥è®¿é—®æ„é€ å‡½æ•°çš„åŸå‹çš„å±æ€§  Constructor = [].shift.call(arguments) //ç©ºå¯¹è±¡çš„åŸå‹æ˜¯æ„é€ å‡½æ•°çš„åŸå‹  obj.__proto__ = Constructor.prototype //é‡æ–°æŒ‡å‘thisä¸ºobjåï¼Œæ‰§è¡Œæ„é€ å‡½æ•°ï¼Œä½¿å¾—objå¯ä»¥è®¿é—®æ„é€ å‡½æ•°çš„å†…éƒ¨å±æ€§  Constructor.apply(obj, arguments) return obj }   è¿˜æœ‰ä¸€ç§æƒ…å†µéœ€è¦è€ƒè™‘ï¼Œå°±æ˜¯æ„é€ å‡½æ•°æœ‰è¿”å›å€¼æ—¶ï¼Œ\nobj è®¿é—®æ„é€ å‡½æ•°å†…éƒ¨çš„å±æ€§å°±æœ‰äº†é™åˆ¶ï¼Œä¸ºäº†å®ç°å°è£…\næ¯”å¦‚ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16  function Person(name, age) { this.name = name this.age = age return { name: name, sex: \u0026#39;male\u0026#39;, } } var theOne = new Person(\u0026#39;Neo\u0026#39;, 20) //å®ä¾‹theOneåªèƒ½è¿”å›æ„é€ å‡½æ•°è¿”å›çš„å¯¹è±¡ä¸­çš„å±æ€§ console.log(theOne.name) //Neo console.log(theOne.age) //undefined console.log(theOne.sex) //male   è€Œå¦‚æœæ„é€ å‡½æ•°è¿”å›çš„ä¸æ˜¯å¯¹è±¡\n1 2 3 4 5 6 7 8 9 10 11 12  function Person(name, age) { this.name = name this.age = age return \u0026#39;warning: no access\u0026#39; } var theOne = new Person(\u0026#39;Neo\u0026#39;, 20) //ç›¸å½“äºæ²¡æœ‰è¿”å›å€¼è¿›è¡Œå¤„ç† console.log(theOne.name) //undefined console.log(theOne.age) //undefined   å¥½çš„ï¼Œæˆ‘ä»¬æ¥å®Œå–„ä¸€ä¸‹ objectFactory æ–¹æ³•ï¼š\n1 2 3 4 5 6 7  function objectFactory() { var obj = Object({}) Constructor = [].shift.call(arguments) obj.__proto__ = Constructor.prototype var result = Constructor.apply(obj, arguments) return typeof result === \u0026#39;object\u0026#39; ? result : obj }   ","description":"","id":39,"section":"restart-js","tags":["jsåŸºç¡€","å­¦ä¹ ç¬”è®°"],"title":"ä»å¤´å­¦ä¹ js-12-æ¨¡æ‹Ÿå®ç°new","uri":"https://llane.xyz/restart-js/12-%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0new/"},{"content":" è¿™ä¸ªç³»åˆ—æ˜¯æˆ‘è¯»å†´ç¾½è€å¸ˆåšå®¢çš„æ„Ÿæ‚Ÿï¼Œ\nåŠ å…¥äº†ä¸ªäººçš„è§£è¯»å’Œç»ƒä¹ é¢˜çš„è§£ç­”\n MDN å¯¹ bing çš„å®šä¹‰ bind()æ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ªæ–°å‡½æ•°ã€‚å½“è¿™ä¸ªå‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œbind()çš„ç¬¬ä¸€ä¸ªå‚æ•°å°†ä½œä¸ºå®ƒè¿è¡Œæ—¶çš„ thisï¼Œä¹‹åçš„ä¸€åºåˆ—å‚æ•°å°†ä¼šåœ¨ä¼ é€’çš„å®å‚å‰ä¼ å…¥ä½œä¸ºå®ƒçš„å‚æ•°\nbind å‡½æ•°çš„ä¸¤ä¸ªç‰¹ç‚¹ï¼š\n1.è¿”å›ä¸€ä¸ªå‡½æ•°\n2.å¯ä»¥ä¼ å…¥å‚æ•°\nä¾‹å­ 1:\n1 2 3 4 5 6 7 8 9 10  var foo = { value: 1, } function bar() { console.log(this.value) } var bindFoo = bar.bind(foo) bindFoo() //1   ç¬¬ä¸€ç‰ˆ 1 2 3 4 5 6  function myBind(context) { var self = this return function () { return self.apply(context) } }   åˆšæ‰çš„å®šä¹‰ä¸­æåˆ° bind è¿˜æ”¯æŒä¼ å‚æ•°æ¥çœ‹ä¸ªä¾‹å­ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15  var foo = { value: 1, } function bar(name, age) { console.log(this.value) console.log(name) console.log(age) } var bindFoo = bar.bind(foo, \u0026#39;daisy\u0026#39;) bindFoo(\u0026#39;18\u0026#39;) // 1 // daisy // 18   ç¬¬äºŒç‰ˆ 1 2 3 4 5 6 7 8 9  function myBind(context) { var self = this var args = Array.prototype.slice.call(arguments, 1) return function () { var bindArgs = Array.prototype.slice.call(arguments) return self.apply(context, args.concat(bindArgs)) } }   æ­¤æ—¶åˆ°äº†æœ€éš¾çš„éƒ¨åˆ†ï¼Œbind è¿˜æœ‰ä¸€ä¸ªç‰¹æ€§ï¼š\nä¸€ä¸ªç»‘å®šå‡½æ•°ä¹Ÿèƒ½ä½¿ç”¨ new æ“ä½œç¬¦åˆ›å»ºå¯¹è±¡ï¼šè¿™ç§è¡Œä¸ºå°±åƒæŠŠåŸå‡½æ•°å½“æˆæ„é€ å™¨ã€‚æä¾›çš„ this å€¼è¢«å¿½ç•¥ï¼ŒåŒæ—¶è°ƒç”¨æ—¶çš„å‚æ•°è¢«æä¾›ç»™æ¨¡æ‹Ÿå‡½æ•°ã€‚\næ¥çœ‹ä¾‹å­ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25  var value = 2 var foo = { value: 1, } function bar(name, age) { this.habit = \u0026#39;shopping\u0026#39; console.log(this.value) console.log(name) console.log(age) } bar.prototype.friend = \u0026#39;kevin\u0026#39; var bindFoo = bar.bind(foo, \u0026#39;daisy\u0026#39;) var obj = new bindFoo(\u0026#39;18\u0026#39;) // undefined æä¾›çš„thiså€¼è¢«å¿½ç•¥ // daisy è°ƒç”¨bindæ—¶çš„å‚æ•°è¢«ä¸€èµ·æä¾›äº† // 18 console.log(obj.habit) console.log(obj.friend) // shopping // kevin   ç¬¬ä¸‰ç‰ˆ 1 2 3 4 5 6 7 8 9 10  function myBind(context) { var self = this; var args = Array.prototype.slice.call(arguments, 1) var fBound = function(){ var bindArgs = Array.prototype.slice.call(arguments) return self.apply(this instanceOf fBound? this : context, args.concat(bindArgs)) } fBound.prototype = this.prototype; return fBound; }   ä½†æ˜¯åœ¨è¿™ä¸ªå†™æ³•ä¸­ï¼Œæˆ‘ä»¬ç›´æ¥å°† fBound.prototype = this.prototypeï¼Œ\næˆ‘ä»¬ç›´æ¥ä¿®æ”¹ fBound.prototype çš„æ—¶å€™ï¼Œä¹Ÿä¼šç›´æ¥ä¿®æ”¹ç»‘å®šå‡½æ•°çš„ prototypeã€‚\nè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ªç©ºå‡½æ•°æ¥è¿›è¡Œä¸­è½¬ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15  function myBind(context) { var self = this; var args = Array.prototype.slice.call(arguments, 1) var fNop = function(){} var fBound = function(){ var bindArgs = Array.prototype.slice.call(arguments) return self.apply(this instanceOf fNop? this : context, args.concat(bindArgs)) } fNop.prototype = this.prototype; fBound.prototype = new fNop() return fBound; }   ä»¥åè¦åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨æ—¶ï¼Œæˆ‘ä»¬å†è¡¥ä¸Šå¯¹å‚æ•°å’Œå‡½æ•°åå­—çš„åˆ¤æ–­\nç¬¬å››ç‰ˆ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19  Function.prototype.bind = Function.prototype.bind || function(context) { if (typeof this !== \u0026#34;function\u0026#34;) { throw new Error(this + \u0026#34;.bind is not a function!\u0026#34;) } var self = this; var args = Array.prototype.slice.call(arguments, 1); var fNop = function(){} var fBound = function() { var bindArgs = Array.prototype.slice.call(arguments) return self.apply(this instanceOf fNop? this : context, args.concat(bindArgs)) } fNop.prototype = this.prototype; fBound.prototype = new fNop(); return fBound; }   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47  const bind = function (newThis) { const self = this const args = Array.prototype.slice.call(arguments, 1) const resultFn = function () { const args2 = Array.prototype.slice.call(arguments) self.apply(this instanceof resultFn ? this : newThis, args.concat(args2)) } resultFn.prototype = self.prototype return resultFn } Function.prototype.bind2 = bind function test1() { const testFn = function () { console.log(this, arguments) } const bindFn = testFn.bind2( { name: \u0026#39;Neo\u0026#39;, }, 123 ) bindFn(456) } function test2() { const a = function (name, age) { this.name = name this.age = age } a.prototype.sayHi = function () { console.log(\u0026#39;hi\u0026#39;) } const aaa = a.bind2(undefined, \u0026#39;Neo\u0026#39;, 20) const object = new aaa() console.log(\u0026#39;object\u0026#39;, object) console.log(a.prototype.isPrototypeOf(object)) console.log(typeof object.sayHi === \u0026#39;function\u0026#39;) } test1() //æµ‹è¯• bind apiæ˜¯å¦æ­£å¸¸ test2() //æµ‹è¯• bind æ˜¯å¦æ”¯æŒnew   ","description":"","id":40,"section":"restart-js","tags":["jsåŸºç¡€","å­¦ä¹ ç¬”è®°"],"title":"ä»å¤´å­¦ä¹ js-11-æ¨¡æ‹Ÿå®ç°bind","uri":"https://llane.xyz/restart-js/11-%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0bind/"},{"content":" è¿™ä¸ªç³»åˆ—æ˜¯æˆ‘è¯»å†´ç¾½è€å¸ˆåšå®¢çš„æ„Ÿæ‚Ÿï¼Œ\nåŠ å…¥äº†ä¸ªäººçš„è§£è¯»å’Œç»ƒä¹ é¢˜çš„è§£ç­”\n callä½¿ç”¨çš„ä¾‹å­ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14  var foo = { value: 1 }; function bar(name, age) { console.log(name) console.log(age) console.log(this.value); } bar.call(foo, \u0026#39;kevin\u0026#39;, 18); // kevin // 18 // 1   ç”¨jsæ¨¡æ‹Ÿcallï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15  Function.prototype.myCall = function (newContext) { var context = Object(newContext) || window; //å¦‚æœä¼ çš„å¯¹è±¡æ˜¯nullï¼Œé»˜è®¤æŒ‡å‘window  context.fn = this; //å°†å½“å‰æ–¹æ³•ä½œä¸ºå¯¹è±¡çš„ä¸€ä¸ªå±æ€§  //æ¢³ç†ä¸€ä¸‹å‚æ•°ï¼Œä»ç¬¬äºŒä¸ªå‚æ•°å¼€å§‹(ä¸‹æ ‡ä¸º1)  var args = []; for(var i = 1, len = arguments.length; i \u0026lt; len; i++) { args.push(\u0026#39;arguments[\u0026#39; + i + \u0026#39;]\u0026#39;); } //æ‰§è¡Œæ–¹æ³•  var result = eval(\u0026#39;context.fn(\u0026#39; + args + \u0026#39;)\u0026#39;); delete context.fn; //åˆ é™¤ä¸´æ—¶å±æ€§æ–¹æ³•  return result; }   applyå’Œcalléå¸¸ç±»ä¼¼ï¼Œä¸¤è€…çš„åŒºåˆ«åªæ˜¯æ¥å—çš„å‚æ•°å½¢å¼ä¸åŒï¼š\nbar.call(foo, \u0026lsquo;kevin\u0026rsquo;, 18)\nbar.apply(foo, [\u0026lsquo;kevin\u0026rsquo;, 18])\nç”¨jsæ¨¡æ‹Ÿapply:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19  Function.prototype.myApply = function (newContext, arr) { var context = Object(newContext) || window; //å¦‚æœä¼ çš„å¯¹è±¡æ˜¯nullï¼Œé»˜è®¤æŒ‡å‘window  context.fn = this; //å°†å½“å‰æ–¹æ³•ä½œä¸ºå¯¹è±¡çš„ä¸€ä¸ªå±æ€§  //æ¢³ç†å‚æ•°ï¼Œè¿™æ¬¡ä»ä¸‹æ ‡0å¼€å§‹ï¼Œå¹¶æ‰§è¡Œæ–¹æ³•  var result; if (!arr) { result = context.fn() } else { var args = []; for(var i = 0, len = arr.length; i \u0026lt; len; i++) { args.push(\u0026#39;arr[\u0026#39; + i + \u0026#39;]\u0026#39;) } result = eval(\u0026#39;context.fn(\u0026#39; + args + \u0026#39;)\u0026#39;); } delete context.fn; //åˆ é™¤ä¸´æ—¶å±æ€§æ–¹æ³•  return result; }   ","description":"","id":41,"section":"restart-js","tags":["jsåŸºç¡€","å­¦ä¹ ç¬”è®°"],"title":"ä»å¤´å­¦ä¹ js-10-æ¨¡æ‹Ÿå®ç°callå’Œapply","uri":"https://llane.xyz/restart-js/10-%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0call%E5%92%8Capply/"},{"content":" æˆ‘æƒ³çŸ¥é“è¿™æ˜¯ä¸ºä»€ä¹ˆ \u0026ndash;è´¹æ›¼\n å¿«é€Ÿæ’åºä»å½¢å¼ä¸Šä¸ºå½’åˆ†ç®—æ³• 1.åˆ† æ ¸å¿ƒæ˜¯æŠŠæ•°ç»„æŒ‰åˆ†ç•Œç‚¹ä¸€åˆ†ä¸ºä¸‰\n1 2 3 4 5  let pivot = array[array.length - 1] let left = array.filter( (item, index) =\u0026gt; item \u0026lt;= pivot \u0026amp;\u0026amp; index != array.length - 1 ) let right = array.filter((item, index) =\u0026gt; item \u0026gt; pivot)   2.å½’ éœ€è¦åˆå¹¶ä¸‰ä¸ªéƒ¨åˆ†ä¸ºä¸€ä¸ªæ•°ç»„\n1  let result = [...left, pivot, ...right]   3.æœ€ååˆ©ç”¨é€’å½’çš„æ€æƒ³ï¼Œå®Œæˆç®—æ³•\né€’å½’æ­¥éª¤ï¼š\n1.æ•°ç»„åˆ†ä¸º 3 éƒ¨åˆ†ï¼Œleft pivot rightï¼Œleft\u0026lt;= pivot \u0026lt;right\n2.é€’å½’å¤„ç†å·¦è¾¹çš„éƒ¨åˆ†\n3.é€’å½’å¤„ç†å³è¾¹çš„éƒ¨åˆ†\n4.åˆå¹¶ä¸‰è€…çš„ç»“æœ\n1 2 3 4 5 6 7 8  function quickSort(array) { let pivot = array[array.length - 1] let left = array.filter( (item, index) =\u0026gt; item \u0026lt;= pivot \u0026amp;\u0026amp; index != array.length - 1 ) let right = array.filter((item, index) =\u0026gt; item \u0026gt; pivot) return [...left, pivot, ...right] }   é€’å½’æ˜¯è°ƒç”¨è‡ªèº«ï¼Œä¸èƒ½æ— é™æ¬¡è°ƒç”¨ä¸‹å»ï¼Œå› æ­¤éœ€è¦æœ‰é€’å½’çš„å‡ºå£ï¼ˆåˆå§‹æ¡ä»¶ï¼‰\nå½“æ•°ç»„å…ƒç´ é•¿åº¦å°äº 2 æ—¶ï¼Œå°±å·²ç»æ˜¯æ’å¥½åºäº†ï¼Œä¸ç”¨å†é€’å½’äº†ï¼Œæˆ‘ä»¬å®Œå–„ä¸‹ä»£ç \n1 2 3 4 5 6 7 8 9  function quickSort(array) { if (array.length \u0026lt; 2) return array let pivot = array[array.length - 1] let left = array.filter( (item, index) =\u0026gt; item \u0026lt;= pivot \u0026amp;\u0026amp; index != array.length - 1 ) let right = array.filter((item, index) =\u0026gt; item \u0026gt; pivot) return [...qucikSort(left), pivot, ...quickSort(right)] }   æ—¶é—´å¤æ‚åº¦ æˆ‘ä¹‹å‰ä¸€ç›´å¯¹æ—¶é—´å¤æ‚åº¦çš„ log æ„Ÿè§‰å¾ˆæ¨¡ç³Šï¼Œçœ‹äº†ä¸‹é¢è¿™å¥è¯æ‰æç„¶å¤§æ‚Ÿ\n æ—¶é—´å¤æ‚åº¦ï¼Œ2 çš„ 64 æ¬¡æ–¹ä¸ªæœ‰åºæ•°æ®äºŒåˆ†æŸ¥æ‰¾ä¹Ÿé¡¶å¤šå¾ªç¯ 64 æ¬¡\n æ­¤ç‰ˆæœ¬çš„å¿«é€Ÿæ’åºæ¯ä¸€æ¬¡é€’å½’è°ƒç”¨ï¼Œéœ€è¦é¢å¤–ç©ºé—´ï¼Œå¤æ‚åº¦ä¸º O(n)ï¼Œä¸æ˜¯æœ¬åœ°æ’åºã€‚\nè¯´èµ·ç©ºé—´å¤æ‚åº¦ï¼Œé€’å½’ä¹Ÿéœ€è¦ç©ºé—´ï¼ˆç›¸å½“äºæ‰‹åŠ¨ç»´æŠ¤ä¸€ä¸ªè°ƒç”¨æ ˆï¼‰ï¼Œå› æ­¤æ€»ä½“ç©ºé—´å¤æ‚åº¦æ˜¯ O(nlogn)ã€‚ç›¸ç­‰å…ƒç´ æ˜¯ä¸ä¼šäº¤æ¢å‰åé¡ºåºï¼Œå› è€Œæ˜¯ç¨³å®šæ’åºï¼ˆè¿™ä¸æˆ‘ä»¬é€‰æ‹©æœ€åä¸€ä¸ªå…ƒç´ ä¸ºåˆ†ç•Œç‚¹æœ‰å…³ï¼‰ã€‚\næ—¶é—´å¤æ‚åº¦ä¸º O(nlogn)ã€‚\néå¸¸æ„Ÿè°¢è€å§šçš„æ–‡ç« ï¼š\næ‰‹å†™ç®—æ³•å¹¶è®°ä½å®ƒï¼šå¿«é€Ÿæ’åºï¼ˆ5 è¡Œä»£ç ç®€å•ç‰ˆï¼‰\n","description":"","id":42,"section":"algorithm","tags":["ç®—æ³•åŸºç¡€","å­¦ä¹ ç¬”è®°"],"title":"èœé¸Ÿå­¦ç®—æ³•-1-ç®€å•ç‰ˆå¿«é€Ÿæ’åº","uri":"https://llane.xyz/algorithm/1-%E7%AE%80%E5%8D%95%E7%89%88%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F/"},{"content":" è¿™ä¸ªç³»åˆ—æ˜¯æˆ‘è¯»å†´ç¾½è€å¸ˆåšå®¢çš„æ„Ÿæ‚Ÿï¼Œ\nåŠ å…¥äº†ä¸ªäººçš„è§£è¯»å’Œç»ƒä¹ é¢˜çš„è§£ç­”\n åœ¨ã€ŠJavaScripté«˜çº§ç¨‹åºè®¾è®¡ã€‹ç¬¬ä¸‰ç‰ˆ 4.1.3ï¼Œè®²åˆ°ä¼ é€’å‚æ•°ï¼š\n ECMAScriptä¸­æ‰€æœ‰å‡½æ•°çš„å‚æ•°éƒ½æ˜¯æŒ‰å€¼ä¼ é€’çš„ã€‚\n é‚£ä¹ˆjsä¸­çš„å‚æ•°åˆ†ä¸ºåŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹\nåœ¨å†…å­˜ä¸­æœ‰æ ˆå’Œå †ä¸¤ä¸ªåŒºåŸŸï¼Œæ ˆç”¨äºå‚¨å­˜åŸºæœ¬ç±»å‹çš„æ•°æ®ï¼Œè€Œå †ç”¨äºå­˜æ”¾å¼•ç”¨ç±»å‹çš„æ•°æ®\nï¼ˆåç»­è¿˜æœ‰å¸¸é‡åŒºå…ˆä¸è®²ï¼‰\n1 2  let a = 1; let b = {name: \u0026#39;Neo\u0026#39;, age: 25};   ä»¥ä¸Šçš„ä»£ç ä¼šåœ¨å†…å­˜ä¸­å‚¨å­˜æ•°æ®å½¢å¼å¤§è‡´å¦‚ä¸‹ï¼š\nåœ¨æ ˆä¸­æœ‰ï¼š\na(å€¼ä¸º1)\nb(å€¼ä¸ºä¸€ä¸ªæŒ‡é’ˆï¼Œä¸€ä¸ªæŒ‡å‘å †ä¸­å¯¹è±¡æ•°æ®çš„åœ°å€å‡è®¾ä¸º1000)\nåœ¨å †ä¸­æœ‰ï¼š\n{name: \u0026lsquo;Neo\u0026rsquo;, age: 25}\nå…¶ä¸­æŒ‡é’ˆ1000æŒ‡å‘{name: \u0026lsquo;Neo\u0026rsquo;, age: 25}\n  æ ˆå†…å­˜å †å†…å­˜   a1   bæŒ‡é’ˆåœ°å€1000{name: 'Neo', age: 25}    ä¾‹å­1ï¼š\n1 2 3 4 5 6 7  var value = 1; function foo(v) { v = 2; console.log(v); //2 } foo(value); console.log(value) // 1   ä¾‹å­1ä¼šæ‰“å°\n2\n1\nfoo(value) å‡½æ•°å¼€å§‹æ‰§è¡Œæ—¶ï¼Œåˆå§‹åŒ–AOï¼Œç„¶ååŠ å…¥å½¢å‚\næ‰§è¡Œäº†åƒvar v = valueè¿™æ ·çš„ä¸€ä¸ªæ“ä½œï¼ŒæŠŠvalueèµ‹å€¼ç»™äº†å‡½æ•°å†…çš„å‚æ•°v\n  æ ˆå†…å­˜å †å†…å­˜   value1   v1    å†æ‰§è¡Œv = 2ï¼Œé‡æ–°èµ‹å€¼v\n  æ ˆå†…å­˜å †å†…å­˜   value1   v2    ä¾‹å­2:\n1 2 3 4 5 6 7 8 9  var obj = { value: 1 }; function foo(o) { o.value = 2; console.log(o.value); //2 } foo(obj); console.log(obj.value) // 2   foo(obj) å‡½æ•°å¼€å§‹æ‰§è¡Œæ—¶ï¼Œåˆå§‹åŒ–AOï¼Œç„¶ååŠ å…¥å½¢å‚\nvar o = objï¼ŒæŠŠobjå€¼çš„å¼•ç”¨èµ‹å€¼ç»™äº†o\n æ ˆå†…å­˜å †å†…å­˜   objï¼ŒoæŒ‡é’ˆåœ°å€{value: 1}   æ­¤æ—¶o.value = 2ä¼šæ²¿ç€å¼•ç”¨æ‰¾åˆ°objæŒ‡å‘çš„å€¼å¹¶ä¿®æ”¹\n æ ˆå†…å­˜å †å†…å­˜   objï¼ŒoæŒ‡é’ˆåœ°å€{value: 2}   ä¾‹å­3:\n1 2 3 4 5 6 7 8 9  var obj = { value: 1 }; function foo(o) { o = 2; console.log(o); //2 } foo(obj); console.log(obj.value) // 1   foo(o) å‡½æ•°å¼€å§‹æ‰§è¡Œæ—¶ï¼Œåˆå§‹åŒ–AOï¼Œç„¶ååŠ å…¥å½¢å‚\nvar o = objï¼ŒæŠŠobjå€¼çš„å¼•ç”¨èµ‹å€¼ç»™äº†o\n æ ˆå†…å­˜å †å†…å­˜   objï¼ŒoæŒ‡é’ˆåœ°å€{value: 1}   æ­¤æ—¶o = 2ä¼šèµ‹å€¼oæŠŠæŒ‡é’ˆçš„å€¼è¦†ç›–ä¿®æ”¹ä¸º2\n æ ˆå†…å­˜å †å†…å­˜   objæŒ‡é’ˆåœ°å€{value: 1}   o2  ","description":"","id":43,"section":"restart-js","tags":["jsåŸºç¡€","å­¦ä¹ ç¬”è®°"],"title":"ä»å¤´å­¦ä¹ js-9-å‡½æ•°çš„å‚æ•°ä¼ é€’","uri":"https://llane.xyz/restart-js/9-%E5%87%BD%E6%95%B0%E7%9A%84%E5%8F%82%E6%95%B0%E4%BC%A0%E9%80%92/"},{"content":" è¿™ä¸ªç³»åˆ—æ˜¯æˆ‘è¯»å†´ç¾½è€å¸ˆåšå®¢çš„æ„Ÿæ‚Ÿï¼Œ\nåŠ å…¥äº†ä¸ªäººçš„è§£è¯»å’Œç»ƒä¹ é¢˜çš„è§£ç­”\n åœ¨MDNå¹¿æ³›å®šä¹‰ä¸­é—­åŒ…æŒ‡çš„æ˜¯èƒ½è®¿é—®è‡ªç”±å˜é‡çš„å‡½æ•°ï¼ˆè‡ªç”±å˜é‡æŒ‡çš„æ˜¯å³ä¸æ˜¯è¿™ä¸ªå‡½æ•°çš„å‚æ•°ä¹Ÿä¸æ˜¯è¿™ä¸ªå‡½æ•°çš„å†…éƒ¨å˜é‡ï¼‰\nç”±äºå‡½æ•°éƒ½æœ‰ä½œç”¨åŸŸé“¾ï¼Œæ‰€æœ‰å‡½æ•°éƒ½å¯ä»¥è®¿é—®åˆ°å…¨å±€ä¸Šä¸‹æ–‡ä¸­çš„å˜é‡é‚£æ‰€æœ‰å‡½æ•°å…¶å®éƒ½æ˜¯é—­åŒ…\nåœ¨å®é™…åœºæ™¯ä¸­ï¼Œå¯¹é—­åŒ…çš„å®šä¹‰æ›´åŠ å…·ä½“ï¼Œåœ¨ç¬¬7ç¯‡çš„ç¬¬äºŒä¸ªä¾‹å­ä¸­å…¶å®é‡åˆ°äº†é—­åŒ…çš„ç»å…¸ä¾‹å­\né—­åŒ…éœ€è¦æ»¡è¶³ï¼š\n1.å³ä½¿åˆ›å»ºå®ƒçš„ä¸Šä¸‹æ–‡å·²ç»é”€æ¯ï¼Œå®ƒä»ç„¶å­˜åœ¨ï¼ˆæ¯”å¦‚ï¼Œå†…éƒ¨å‡½æ•°ä»çˆ¶å‡½æ•°ä¸­è¿”å›ï¼‰\n2.åœ¨ä»£ç ä¸­å¼•ç”¨äº†è‡ªç”±å˜é‡\nåˆ†æä¸€ä¸ªä¾‹å­ï¼š\n1 2 3 4 5 6 7 8 9 10 11  var scope = \u0026#34;global scope\u0026#34;; function checkscope(){ var scope = \u0026#34;local scope\u0026#34;; function f(){ return scope; } return f; } var foo = checkscope(); foo(); //è¿™é‡Œä¼šæ‰“å°local scope   ä¾‹å­ä¸­çš„å‡½æ•°fåœ¨çˆ¶å‡½æ•°checkScopeä¸­ï¼Œ\nç”±äºçˆ¶å‡½æ•°ä¼šreturn fä¸”åœ¨ä¹‹åèµ‹å€¼ç»™fooè°ƒç”¨äº†ï¼Œæ‰€ä»¥å³ä½¿çˆ¶å‡½æ•°checkScopeæ‰§è¡Œç»“æŸï¼Œå‡½æ•°fä¹Ÿå­˜åœ¨\nå‡½æ•°fä¸­å¼•ç”¨äº†çˆ¶å‡½æ•°ä¸­çš„å˜é‡scopeæ‰€ä»¥å‡½æ•°fç¬¦åˆé—­åŒ…çš„å®šä¹‰\né€šè¿‡ä¹‹å‰çš„æ–‡ç« ï¼Œæˆ‘ä»¬å…¶å®çŸ¥é“æ›´æ·±çš„åŸå› äº†ï¼Œå°±æ˜¯å‡½æ•°fåœ¨åˆ›å»ºçš„æ—¶å€™å°±æ ¹æ®ä¸Šä¸‹æ–‡ä¿å­˜äº†ä¸€ä¸ªä½œç”¨åŸŸé“¾\nåœ¨å‡½æ•°fåˆå§‹åŒ–æ‰§è¡Œä¸Šä¸‹æ–‡çš„æ—¶å€™å¤åˆ¶äº†è¿™ä¸ªä½œç”¨åŸŸé“¾\n1 2 3 4  f.[[scope]] = [checkscopeContext.AO, globalContext.VO] fContext = { scope: [AO, checkscopeContext.AO, globalContext.VO] }   åœ¨æ²¿ç€ä½œç”¨åŸŸé“¾æŸ¥æ‰¾scopeå˜é‡æ—¶ï¼ŒAOä¸­æ²¡æœ‰ï¼Œè€Œç»§ç»­æŸ¥checkscopeContext.AOæ—¶æ‰¾åˆ°äº†scopeå˜é‡ï¼ˆå€¼ä¸ºlocal scopeï¼‰\nä¾‹å­2:\n1 2 3 4 5 6 7 8 9 10 11  var data = []; for (var i = 0; i \u0026lt; 3; i++) { data[i] = function () { console.log(i); }; } data[0](); data[1](); data[2]();   è¿™é“é¢˜æ˜¯éå¸¸ç»å…¸çš„é—­åŒ…é—®é¢˜ï¼Œå½“æ—¶ä½œä¸ºåˆå­¦è€…çš„æˆ‘æ— æ³•ç†è§£çœŸæ­£çš„åŸå› æœ€ååªèƒ½ç¡¬è®°ä¸‹ç»“è®º\nç°åœ¨æˆ‘ä»¬ç”¨ä½œç”¨åŸŸé“¾å’Œæ‰§è¡Œä¸Šä¸‹æ–‡çš„çŸ¥è¯†ç‚¹å°±å¯ä»¥æ‹¨å¼€äº‘é›¾äº†\né¦–å…ˆforä¸æ˜¯å‡½æ•°for ä¸­varå£°æ˜çš„iå…¶å®æ˜¯å…¨å±€å˜é‡ï¼Œ\nforå¾ªç¯æ‰§è¡Œå®Œåçš„æƒ…å†µæ˜¯è¿™æ ·çš„\n1 2 3 4 5 6 7 8 9 10  globalContext = { VO: { data: [ 0: reference to function(){console.log(i)}, //è¿™ä¸ªåŒ¿åå‡½æ•°çš„å†…éƒ¨å±æ€§[[scope]]=[globalContext.VO]  1: reference to function(){console.log(i)}, //è¿™ä¸ªåŒ¿åå‡½æ•°çš„å†…éƒ¨å±æ€§[[scope]]=[globalContext.VO]  2: reference to function(){console.log(i)}, //è¿™ä¸ªåŒ¿åå‡½æ•°çš„å†…éƒ¨å±æ€§[[scope]]=[globalContext.VO]  ], i: 3 } }   å‡½æ•°çš„å†…éƒ¨ä»£ç å¦‚æœåªæ˜¯åˆ›å»ºæ˜¯ä¸ä¼šå»æ‰§è¡Œçš„ï¼ŒåŒ¿åå‡½æ•°å†…éƒ¨è¿˜æ˜¯å˜é‡içš„æŒ‡å‘çŠ¶æ€ï¼Œ\nåœ¨ä¹‹åçœŸæ­£å¼€å§‹æ‰§è¡Œçš„æ—¶å€™data0,å¼€å§‹åˆ›å»ºAOï¼Œå®Œå–„æ‰§è¡Œä¸Šä¸‹æ–‡çš„ä½œç”¨åŸŸé“¾scope=[AO, globalContext.VO]\nAOä¸­æ²¡æœ‰iï¼Œå°±æ‰¾åˆ°äº†globalContextä¸­çš„iï¼Œè€Œæ­¤æ—¶globalContextä¸­çš„iå·²ç»æ˜¯3äº†ï¼Œ\næ‰€ä»¥ä¸‰ä¸ªåŒ¿åå‡½æ•°æœ€åéƒ½ä¼šæ‰“å°3\né€šå¸¸è¦è§£å†³è¿™ä¸ªé—®é¢˜ä¼šç”¨ä¸€ä¸ªæ–°çš„åŒ¿åå‡½æ•°å½¢æˆé—­åŒ…æˆ–è€…ç”¨let\næˆ‘ä»¬æƒ³åœ¨data[0]çš„æ‰§è¡Œä¸Šä¸‹æ–‡ä½œç”¨åŸŸé“¾æ¥é‡Œå¡ä¸ŠçœŸæ­£æœŸæœ›çš„iï¼Œscope=[AO, xContext.AO, globalContext.VO]\nxContext.AOä¸­å­˜æœ‰ä¸åŒçš„i\n1 2 3 4 5 6 7 8 9 10 11 12 13  var data = [] for (var i = 0; i \u0026lt; 3; i++) { data[i] = (function(i){ return function(){ console.log(i) } })(i); } data[0](); data[1](); data[2]();   (functionx(i){})(i)ç›¸å½“äº\nfunction x(i){}\nx(i)\nè¿™ä¸ªåŒ¿åå‡½æ•°ä¼šåœ¨data[0]çš„æ‰§è¡Œä¸Šä¸‹æ–‡çš„ä½œç”¨åŸŸä¸­æ’å…¥ï¼Œ\næ­¤æ—¶data[0]åœ¨æ‰§è¡Œæ—¶ï¼Œä½œç”¨åŸŸå˜ä¸º\n1 2 3 4 5 6 7 8 9 10 11 12 13  data[0]Context = { scope: [AO, åŒ¿åå‡½æ•°Context.AO, globalContext.VO] } åŒ¿åå‡½æ•°Context = { AO: { arguments: { 0:0, length: 1 }, i: 0 } }   data[0]Context.AOä¸­æ²¡æœ‰iå€¼ï¼Œæ²¿ç€ä½œç”¨åŸŸæ‰¾åˆ°äº†åŒ¿åå‡½æ•°Contextä¸­çš„i\nåœ¨forå¾ªç¯çš„æ—¶å€™åŒ¿åå‡½æ•°ç«‹å³æ‰§è¡Œäº†æ‰åœ¨AOä¸­ä¿ç•™äº†ä¸åŒçš„iï¼Œå¦‚æœæ²¡æœ‰ç«‹å³æ‰§è¡Œä¹Ÿåªæ˜¯ä¿ç•™äº†ä¸€ä¸ªæŒ‡å‘içš„å€¼\n","description":"","id":44,"section":"restart-js","tags":["jsåŸºç¡€","å­¦ä¹ ç¬”è®°"],"title":"ä»å¤´å­¦ä¹ js-8-é—­åŒ…","uri":"https://llane.xyz/restart-js/8-%E9%97%AD%E5%8C%85/"},{"content":" è¿™ä¸ªç³»åˆ—æ˜¯æˆ‘è¯»å†´ç¾½è€å¸ˆåšå®¢çš„æ„Ÿæ‚Ÿï¼Œ\nåŠ å…¥äº†ä¸ªäººçš„è§£è¯»å’Œç»ƒä¹ é¢˜çš„è§£ç­”\n æœ¬ç¯‡æ˜¯3ã€4ã€5ã€6ç¯‡çš„æ±‡æ€»ï¼Œä¼šç”¨ä¸¤ä¸ªä¾‹å­æ¥è¯¦ç»†è¯´æ˜æ‰§è¡Œä¸Šä¸‹æ–‡çš„è¿è¡Œæµç¨‹\nä¾‹å­1 1 2 3 4 5 6 7 8 9  var scope = \u0026#34;global scope\u0026#34;; function checkscope(){ var scope = \u0026#34;local scope\u0026#34;; function f(){ return scope; } return f(); } checkscope();   1.æ‰§è¡Œå…¨å±€ä»£ç ï¼Œåˆ›å»ºå…¨å±€ä¸Šä¸‹æ–‡ï¼Œå…¨å±€ä¸Šä¸‹æ–‡å‹å…¥æ‰§è¡Œä¸Šä¸‹æ ˆ\n1 2 3  ECStack = [ globalContext ]   2.åˆå§‹åŒ–å…¨å±€ä¸Šä¸‹æ–‡\n1 2 3 4 5  globalContext = { VO: [global], scope: [globalContext.VO], this: globalContext.VO }   2.åˆå§‹åŒ–çš„åŒæ—¶ï¼Œåˆ›å»ºcheckScopeå‡½æ•°ï¼Œcheckscopeå‡½æ•°ä¿å­˜ä½œç”¨åŸŸé“¾åˆ°å‡½æ•°å†…éƒ¨å±æ€§\n1  checkscope.[[scope]] = [globalContext.VO];   3.æ‰§è¡Œcheckscopeå‡½æ•°ï¼Œåˆ›å»ºcheckScopeæ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå‹å…¥æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ\n1 2 3 4  ECStack = [ checkscopeContext, globalContext ]   4.åˆå§‹åŒ–checkScopeæ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œ\n4.1å¤åˆ¶checkscopeå‡½æ•°çš„å†…éƒ¨å±æ€§[[scope]]åˆ›å»ºä½œç”¨åŸŸé“¾\n4.2ç”¨argumentsåˆ›å»ºAOæ´»åŠ¨å¯¹è±¡ï¼Œ\n4.3åˆå§‹åŒ–æ´»åŠ¨å¯¹è±¡ï¼Œå³åŠ å…¥å‡½æ•°å½¢å‚ï¼Œå‡½æ•°å£°æ˜ï¼Œå˜é‡å£°æ˜\n4.4å°†æ´»åŠ¨å¯¹è±¡å‹å…¥checkscopeçš„ä½œç”¨åŸŸé¡¶ç«¯\n1 2 3 4 5 6 7 8 9 10 11  checkscopeContext = { AO: { arguments: { length: 0 }, scope: undefined, f: reference to fucntion f(){} }, scope: [AO, globalContext.VO], this: undefined }   åŒæ—¶få‡½æ•°è¢«åˆ›å»ºï¼Œä¿å­˜ä½œç”¨åŸŸé“¾åˆ°få‡½æ•°å†…éƒ¨å±æ€§[[scope]]\n1  f.[[scope]] = [checkscopeContext.AO, globalContext.VO];   5.æ‰§è¡Œfå‡½æ•°ï¼Œåˆ›å»ºfå‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå°†å…¶å‹å…¥æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ\n1 2 3 4 5  ECStack = [ fContext, checkscopeContext, globalContext ]   6.få‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡åˆå§‹åŒ–ï¼Œ\n6.1å¤åˆ¶å‡½æ•°[[scope]]å±æ€§åˆ›å»ºä½œç”¨åŸŸé“¾\n6.2ç”¨argumentsåˆ›å»ºæ´»åŠ¨å¯¹è±¡\n6.3èˆ’é€‚åŒ–æ´»åŠ¨å¯¹è±¡ï¼Œå³åŠ å…¥å½¢å‚ï¼Œå‡½æ•°å£°æ˜ï¼Œå˜é‡å£°æ˜\n6.4å°†æ´»åŠ¨å¯¹è±¡å‹å…¥fä½œç”¨åŸŸé¡¶ç«¯\n1 2 3 4 5 6 7 8 9  fContext = { AO: { arguments: { length: 0 }, }, scope: [AO, checkScopeContext.AO, globalContext.VO], this: undefined }   7.æ‰§è¡Œå‡½æ•°fï¼Œæ²¿ç€ä½œç”¨åŸŸé“¾æ‰¾åˆ°scopeçš„å€¼ï¼Œè¿”å›scopeçš„å€¼\n8.å‡½æ•°fæ‰§è¡Œå®Œæ¯•åï¼Œåœ¨ECStackä¸­å‡ºæ ˆ\n1 2 3 4 5  ECStack.pop() ECStack = [ checkscopeContext, globalContext ]   9.å‡½æ•°checkScopeæ‰§è¡Œå®Œæ¯•ååœ¨ECStackå‡ºæ ˆï¼Œ\n1 2 3 4  ECStack.pop() ECStack = [ globalContext ]   ä¾‹å­2 ä¾‹å­2å’Œä¾‹å­å¾ˆç›¸ä¼¼\n1 2 3 4 5 6 7 8 9  var scope = \u0026#34;global scope\u0026#34;; function checkscope(){ var scope = \u0026#34;local scope\u0026#34;; function f(){ return scope; } return f; } checkscope()();   1.å¼€å§‹æ‰§è¡Œå…¨å±€ä»£ç ï¼Œåˆ›å»ºå…¨å±€ä¸Šä¸‹æ–‡ï¼Œå¹¶å°†å…¶å‹å…¥ä¸Šä¸‹æ–‡æ‰§è¡Œæ ˆ\n1 2 3  ECStack = [ globalContext ]   2.åˆå§‹åŒ–å…¨å±€ä¸Šä¸‹æ–‡\n1 2 3 4 5  globalContext = { VO: [global], scope: globalContext.VO, this: globalContext.VO }   2.åˆå§‹åŒ–çš„åŒæ—¶åˆ›å»ºå‡½æ•°checkscopeï¼Œå‡½æ•°checkScopeä¿å­˜ä½œç”¨åŸŸé“¾åˆ°å…¶å†…éƒ¨å±æ€§[[scope]]\n1  checkscope.[[scope]] = [globalContext.VO];   3.æ‰§è¡Œå‡½æ•°checkScopeï¼Œåˆ›å»ºcheckScopeå‡½æ•°çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå¹¶å°†å…¶å‹å…¥ä¸Šä¸‹æ–‡æ‰§è¡Œæ ˆ\n1 2 3 4  ECStack = [ checkScopeContext, globalContext ]   4.åˆå§‹åŒ–checkScopeæ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œ\n4.1ä¿å­˜å‡½æ•°çš„å†…éƒ¨å±æ€§[[scope]]åˆ°æ‰§è¡Œä¸Šä¸‹æ–‡çš„ä½œç”¨åŸŸé“¾\n4.2æ ¹æ®å‡½æ•°çš„argumentsåˆ›å»ºæ´»åŠ¨å¯¹è±¡AO\n4.3åˆå§‹åŒ–æ´»åŠ¨å¯¹è±¡ï¼Œå³åŠ å…¥å‡½æ•°å½¢å‚ï¼Œå‡½æ•°å£°æ˜ï¼Œå˜é‡å£°æ˜\n4.4å°†æ´»åŠ¨å¯¹è±¡å‹å…¥checkscopeä½œç”¨åŸŸçš„é¡¶ç«¯\n1 2 3 4 5 6 7 8 9 10 11  checkScopeContext = { AO: { arguments: { length: 0 }, scope: undefined, f: reference to fucntion f(){} }, scope: [AO, globalContext], this: undefined }   4.åŒæ—¶åˆ›å»ºå‡½æ•°fï¼Œä¿å­˜ä½œç”¨åŸŸé“¾åˆ°få‡½æ•°å†…éƒ¨å±æ€§[[scope]]\n1  f.[[scope]] = [checkscopeContext.AO, globalContext.VO];   5.æ²¿ç€ä½œç”¨åŸŸæ‰¾åˆ°å‡½æ•°fçš„æŒ‡å‘ï¼Œè¿”å›å‡½æ•°fçš„æŒ‡å‘ï¼Œå‡½æ•°checkScopeæ‰§è¡Œå®Œæ¯•ååœ¨ECStackå‡ºæ ˆ\n1 2 3 4  ECStack.pop() ECStack = [ globalContext ]   6.æ‰§è¡ŒcheckScopeè¿”å›çš„å‡½æ•°fï¼Œåˆ›å»ºå‡½æ•°fçš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå°†å…¶å‹å…¥æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ\n1 2 3 4  ECStack = [ fContext, globalContext ]   7.åˆå§‹åŒ–fçš„æ‰§è¡Œä¸Šä¸‹æ–‡fContext\n7.1å¤åˆ¶å‡½æ•°å†…éƒ¨å±æ€§scopeåˆ°å‡½æ•°ä¸Šä¸‹æ–‡çš„ä½œç”¨åŸŸé“¾\n7.2æ ¹æ®å‡½æ•°çš„argumentsåˆ›å»ºæ´»åŠ¨å¯¹è±¡AO\n7.3åˆå§‹åŒ–æ´»åŠ¨å¯¹è±¡ï¼Œå³åŠ å…¥å‡½æ•°å½¢å‚ï¼Œå‡½æ•°å£°æ˜ï¼Œå˜é‡å£°æ˜\n7.4å°†æ´»åŠ¨å¯¹è±¡å‹å…¥å‡½æ•°ä¸Šä¸‹æ–‡ä½œç”¨åŸŸé“¾çš„é¡¶ç«¯\n1 2 3 4 5 6 7 8 9  fContext = { AO: { arguments: { length: 0 } } scope: [AO, checkScopeContext.AO, globalContext] this: undefined }   8.æ‰§è¡Œå‡½æ•°fï¼Œæ²¿ç€ä½œç”¨åŸŸé“¾æ‰¾åˆ°scopeçš„å€¼ï¼ˆè¿™é‡Œæ˜¯åœ¨checkScopeContext.AOé‡Œæ‰¾åˆ°scopeçš„ï¼Œå³ä¾¿checkScopeContext.AOå·²ç»åœ¨ECStackä¸­å‡ºæ ˆï¼Œè¿™å°±æ˜¯é—­åŒ…çš„åŸç†ï¼‰ï¼Œè¿”å›scopeçš„å€¼\n7.å‡½æ•°fæ‰§è¡Œå®Œæ¯•åï¼Œfçš„æ‰§è¡Œä¸Šä¸‹æ–‡ä»æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆä¸­å¼¹å‡º\n1 2 3 4  ECStack.pop() ECStack = [ globalContext ]   ","description":"","id":45,"section":"restart-js","tags":["jsåŸºç¡€","å­¦ä¹ ç¬”è®°"],"title":"ä»å¤´å­¦ä¹ js-7-æ‰§è¡Œä¸Šä¸‹æ–‡æ±‡æ€»ç¯‡","uri":"https://llane.xyz/restart-js/7-%E6%89%A7%E8%A1%8C%E4%B8%8A%E4%B8%8B%E6%96%87%E6%B1%87%E6%80%BB%E7%AF%87/"},{"content":" è¿™ä¸ªç³»åˆ—æ˜¯æˆ‘è¯»å†´ç¾½è€å¸ˆåšå®¢çš„æ„Ÿæ‚Ÿï¼Œ\nåŠ å…¥äº†ä¸ªäººçš„è§£è¯»å’Œç»ƒä¹ é¢˜çš„è§£ç­”\n thisä¸€ç›´éƒ½æ˜¯å­¦ä¹ jsçš„æ—¶å€™å¾ˆå¤´ç–¼çš„ä¸œè¥¿ï¼Œ\nç»§ç»­æ¥ç€ä¸Šç¯‡è¯´ï¼Œå½“javascriptä»£ç æ‰§è¡Œä¸€æ®µå¯æ‰§è¡Œä»£ç (executable code)æ—¶ï¼Œä¼šåˆ›å»ºå¯¹åº”çš„æ‰§è¡Œä¸Šä¸‹æ–‡(execution context)\né‚£å¯¹äºæ¯ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œéƒ½æœ‰ä¸‰ä¸ªé‡è¦å±æ€§ï¼š\n å˜é‡å¯¹è±¡(Variable object, VO) ä½œç”¨åŸŸé“¾(Scope chain) this  æœ¬æ–‡ä¸»è¦è®²æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­çš„this\né¦–å…ˆäº†è§£ECMAScriptè§„èŒƒ æˆ‘ä»¬æ ¹æ®ECMAScriptè§„èŒƒæ¥è§£è¯»this\nECMAScript 5.1 è§„èŒƒåœ°å€ï¼š\nè‹±æ–‡ç‰ˆï¼šhttp://es5.github.io/#x15.1\nä¸­æ–‡ç‰ˆï¼šhttp://yanhaijing.com/es5/#115\njavascript æœ‰8ç§æ•°æ®ç±»å‹ï¼ŒUndefined,Null,Boolean,Number,String,Object,Symbol,Bigint\nè¿™æ˜¯æˆ‘ä»¬åœ¨ç¼–ç¨‹æ—¶å¯ä»¥ç›´æ¥æ“ä½œä½¿ç”¨çš„æ•°æ®ç±»å‹ï¼Œ\nåœ¨javascriptçš„åº•å±‚é€»è¾‘ä¸­è¿˜æœ‰ä¸€äº›åªå­˜åœ¨äºè§„èŒƒé‡Œçš„æŠ½è±¡ç±»å‹ï¼š\nReferenceï¼Œ\nListï¼Œ\nCompletionï¼Œ\nPropertyï¼Œ\nDescriptorï¼Œ\nProperty Identifierï¼Œ\nLexical Environmentï¼Œ\nEnvironment Record\nè¿™äº›è§„èŒƒç±»å‹æ˜¯ç”¨ç®—æ³•æè¿°ECMAScriptè¯­è¨€ç»“æ„å’Œè¯­è¨€ç±»å‹çš„ï¼Œ\nå…¶ä¸­ä¸thisçš„æŒ‡å‘æœ‰å…³çš„æ˜¯Referenceç±»å‹\nReferenceç”±ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆï¼š\n1.base value (å±æ€§æ‰€åœ¨çš„å¯¹è±¡æˆ–è€…æ˜¯EnvironmentRecordï¼Œæ‰€ä»¥å®ƒçš„å€¼åªèƒ½æ˜¯undefined, an Object, a Boolean, a String, a, Number or an environment record)\n2.reference name (å±æ€§åç§°)\n3.strict reference\nä¸¾ä¸ªä¾‹å­ï¼š\n1 2 3 4 5 6 7 8  var foo = 1; //fooå¯¹åº”çš„Referenceæ˜¯ var fooReference = { base: EnvironmentRecoed, name: \u0026#39;foo\u0026#39;, strict: false }   1 2 3 4 5 6 7 8 9 10 11 12 13 14  var foo = { bar: function() { return this; } } foo.bar(); //barå¯¹åº”çš„Referenceæ˜¯ var barReference = { base: foo, propertyName: \u0026#39;bar\u0026#39;, strict: false };   Referenceæ¶‰åŠåˆ°çš„æ–¹æ³•æœ‰ï¼š\n1.GetBase è¿”å›base value\n2.isProperty åˆ¤æ–­base valueæ˜¯ä¸æ˜¯ä¸€ä¸ªå¯¹è±¡\n3.GetVlaue ä»Referenceå¤„è¿”å›ä¸€ä¸ªçœŸæ­£çš„å€¼ï¼ˆå…·ä½“çš„å€¼ï¼Œä¸æ˜¯Referenceï¼‰\næŒ‰æ­¥éª¤ç¡®å®šthisçš„æŒ‡å‘ è§„èŒƒä¸­ç¡®å®šthisçš„å€¼ï¼Œæœ‰æ˜ç¡®çš„æ­¥éª¤åˆ¤æ–­ï¼š\n1.è®¡ç®—MemberExpressionçš„ç»“æœèµ‹å€¼ç»™ref\n2.åˆ¤æ–­refæ˜¯ä¸æ˜¯ä¸€ä¸ªReferenceç±»å‹\n2.1 å¦‚æœrefæ˜¯Referenceï¼Œå¹¶ä¸”base valueå€¼æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ˆisProperty(ref)ä¸ºtrueï¼‰ï¼Œé‚£ä¹ˆthisçš„å€¼å°±æ˜¯base valueï¼ˆç”¨getBaseè·å¾—ï¼‰\n2.2 å¦‚æœrefæ˜¯Referenceï¼Œå¹¶ä¸”base valueå€¼æ˜¯Environment Recordï¼Œé‚£ä¹ˆthisçš„å€¼æ˜¯ImplicitThisValue(ref)\n2.3 å¦‚æœrefä¸æ˜¯Referenceï¼Œé‚£ä¹ˆthisçš„å€¼æ˜¯undefined\næ­¥éª¤1ä¸­ MemberExpressionåˆ†åˆ«æœ‰ï¼š\nPrimaryExpression //åŸå§‹è¡¨è¾¾å¼\nFunctionExpression //å‡½æ•°è¡¨è¾¾å¼\nMemberExpression [Expression] //å±æ€§[]è®¿é—®è¡¨è¾¾å¼\nMemberExpression.IdentifierName //å±æ€§.è®¿é—®è¡¨è¾¾å¼\nnew MemberExpression Arguments //å¯¹è±¡åˆ›å»ºè¡¨è¾¾å¼\nä¾‹å­ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21  function foo() { console.log(this) } foo(); //MemberExpressionæ˜¯foo  function foo() { return function () { console.log(this) } } foo()(); //MemberExpressionæ˜¯foo()  var foo = { bar: function() { return this } } foo.bar(); //MemberExpressionæ˜¯foo.bar   å¯ä»¥ç®€å•åˆ¤æ–­MemberExpressionæ˜¯()å·¦è¾¹çš„éƒ¨åˆ†\næ­¥éª¤2ä¸­åˆ¤æ–­refæ˜¯ä¸æ˜¯ä¸€ä¸ªReferenceç±»å‹\nä¾‹å­ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23  var value = 1; var foo = { value: 2, bar: function() { return this.value; } } //example1 console.log(foo.bar()) //example2 console.log((foo.bar)()) //example3 console.log((foo.bar = foo.bar)()) //example4 console.log((false || foo.bar)()) //example5 console.log((foo.bar, foo.bar)())   example1\nMemberExpressionä¸ºfoo.barå±äºè§„èŒƒ11.2ä¸­æåˆ°çš„å±æ€§è®¿é—®ï¼Œä»–ä¼šè¿”å›ä¸€ä¸ªå€¼ç±»å‹çš„å¼•ç”¨\næ‰€ä»¥foo.barä¼šè¿”å›ä¸€ä¸ªReferenceç±»å‹\n1 2 3 4 5  var Reference = { base: foo, name: \u0026#39;bar\u0026#39;, strict: false }   ç¬¦åˆç¡®å®šthisçš„æ­¥éª¤ä¸­2.1ï¼ŒIsPropertyReference(ref) ä¸º trueï¼Œä¸”base valueä¸ºfoo\næ‰€ä»¥thisæŒ‡å‘foo\nconsole.logæ‰“å°1\nexample2\n(foo.bar)æ˜¯è§„èŒƒ11.1.6ä¸­æåˆ°çš„åˆ†ç»„è¡¨è¾¾å¼ï¼Œä¼šè¿”å›ä¸€ä¸ªReferenceç±»å‹ï¼Œ\nåé¢çš„æ­¥éª¤å’Œexample1ä¸€æ ·æ‰€ä»¥thisæŒ‡å‘foo\nconsole.logæ‰“å°1\nexample3\n(foo.bar = foo.bar)æ˜¯è§„èŒƒ11.13.1ä¸­æåˆ°çš„ç®€å•èµ‹å€¼ä¼šè¿”å›ä¸€ä¸ªrvalä¸æ˜¯ä¸€ä¸ªReferenceï¼Œ\nå¯¹ç…§thisåˆ¤æ–­æ­¥éª¤çš„2.3ï¼Œthisçš„å€¼å°±æ˜¯undefinedï¼ˆéä¸¥æ ¼æ¨¡å¼ä¸‹ä¼šéšå¼è½¬æ¢ä¸ºå…¨å±€å˜é‡ï¼Œæµè§ˆå™¨ä¸­å°±æ˜¯windowï¼‰\nconsole.logæ‰“å°2\nexample4\n(false || foo.bar)æ˜¯è§„èŒƒ11.11ä¸­æåˆ°çš„äºŒå…ƒé€»è¾‘è¿ç®—ç¬¦ä¼šè¿”å›GetValue(rref)ä¸æ˜¯ä¸€ä¸ªReferenceï¼Œ\nå¯¹ç…§thisåˆ¤æ–­æ­¥éª¤2.3ï¼Œthisçš„å€¼å°±æ˜¯undefined\nconsole.logæ‰“å°2\nexample5\n(foo.bar, foo.bar)æ˜¯è§„èŒƒ11.14ä¸­æåˆ°çš„é€—å·è¿ç®—ç¬¦ä¼šè¿”å›GetValue(rref)ä¸æ˜¯ä¸€ä¸ªReferenceï¼Œ\nå¯¹ç…§thisåˆ¤æ–­æ­¥éª¤2.3ï¼Œthisçš„å€¼æ˜¯undefined\nconsole.logæ‰“å°2\nçœ‹ä¸€ä¸ªæœ€å¸¸è§çš„æƒ…å†µ\n1 2 3 4 5 6  //example6 function foo() { console.log(this) } foo()   MemberExpressionæ˜¯fooï¼Œæ˜¯è§„èŒƒ10.3.1ä¸­æåˆ°çš„æ ‡è¯†ç¬¦è§£æä¼šè¿”å›ä¸€ä¸ªå¼•ç”¨å¯¹è±¡Referenceï¼Œ\n1 2 3 4 5  var fooReference = { base: Environment, name: \u0026#39;foo\u0026#39;, strict: false }   å¯¹ç…§thisåˆ¤æ–­æ­¥éª¤2.2, thisçš„å€¼ä¸º ImplicitThisValue(ref)\nåœ¨è§„èŒƒ10.2.1.1.6ä¸­å¯¹ImplicitThisValueçš„è§£é‡Šä»–å§‹ç»ˆè¿”å›undefined\næ‰€ä»¥thisæŒ‡å‘undefined\nä¸ç®¡æ€ä¹ˆæ ·æŒ‰ç…§è§„èŒƒå»è§£è¯»thisæŒ‡å‘ä»æ­¥éª¤å’Œé€»è¾‘ä¸Šæ˜¯æ›´ä¸ºæ¸…æ™°çš„\n","description":"","id":46,"section":"restart-js","tags":["jsåŸºç¡€","å­¦ä¹ ç¬”è®°"],"title":"ä»å¤´å­¦ä¹ js-6-This","uri":"https://llane.xyz/restart-js/6-this/"},{"content":"React ç†å¿µï¼šUI = f(data)\nçº¯å‡½æ•°åœ¨åŠ è½½ä¸åŒæ•°æ®åäº§ç”Ÿäº†ä¸åŒçš„ UI\nuseState 1 2 3 4  const [n, setN] = useState(0) console.log(n) //è¯» onClick = () =\u0026gt; setN(n + 1) //å†™ onClick2 = () =\u0026gt; setN((i) =\u0026gt; i + 1) //ä¹Ÿæ”¯æŒä¼ å…¥ä¸€ä¸ªåŒ¿åå‡½æ•°   éšç€ç»„ä»¶æ›´æ–° renderï¼ŒuseState ä¼šäº§ç”Ÿå¤šä¸ª nï¼Œä½†æ¯æ¬¡ get çš„ n æ˜¯æœ€æ–°çš„ n\nç»„ä»¶æ¯æ¬¡é‡æ–°æ¸²æŸ“ï¼Œç»„ä»¶é‡Œçš„å‡½æ•°éƒ½ä¼šé‡æ–°æ‰§è¡Œï¼Œ\nå¯¹åº”çš„æ‰€æœ‰ state éƒ½ä¼šå‡ºç°é‡å¤åˆ†èº«\nå¦‚æœä½ ä¸å¸Œæœ›å‡ºç°é‡å¤åˆ†èº«çš„å˜é‡\nå¯ä»¥ç”¨ useRef/useContext ç­‰\nå¦‚ï¼š\n1 2 3  const nRef = useRef(0) console.log(nRef.current) onClick = () =\u0026gt; (nRef.current += 1)   useState ä¸èƒ½å±€éƒ¨æ›´æ–°\nuseState å¦‚æœæ•°æ®åœ°å€æ²¡å˜é‚£ä¹ˆ react å°±ä¸ä¼šé‡æ–° render æ›´æ–°\nå¦‚æœ useState çš„å¯¹è±¡ç”Ÿæˆå¤æ‚å»ºè®®æŠŠåˆå§‹å€¼å†™æˆä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œä¸ç„¶æ¯æ¬¡é‡æ–°æ¸²æŸ“æ—¶éƒ½è¦åšå¤šä½™çš„è®¡ç®—å¼€é”€\nuseState(() =\u0026gt; ({ name: â€™neo' }))\nsetState ä¼šåˆå¹¶å¤šä¸ªåŒçº§åˆ«çš„å¯¹ n çš„æ“ä½œï¼Œ\nå¦‚ï¼š\n1 2 3 4  setN(n + 1) setN(n + 1) setN(n + 1) //è¿™æ®µä»£ç åªä¼šæ‰§è¡Œä¼šåä¸€è¡Œçš„setN(n+1)   1 2 3 4  setN(n + 1) setN(n + 2) setN(n + 3) //åŒä¸Šä¹Ÿåªä¼šæ‰§è¡Œæœ€åçš„setN(n+3)   æ‰€ä»¥ setState å»ºè®®ä¼ å…¥ä¸€ä¸ªåŒ¿åå‡½æ•°æ–¹æ³•ï¼Œå¯ä»¥é˜²æ­¢ä¸Šé¢çš„åˆå¹¶æ“ä½œï¼Œä¹Ÿå¯ä»¥é˜²æ­¢ä»£ç å‡ºç°è¿‡æ—¶çš„é—­åŒ…ï¼Œ\næ¯”å¦‚: setN(i =\u0026gt; i + 1)\nuseReducer useReducer æ˜¯ä¸€ä¸ªæŠŠå¯¹ state çš„æ‰€æœ‰æ“ä½œéƒ½èšæ‹¢åœ¨å†…çš„ useState\nç”¨æ¥è·µè¡Œ flux æ€æƒ³ï¼Œå…·ä½“è¿‡ç¨‹å¦‚ä¸‹ï¼š\n1.åˆ›å»ºåˆå§‹å€¼ initialState\n2.åˆ›å»ºæ‰€æœ‰æ“ä½œ reducer(state, action)\n3.ä¼ ç»™ useReducerï¼Œå¾—åˆ°è¯»å’Œå†™ api\n4.è°ƒç”¨æ—¶å†™ ({ type: â€˜æ“ä½œç±»å‹' })\nredux ä¸»è¦åšåˆ°äº†ï¼š\n1.é›†ä¸­ç®¡ç†å…¨å±€çŠ¶æ€å’Œå¯¹çŠ¶æ€çš„æ“ä½œ\n2.æä¾›æ‰€æœ‰å­ç»„ä»¶å¯ä»¥åœ¨ä¸Šä¸‹æ–‡ä¸­è¯»å†™å…¨å±€çŠ¶æ€\nuseContext ç°åœ¨å¯ä»¥ç”¨ useState/useReducer å’Œ useContext æ¥ä»£æ›¿ redux\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31  const AppContext = React.createContext(null) //å¯ä»¥ç”¨useStateç”Ÿæˆè¯»å†™ const [name, setName] = useState(\u0026#39;the_one\u0026#39;); //ä¹Ÿå¯ä»¥ç”¨useReduceræ¥ç”Ÿæˆè¯»å†™ const initialState = {age:0, sex:\u0026#39;male\u0026#39;} const reducer = (prevState, action) =\u0026gt; { swicth (action.type) { case \u0026#39;age\u0026#39;: return { ...prevState, age: action.payload } case \u0026#39;sex\u0026#39;: return { ...prevState, sex: action.payload } default: throw new Error(\u0026#39;error action type\u0026#39;) break; } } const [ personInfo, dispatch ] = useReducer(reducer, initialState) //ç”¨AppContext.Provideræ¥åŒ…è£¹ï¼Œåœ¨valueä¸­ä¼ å…¥è¦å…¨å±€ä½¿ç”¨çš„è¯»å†™nameæ“ä½œ \u0026lt;AppContext.Provider value={{name, setName, personInfo, dispatch}}\u0026gt; \u0026lt;CompontentA/\u0026gt; \u0026lt;CompontentB/\u0026gt; \u0026lt;/AppContext.Provider\u0026gt;   1 2 3 4 5 6  //åœ¨ç»„ä»¶Aå’Œç»„ä»¶Bä¸­å°±å¯ä»¥è·å–contextä¸­çš„vaule //const {name, setName, personInfo, dispatch} = useContext(AppContext)  setName(\u0026#39;Neo\u0026#39;) dispatch({ type: \u0026#39;age\u0026#39;, payload: \u0026#39;25\u0026#39; }) console.log(name, personInfo)   useEffect useEffectï¼ˆå®šä¹‰ï¼šæ‰§è¡Œåœ¨ render åçš„å‰¯ä½œç”¨ï¼‰\nä¾èµ–å‚æ•°ä¸­æ•°ç»„é‡Œçš„å€¼çš„å˜åŒ–æ¥å†³å®šæ˜¯å¦è¦æ‰§è¡Œå‡½æ•°\nApp() -\u0026gt; æ‰§è¡Œ -\u0026gt; VDOM(VNode)\n-\u0026gt; DOM -\u0026gt;useLayoutEffect -\u0026gt; æµè§ˆå™¨æ”¹å˜å¤–è§‚ -\u0026gt; useEffect\nuseEffect åœ¨æµè§ˆå™¨æ¸²æŸ“å®Œæˆåæ‰§è¡Œ\nuseLayoutEffect åœ¨æµè§ˆå™¨æ¸²æŸ“å‰æ‰§è¡Œ\nuseLayoutEffect æ€»æ˜¯æ¯” useEffect å…ˆæ‰§è¡Œï¼Œ\nuseLayoutEffect é‡Œçš„ä»»åŠ¡æœ€å¥½æ˜¯å½±å“äº† useEffect\nuseMemo \u0026amp;\u0026amp; useCallBack useMemo å¯ä»¥å®ç°å‡½æ•°çš„é‡ç”¨ï¼Œé˜²æ­¢åœ¨å¤šæ¬¡ render çš„æ—¶å€™åšä¸å¿…è¦çš„é‡å¤åˆ›å»ºå’Œæ‰§è¡Œå‡½æ•°\nç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ ()=\u0026gt;value\nç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¾èµ– [m,n]\nåªæœ‰å½“ä¾èµ–ä¸å˜æ—¶ï¼Œæ‰ä¼šè®¡ç®—æ–°çš„ valueï¼Œ\nå¦‚æœä¾èµ–ä¸å˜ï¼Œé‚£ä¹ˆå°±é‡ç”¨ä¹‹å‰çš„ value\nï¼ˆvue2 computedï¼Ÿï¼‰\nå¦‚æœ value æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œé‚£ä¹ˆè¦å†™æˆ\n()=\u0026gt; ((x)=\u0026gt; console.log(x))\nå¯ä»¥ç”¨ useCallBack ç®€åŒ–\nuseCallback(x=\u0026gt;log(x), [m]) ç­‰ä»·äº\nuseMemo(() =\u0026gt; x =\u0026gt; log(x), [m])\nuseRef useRef çš„ç›®çš„ï¼šåœ¨ç»„ä»¶ä¸æ–­ render æ—¶ï¼Œéœ€è¦ä¸€ä¸ªå€¼ä¿æŒä¸å˜ï¼Œæ¯”å¦‚å¯ä»¥ç´¯ç§¯è®¡ç®—ä¹‹ç±»çš„\nuseRef åŸç†ï¼šç”¨å¯¹è±¡çš„å½¢å¼æ¥å­˜å˜é‡ï¼Œåœ¨å¯¹è±¡é‡Œå¯ä»¥åšåˆ°æ”¹å˜å¯¹è±¡çš„å€¼ï¼Œè€Œä¸å˜å¯¹è±¡çš„åœ°å€\nä¸ºäº†ä¿è¯å€¼ä¸å˜ï¼Œæ‰€ä»¥ä½¿ç”¨å¼•ç”¨\nåˆå§‹åŒ–ï¼šconst count = useRef(0)\nè¯»å–ï¼šcount.current\næ±‡æ€» App() é‡å¤ renderingâ€¦\næ¯æ¬¡å˜ useState/useRenderï¼ŒsetN ä¼šè§¦å‘é‡æ–° render\næœ‰æ¡ä»¶æ—¶å˜ useMemo/useCallBackï¼Œé˜²æ­¢å‡½æ•°æœ‰å¤šä½™çš„ render\nä¸å˜ useRef ï¼Œæ”¹å˜å€¼ä¸ä¼šè§¦å‘é‡æ–° render\nï¼ˆvue3 ref å€¼æœ‰å˜åŒ–ä¼šè‡ªåŠ¨ renderï¼‰\nReact.forwardRef æˆ‘ä»¬å¯ä»¥ç»™ä¸€ä¸ªå‡½æ•°ç»„ä»¶ä¸€ä¸ª ref æ¥æ–¹ä¾¿å¼•ç”¨ä¸€ä¸ªç»„ä»¶ï¼ˆå°±å¯ä»¥ä¸ç”¨ getElementById äº†ï¼‰ï¼Œ\nä½†æ˜¯å‡½æ•°å¼ç»„ä»¶ä¸èƒ½ç›´æ¥ç”¨ useRef äº§ç”Ÿçš„ refï¼ˆclass ç»„ä»¶å¯ä»¥ç›´æ¥ç”¨ï¼‰ï¼Œå› ä¸ºå‡½æ•°å¼ç»„ä»¶çš„ props é‡Œä¸åŒ…å« ref\næ­¤æ—¶éœ€è¦ç”¨ React.forwardRef åŒ…è£¹ä¸€ä¸‹å‡½æ•°ç»„ä»¶æ¥è·å¾— ref\n1 2 3 4 5 6 7 8 9 10 11 12  function App() { const buttonRef = useRef(null); return ( \u0026lt;div className=\u0026#34;app\u0026#34;\u0026gt; \u0026lt;Button2 ref={buttonRef}\u0026gt;æŒ‰é’®\u0026lt;/Button2\u0026gt; \u0026lt;/div\u0026gt; ) } const Button2 = React.forwardRef((props, ref) =\u0026gt; { return \u0026lt;button className=\u0026#34;red\u0026#34; ref={ref} {â€¦props} /\u0026gt; })   useImpreativeHandle useImpreativeHandle å¯ä»¥ä»¥ ref ä¸ºå‚æ•°è¿”å›ä¸€ä¸ªè‡ªå®šä¹‰çš„ ref å¯¹è±¡ï¼Œå°è£… ref å¯¹è±¡ï¼Œéšè—ä¸€äº›å±æ€§ã€‚\nè‡ªå®šä¹‰ hooks è‡ªå®šä¹‰ hooks æ˜¯ å¯¹å·²æœ‰çš„åŸºç¡€ react hooks äº’ç›¸ç»„åˆçš„å°è£…\nè®°å½•æ—¥å¸¸é‡åˆ°çš„é—®é¢˜ï¼š 1.è¡¨å•åƒ input æ˜¯ç”¨ useState è¿˜æ˜¯ useRefï¼Œæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\nå¦‚æœå°†è¡¨å•å€¼ä¿æŒåœ¨çŠ¶æ€ï¼ˆå³å—æ§ç»„ä»¶ï¼‰ï¼Œä¸€ä¸ªå¥½å¤„æ˜¯å¯ä»¥åœ¨æ›´æ”¹æ—¶ç«‹å³è®¿é—®å€¼ï¼Œä¾‹å¦‚ï¼Œå¦‚æœä½ å¸Œæœ›åœ¨ç”¨æˆ·åœ¨è¾“å…¥æ¡†ä¸­é”®å…¥æŸäº›å†…å®¹æ—¶ç¦ç”¨æŸäº›æŒ‰é’®ã€‚\nå¦‚æœé‡‡ç”¨ ref æ–¹æ³•ï¼ˆä¹Ÿç§°ä¸ºéå—æ§ç»„ä»¶ï¼‰ï¼Œä¸€ä¸ªå¥½å¤„æ˜¯ä¸å¿…æ¯æ¬¡ç”¨æˆ·é”®å…¥æ—¶éƒ½é‡æ–°å‘ˆç°ç»„ä»¶ï¼ˆå› ä¸ºè°ƒç”¨ state update ä¼šé‡æ–°å‘ˆç°ï¼‰\n","description":"","id":47,"section":"Reactjs","tags":["React"],"title":"å­¦ä¹ React_hooks_1","uri":"https://llane.xyz/reactjs/1-react-hooks/"},{"content":" è¿™ä¸ªç³»åˆ—æ˜¯æˆ‘è¯»å†´ç¾½è€å¸ˆåšå®¢çš„æ„Ÿæ‚Ÿï¼Œ\nåŠ å…¥äº†ä¸ªäººçš„è§£è¯»å’Œç»ƒä¹ é¢˜çš„è§£ç­”\n ä¸Šç¯‡è¯´åˆ°ï¼Œå½“javascriptä»£ç æ‰§è¡Œä¸€æ®µå¯æ‰§è¡Œä»£ç (executable code)æ—¶ï¼Œä¼šåˆ›å»ºå¯¹åº”çš„æ‰§è¡Œä¸Šä¸‹æ–‡(execution context)\né‚£å¯¹äºæ¯ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œéƒ½æœ‰ä¸‰ä¸ªé‡è¦å±æ€§ï¼š\n å˜é‡å¯¹è±¡(Variable object, VO) ä½œç”¨åŸŸé“¾(Scope chain) this  æœ¬æ–‡ä¸»è¦è®²æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­çš„ä½œç”¨åŸŸé“¾ï¼Œæ³¨æ„æœ¬ç« å°†ä¼šæŠŠä¹‹å‰çš„å†…å®¹ç©¿èµ·æ¥å¾ˆé‡è¦\nåœ¨ä¹‹å‰ç¬¬2ç¯‡ä½œç”¨åŸŸå’Œç¬¬4ç¯‡å˜é‡å¯¹è±¡ä¸­æœ‰æåˆ°ï¼Œ\nå½“æŸ¥åˆ°å˜é‡æ—¶é¦–å…ˆä»å½“å‰ä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡ä¸­æŸ¥åˆ°ï¼Œ\nå¦‚æœæ²¡æœ‰æ‰¾åˆ°ä¼šä»çˆ¶çº§ï¼ˆè¯æ³•é™æ€å±‚é¢ä¸Šçš„ï¼‰æ‰§è¡Œä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡ä¸­æŸ¥æ‰¾ï¼Œ\nä¸€ç›´æ‰¾åˆ°å…¨å±€å˜é‡å¯¹è±¡ï¼ˆå…¨å±€å¯¹è±¡ï¼‰\nè¿™æ ·ç”±å¤šä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡æ„æˆçš„é“¾è¡¨å°±å«åšä½œç”¨åŸŸé“¾\nå‡½æ•°åˆ›å»º åœ¨ç¬¬2ç¯‡ä¸­æåˆ°jsä¸­å‡½æ•°çš„ä½œç”¨åŸŸåœ¨å‡½æ•°å®šä¹‰çš„æ—¶å€™å°±å†³å®šäº†\nè¿™æ˜¯å› ä¸ºå‡½æ•°æœ‰ä¸€ä¸ªå†…éƒ¨å±æ€§`[[scope]]``, å½“å‡½æ•°åˆ›å»ºçš„æ—¶å€™ä¼šæŠŠå‡½æ•°çš„çˆ¶å˜é‡å¯¹è±¡ä¿å­˜åˆ°å…¶ä¸­ï¼Œä½†ä¸æ˜¯å®Œæ•´çš„ä½œç”¨é“¾\nå¦‚ï¼š\n1 2 3 4 5  function foo() { function bar() { ... } }   æ­¤æ—¶å‡½æ•°çš„å„è‡ªä½œç”¨åŸŸä¸ºï¼š\n1 2 3 4 5 6 7  foo.[[scope]] = [ globalContext.VO ]; bar.[[scope]] = [ fooContext.AO, globalContext.VO ];   å‡½æ•°æ¿€æ´» å½“å‡½æ•°æ¿€æ´»çš„æ—¶å€™ï¼Œè¿›å…¥å‡½æ•°ä¸Šä¸‹æ–‡ï¼Œåˆ›å»ºVO/AOåï¼Œå°±ä¼šå°†å‡½æ•°æ´»åŠ¨å¯¹è±¡åŠ åˆ°ä½œç”¨åŸŸçš„æœ€å‰ç«¯ï¼Œ\n1  Scope = [AO].concat([[scope]])   æ­¤æ—¶ä½œç”¨åŸŸé“¾åˆ›å»ºå®Œæ¯•\næ€»ç»“äº‹ä¾‹ ä¾‹å­ï¼š\n1 2 3 4 5 6  var scope = \u0026#39;global scope\u0026#39;; function checkscope() { var scope2 = \u0026#39;local scope\u0026#39;; return scope2; } checkscope();   å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­ä½œç”¨åŸŸå’Œå˜é‡å¯¹è±¡åˆ›å»ºè¿‡ç¨‹å¦‚ä¸‹ï¼š\n1.checkscopeå‡½æ•°è¢«åˆ›å»ºï¼Œä¿å­˜ä½œç”¨åŸŸåˆ°å†…éƒ¨å±æ€§[[scope]]\n1 2 3  checkscope.[[scope]] = [ globalContext.VO ]   2.æ‰§è¡Œcheckscopeå‡½æ•°ï¼Œåˆ›å»ºcheckscopeå‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œcheckscopeå‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡å‹å…¥æ‰§è¡Œä¸Šä¸‹æ ˆ\n1 2 3 4  ECStack = [ checkscopeContext, globalContext ];   3.checkscopeå‡½æ•°è¿›å…¥å‡†å¤‡é˜¶æ®µ\n3.1 å¤åˆ¶å‡½æ•°å†…éƒ¨å±æ€§[[scope]]åˆ°å‡½æ•°æ‰§è¡Œä¸Šæ–‡ä¸­\n1 2 3  checkscopeContext = { Scope: checkscope.[[scope]] }   3.2 ç”¨å‡½æ•°çš„argumentså±æ€§åˆ›å»ºæ´»åŠ¨å¯¹è±¡ï¼Œéšååˆå§‹åŒ–æ´»åŠ¨å¯¹è±¡ï¼ŒåŠ å…¥å½¢å‚ã€å‡½æ•°å£°æ˜ã€å˜é‡å£°æ˜\n1 2 3 4 5 6 7 8 9  checkscopeContext = { AO: { arguments: { length: 0, }, scope2: undefined }, Scope: checkscope.[[scope]] }   3.3 å°†æ´»åŠ¨å¯¹è±¡å‹å…¥ä½œç”¨åŸŸé¡¶ç«¯\n1 2 3 4 5 6 7 8 9  checkscopeContext = { AO: { arguments: { length: 0, }, scope2: undefined }, Scope: [AO, [[scope]]] }   å‡†å¤‡å·¥ä½œå®Œæ¯•\n4.å¼€å§‹æ‰§è¡Œcheckscopeå‡½æ•°ï¼Œéšç€å‡½æ•°æ‰§è¡Œï¼Œä¿®æ”¹AOçš„å±æ€§å€¼\n1 2 3 4 5 6 7 8 9  checkscopeContext = { AO: { arguments: { length: 0, }, scope2: \u0026#39;local scope\u0026#39; }, Scope: [AO, [[scope]]] }   5.æŸ¥æ‰¾åˆ°scope2çš„å€¼ï¼Œè¿”å›åå‡½æ•°æ‰§è¡Œå®Œæ¯•ï¼Œcheckscopeå‡½æ•°ä¸Šä¸‹æ–‡ä»æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­å¼¹å‡º\n1 2 3  ECStack = [ globalContext ]   ","description":"","id":48,"section":"restart-js","tags":["jsåŸºç¡€","å­¦ä¹ ç¬”è®°"],"title":"ä»å¤´å­¦ä¹ js-5-ä½œç”¨åŸŸé“¾","uri":"https://llane.xyz/restart-js/5-%E4%BD%9C%E7%94%A8%E5%9F%9F%E9%93%BE/"},{"content":" è¿™ä¸ªç³»åˆ—æ˜¯æˆ‘è¯»å†´ç¾½è€å¸ˆåšå®¢çš„æ„Ÿæ‚Ÿï¼Œ\nåŠ å…¥äº†ä¸ªäººçš„è§£è¯»å’Œç»ƒä¹ é¢˜çš„è§£ç­”\n ä¸Šç¯‡è¯´åˆ°ï¼Œå½“javascriptä»£ç æ‰§è¡Œä¸€æ®µå¯æ‰§è¡Œä»£ç (executable code)æ—¶ï¼Œä¼šåˆ›å»ºå¯¹åº”çš„æ‰§è¡Œä¸Šä¸‹æ–‡(execution context)\né‚£å¯¹äºæ¯ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œéƒ½æœ‰ä¸‰ä¸ªé‡è¦å±æ€§ï¼š\n å˜é‡å¯¹è±¡(Variable object, VO) ä½œç”¨åŸŸé“¾(Scope chain) this  æœ¬æ–‡ä¸»è¦è®²æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­çš„å˜é‡å¯¹è±¡\nå˜é‡å¯¹è±¡ å˜é‡å¯¹è±¡æ˜¯ä¸æ‰§è¡Œä¸Šä¸‹æ–‡ç›¸å…³çš„æ•°æ®ä½œç”¨åŸŸï¼Œå‚¨å­˜äº†åœ¨ä¸Šä¸‹æ–‡ä¸­å®šä¹‰çš„å˜é‡å’Œå‡½æ•°å£°æ˜\nå› ä¸ºä¸åŒæ‰§è¡Œä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡ç¨æœ‰ä¸åŒï¼Œè¿™é‡Œåˆ†å…¨å±€ä¸Šä¸‹æ–‡ä¸‹çš„å˜é‡å¯¹è±¡å’Œå‡½æ•°ä¸Šä¸‹æ–‡ä¸‹çš„å˜é‡å¯¹è±¡æ¥è®¨è®ºã€‚\nå…¨å±€ä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡å°±æ˜¯å…¨å±€å¯¹è±¡ï¼Œæ˜¯å…¨å±€å˜é‡çš„å®¿ä¸»ã€‚\nåœ¨æµè§ˆå™¨ä¸­ï¼Œå…¨å±€ä¸­çš„thiså’Œwindowéƒ½æŒ‡å‘å…¨å±€å˜é‡\nå‡½æ•°ä¸Šä¸‹æ–‡ä¸­çš„å˜é‡å¯¹è±¡ç§°ä¸ºæ´»åŠ¨å¯¹è±¡ï¼ˆactivation objectï¼ŒAOï¼‰\næ´»åŠ¨å¯¹è±¡å°±æ˜¯å˜é‡å¯¹è±¡ï¼Œåªæ˜¯å‡½æ•°ä¸Šä¸‹æ–‡ä¸­çš„å˜é‡å¯¹è±¡åªæœ‰å‡½æ•°ä»£ç åœ¨æ‰§è¡Œåˆ°è¢«æ¿€æ´»æ—¶æ‰èƒ½è¢«è®¿é—®åˆ°ï¼Œ\næ´»åŠ¨å¯¹è±¡å°±æ˜¯åœ¨è¿›å…¥å‡½æ•°ä¸Šä¸‹æ–‡æ—¶è¢«åˆ›å»ºçš„ï¼Œå®ƒé€šè¿‡å‡½æ•°çš„argumentså±æ€§åˆå§‹åŒ–ã€‚\næ‰§è¡Œä¸Šä¸‹æ–‡ç”Ÿå‘½å‘¨æœŸï¼š  åˆ›å»ºæ‰§è¡Œä¸Šä¸‹æ–‡é˜¶æ®µ\nåˆ›å»ºå˜é‡å¯¹è±¡ï¼Œå»ºç«‹ä½œç”¨åŸŸï¼Œä»¥åŠæ˜ç¡®thisçš„æŒ‡å‘    å˜é‡å¯¹è±¡åŒ…æ‹¬ï¼š\n å‡½æ•°æ‰€æœ‰å½¢å‚   ç”±åç§°å’Œå¯¹åº”å€¼ç»„æˆçš„ä¸€ä¸ªå˜é‡å¯¹è±¡çš„å±æ€§è¢«åˆ›å»º æ²¡æœ‰å®å‚ï¼Œå±æ€§å€¼è®¾ä¸ºundefined  å‡½æ•°å£°æ˜ï¼ˆå‡½æ•°å£°æ˜ä¼˜å…ˆäºå˜é‡å£°æ˜ï¼‰   ç”±åç§°å’Œå¯¹åº”å€¼ï¼ˆå‡½æ•°å¯¹è±¡ï¼ˆfunction-objectï¼‰ï¼‰ç»„æˆçš„ä¸€ä¸ªå˜é‡å¯¹è±¡çš„å±æ€§è¢«åˆ›å»º å¦‚æœå˜é‡å¯¹è±¡å·²ç»å­˜åœ¨ç›¸åŒåç§°çš„å±æ€§ï¼Œåˆ™å®Œå…¨æ›¿æ¢è¿™ä¸ªå±æ€§  å˜é‡å£°æ˜   ç”±åç§°å’Œå¯¹åº”å€¼ï¼ˆundefinedï¼‰ç»„æˆçš„ä¸€ä¸ªå˜é‡å¯¹è±¡çš„å±æ€§è¢«åˆ›å»º å¦‚æœå˜é‡åç§°å’Œå·²ç»å£°æ˜çš„å½¢å¼å‚æ•°æˆ–å‡½æ•°ç›¸åŒï¼Œåˆ™å˜é‡å£°æ˜ä¸ä¼šå¹²æ‰°å·²ç»å­˜åœ¨çš„è¿™ç±»å±æ€§    æ‰§è¡Œä»£ç é˜¶æ®µ\nåˆ›å»ºä¸Šä¸‹æ–‡åï¼Œå¼€å§‹æ‰§è¡Œä»£ç ï¼Œ  ä¾‹å­ï¼š\n1 2 3 4 5 6 7 8 9  function foo(a) { var b = 2; function c() {} var d = function() {}; b = 3; } foo(1)   åœ¨è¿›å…¥æ‰§è¡Œä¸Šä¸‹æ–‡åï¼Œæ­¤æ—¶çš„AOä¸º\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19  AO = { //AOé€šè¿‡å‡½æ•°çš„argumentsåˆå§‹åŒ–ï¼Œæ˜¯ä¸€ä¸ªä¼ªæ•°ç»„  arguments: { 0: 1, length: 1 }, //å‡½æ•°æ‰€æœ‰å½¢å‚ ç”±åç§°å’Œå¯¹åº”å€¼ç»„æˆçš„ä¸€ä¸ªå˜é‡å¯¹è±¡çš„å±æ€§è¢«åˆ›å»º  a: 1, //å˜é‡å£°æ˜ åç§°å’Œå¯¹åº”å€¼ï¼ˆundefinedï¼‰ç»„æˆçš„ä¸€ä¸ªå˜é‡å¯¹è±¡çš„å±æ€§è¢«åˆ›å»º  b: undefined, //å‡½æ•°å£°æ˜ ç”±åç§°å’Œå¯¹åº”å€¼ï¼ˆå‡½æ•°å¯¹è±¡ï¼ˆfunction-objectï¼‰ï¼‰ç»„æˆçš„ä¸€ä¸ªå˜é‡å¯¹è±¡çš„å±æ€§è¢«åˆ›å»º  c: reference to function c(){}, //åŒä¸Šå˜é‡å£°æ˜  d: undefined }   å‡½æ•°æ‰§è¡Œåï¼š\næŒ‰é¡ºåºæ‰§è¡Œä»£ç ï¼Œåˆå§‹åŒ–å˜é‡å’Œç»™å˜é‡èµ‹å€¼\n1 2 3 4 5 6 7 8 9 10  AO = { arguments: { 0: 1, length: 1 }, a: 1, b: 3, c: reference to function c() {}, d: reference to FunctionExpression \u0026#34;d\u0026#34; }   å…³äºå£°æ˜å˜é‡å’Œå‡½æ•°æ—¶çš„è¡¥å……: è¿™é‡Œè®¤ä¸ºå£°æ˜å˜é‡å’Œå‡½æ•°éƒ½æœ‰ä¸‰ä¸ªé˜¶æ®µï¼š\n1.åˆ›å»ºcreate\n2.åˆå§‹åŒ–initializeï¼ˆå£°æ˜æ—¶é¦–æ¬¡åˆå§‹åŒ–ä¸åŒäºç¬¬ä¸‰æ­¥çš„assignï¼‰\n3.èµ‹å€¼assign\nå…³äºå£°æ˜è¯­æ³•çš„ç»“è®ºæ˜¯ï¼š\nfunction çš„ã€Œåˆ›å»ºã€ã€Œåˆå§‹åŒ–ã€å’Œã€Œèµ‹å€¼ã€éƒ½è¢«æå‡äº†ã€‚\nvar çš„ã€Œåˆ›å»ºã€å’Œã€Œåˆå§‹åŒ–ã€éƒ½è¢«æå‡äº†ã€‚\nlet çš„ã€Œåˆ›å»ºã€è¿‡ç¨‹è¢«æå‡äº†ï¼Œä½†æ˜¯åˆå§‹åŒ–æ²¡æœ‰æå‡ï¼Œæ‹¥æœ‰å—çº§ä½œç”¨(æš‚æ—¶æ€§æ­»åŒº)ã€‚\nconst åªæœ‰åˆ›å»ºå’Œåˆå§‹åŒ–ï¼Œæ²¡æœ‰ã€Œèµ‹å€¼ã€,ã€Œåˆ›å»ºã€è¿‡ç¨‹è¢«æå‡äº†ï¼Œæ‹¥æœ‰å—çº§ä½œç”¨(æš‚æ—¶æ€§æ­»åŒº)\né€šå¸¸è®¤ä¸ºconstä¸å¯å˜æ˜¯ç‰‡é¢çš„ï¼Œ\né¦–å…ˆconstå¿…é¡»åˆå§‹åŒ–ï¼Œä¸”åœ¨æ ˆä¸­å‚¨å­˜çš„å€¼ä¸å¯ä¿®æ”¹ï¼Œ\nä½†å½“constå£°æ˜çš„æ˜¯å¼•ç”¨ç±»å‹æ—¶ï¼Œå †ä¸­çš„å‚¨å­˜å€¼å¯ä»¥æ”¹å˜\nå¦‚ï¼š\n1 2 3  const obj = {name: \u0026#39;Neo\u0026#39;, age: 20} obj.age = 25 console.log(obj) //{name: \u0026#39;Neo\u0026#39;, age: 25}   å¦‚æœä¸é€šè¿‡å…³é”®è¯var letç­‰å£°æ˜å˜é‡ï¼ŒAOä¸­ä¸ä¼šåˆ›å»ºå¯¹åº”è¯¥å˜é‡çš„key-value\nä½†æ˜¯å½“è¿™ä¸ªå˜é‡è¢«èµ‹å€¼assignçš„æ—¶å€™ä¼šåˆ›å»ºå˜é‡å¯¹è±¡åˆ°VOä¸­\nmore å‚è€ƒèµ„æ–™ï¼š  å…³äºletçš„å˜é‡æå‡ï¼Ÿæ¢ç©¶ https://zhuanlan.zhihu.com/p/28140450/  ","description":"","id":49,"section":"restart-js","tags":["jsåŸºç¡€","å­¦ä¹ ç¬”è®°"],"title":"ä»å¤´å­¦ä¹ js-4-å˜é‡å¯¹è±¡","uri":"https://llane.xyz/restart-js/4-%E5%8F%98%E9%87%8F%E5%AF%B9%E8%B1%A1/"},{"content":" è¿™ä¸ªç³»åˆ—æ˜¯æˆ‘è¯»å†´ç¾½è€å¸ˆåšå®¢çš„æ„Ÿæ‚Ÿï¼Œ\nåŠ å…¥äº†ä¸ªäººçš„è§£è¯»å’Œç»ƒä¹ é¢˜çš„è§£ç­”\n æˆ‘ä»¬çŸ¥é“åœ¨jsä¸­æœ‰å˜é‡æå‡ï¼Œ\næ‰€ä»¥jså¼•æ“åœ¨è§£æä»£ç çš„æ—¶å€™ä¸æ˜¯ä¸€è¡Œä¸€è¡Œå»æ‰§è¡Œçš„ï¼Œè€Œæ˜¯ä¸€æ®µä¸€æ®µå»åˆ†æ\nï¼ˆæš‚ä¸”ä»¥å‡½æ•°èŠ±æ‹¬å·æ¥åˆ’åˆ†æ®µï¼‰\nå®é™…ç¯å¢ƒä¸­çš„å‡½æ•°å¯èƒ½æ˜¯ä¸€å±‚å¥—ä¸€å±‚æ‰§è¡Œçš„ï¼ŒåŠ ä¸Šå‡½æ•°æœ‰å„è‡ªçš„é™æ€ä½œç”¨åŸŸ\njavascriptå¼•æ“åˆ›å»ºäº†æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆï¼ˆExecution context stackï¼ŒECSï¼‰æ¥ç®¡ç†è¿™äº›æƒ…å†µ\nç”±äºå‡½æ•°çš„æ‰§è¡Œæ˜¯æœ‰é¡ºåºçš„ï¼Œæ‰§è¡Œä¸Šä¸‹æ–‡æ ˆæ˜¯å…ˆè¿›åå‡ºçš„æ ˆç»“æ„\næˆ‘ä»¬è¿™é‡Œç”¨æ•°ç»„æ¥æ¨¡æ‹Ÿå®ƒ\n1  ECStack = []   é¦–å…ˆæ‰§è¡Œå…¨å±€ä»£ç ï¼Œæ­¤æ—¶åœ¨ECStackä¸­å‹å…¥ä¸€ä¸ª globalContext\n1 2 3  ECStack = [ globalContext ]   ç„¶åæˆ‘ä»¬æ‰§è¡Œä¸‹é¢çš„å®ä¾‹ä»£ç \n1 2 3 4 5 6 7 8 9 10  function a() { console.log(\u0026#34;run a\u0026#34;) b() } function b() { console.log(\u0026#34;run b\u0026#34;) } a()   é¦–å…ˆæ‰§è¡Œaå‡½æ•°ï¼Œåœ¨ECStackä¸­å‹å…¥å‡½æ•°açš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œ\n1 2 3 4  ECStack = [ \u0026lt;a\u0026gt; functionContext, globalContext ]   å‘ç°æ‰§è¡Œå‡½æ•°aä¸­ï¼Œéœ€è¦æ‰§è¡Œbå‡½æ•°ï¼ˆæ­¤æ—¶aè¿˜æ²¡æ‰§è¡Œå®Œï¼Œæ²¡æœ‰å‡ºæ ˆï¼‰ï¼Œåœ¨ECStackä¸­å‹å…¥å‡½æ•°bçš„æ‰§è¡Œä¸Šä¸‹æ–‡\n1 2 3 4 5  ECStack = [ \u0026lt;b\u0026gt; functionContext, \u0026lt;a\u0026gt; functionContext, globalContext ]   å‡½æ•°bæ‰§è¡Œå®Œåï¼Œå‡½æ•°bçš„æ‰§è¡Œä¸Šä¸‹æ–‡å‡ºæ ˆï¼ŒECStack.pop()\nç„¶åå‡½æ•°aä¹Ÿæ‰§è¡Œå®Œäº†ï¼Œç»§ç»­ ECStack.pop()\nå°±æ˜¯è¿™ä¹ˆä¸€ä¸ªæ‰§è¡Œæ ˆ\nå¦ä¸€ä¸ªä¾‹å­ï¼š\nä»£ç A\n1 2 3 4 5 6 7 8 9  var scope = \u0026#34;global scope\u0026#34;; function checkscope(){ var scope = \u0026#34;local scope\u0026#34;; function f(){ return scope; } return f(); } checkscope();   ä»£ç B\n1 2 3 4 5 6 7 8 9  var scope = \u0026#34;global scope\u0026#34;; function checkscope(){ var scope = \u0026#34;local scope\u0026#34;; function f(){ return scope; } return f; } checkscope()();   é¦–å…ˆä»£ç Aå’Œä»£ç B éƒ½ä¼šæ‰“å° localscopeï¼Œå…·ä½“åŸå› åœ¨ä¸Šä¸€ç¯‡ä½œç”¨åŸŸä¸­æœ‰è§£é‡Š\nä½†ä¸åŒçš„æ˜¯Aå’ŒBçš„æ‰§è¡Œä¸Šä¸‹æ–‡çš„é¡ºåºä¸åŒ\nä¼ªä»£ç æ˜¯è¿™æ ·çš„\n1 2 3 4 5  //ä»£ç A ECStack.push(\u0026lt;checkscope\u0026gt; functionContext) ECStack.push(\u0026lt;f\u0026gt; functionContext) ECStack.pop() //f æ‰§è¡Œç»“æŸ ECStack.pop() //checkscope æ‰§è¡Œç»“æŸ   1 2 3 4 5  //ä»£ç B ECStack.push(\u0026lt;checkscope\u0026gt; functionContext) ECStack.pop() //checkcope æ‰§è¡Œç»“æŸ ECStack.push(\u0026lt;f\u0026gt; functionContext) ECStack.pop() //f æ‰§è¡Œç»“æŸ   ","description":"","id":50,"section":"restart-js","tags":["jsåŸºç¡€","å­¦ä¹ ç¬”è®°"],"title":"ä»å¤´å­¦ä¹ js-3-æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ","uri":"https://llane.xyz/restart-js/3-%E6%89%A7%E8%A1%8C%E4%B8%8A%E4%B8%8B%E6%96%87%E6%A0%88/"},{"content":" è¿™ä¸ªç³»åˆ—æ˜¯æˆ‘è¯»å†´ç¾½è€å¸ˆåšå®¢çš„æ„Ÿæ‚Ÿï¼Œ\nåŠ å…¥äº†ä¸ªäººçš„è§£è¯»å’Œç»ƒä¹ é¢˜çš„è§£ç­”\n ä½œç”¨åŸŸæ˜¯ç¨‹åºå¦‚ä½•å‚¨å­˜å’Œè·å–å˜é‡çš„çº¦å®š\njavascripté‡‡ç”¨äº†è¯æ³•ä½œç”¨åŸŸï¼ˆå³é™æ€ä½œç”¨åŸŸï¼‰\né™æ€ä½œç”¨åŸŸåœ¨å‡½æ•°åˆ›å»ºçš„æ—¶å€™å°±è®°ä¸‹äº†ï¼Œä¼šåœ¨å‡½æ•°ä»£ç çš„ä¹¦å†™ä½ç½®å±‚çº§å‘ä¸ŠæŸ¥æ‰¾å˜é‡\nåŠ¨æ€ä½œç”¨åŸŸåœ¨å‡½æ•°è°ƒç”¨çš„æ—¶å€™æ‰å†³å®šï¼Œä¼šåœ¨å‡½æ•°è°ƒç”¨æ ˆä¸­ä¾æ¬¡å‘ä¸ŠæŸ¥æ‰¾å˜é‡\n1 2 3 4 5 6 7 8 9 10 11 12 13  var value = 1; function foo() { console.log(value); } function bar() { var value = 2; foo(); } bar();   ä»¥ä¸Šä»£ç åœ¨é™æ€ä½œç”¨åŸŸæƒ…å†µä¸‹ä¼šæ‰“å°1\nåœ¨åŠ¨æ€ä½œç”¨åŸŸæƒ…å†µä¸‹ä¼šæ‰“å°2\n","description":"","id":51,"section":"restart-js","tags":["jsåŸºç¡€","å­¦ä¹ ç¬”è®°"],"title":"ä»å¤´å­¦ä¹ js-2-ä½œç”¨åŸŸ","uri":"https://llane.xyz/restart-js/2-%E4%BD%9C%E7%94%A8%E5%9F%9F/"},{"content":"normal æ¨¡å¼\ninsert æ¨¡å¼\nvisual æ¨¡å¼\ncontrol + [ ä»insert/visualå›åˆ°normal\nesc ä¹Ÿæ˜¯ä»insert/visualå›åˆ°normal\nnormal æ¨¡å¼ä¸‹ hjkl ç§»åŠ¨å…‰æ ‡å·¦ä¸‹ä¸Šå³\na åœ¨å…‰æ ‡åinsert\ni åœ¨å…‰æ ‡å‰insert\nshift + a åœ¨å½“å‰è¡Œç»“å°¾å¤„insert\nshift + i åœ¨å½“å‰è¡Œå¼€å¤´å¤„insert\ngg å…‰æ ‡è·³è½¬åˆ°æ–‡æ¡£ç¬¬ä¸€è¡Œ\nshift + g å…‰æ ‡è·³è½¬åˆ°æ–‡æ¡£æœ€åä¸€è¡Œ\n: + è¡Œå· + å›è½¦ å…‰æ ‡è·³è½¬åˆ°æ–‡è¡Œç‰¹å®šçš„è¡Œ\næ•°å­— + j/k å…‰æ ‡ä¸Šä¸‹ç§»åŠ¨æŒ‡å®šè¡Œæ•°\næ•°å­— + w/b å…‰æ ‡å·¦å³ç§»åŠ¨æŒ‡å®šçš„å•è¯ä¸ªæ•°\n[[ å…‰æ ‡è·³è½¬åˆ°æ–‡æ¡£ç¬¬ä¸€è¡Œ\n]] å…‰æ ‡è·³è½¬åˆ°æ–‡æ¡£æœ€åä¸€è¡Œ\nshift + { å…‰æ ‡è·³è½¬åˆ°ä¸‹ä¸€ä¸ªæ®µè½\nshift + } å…‰æ ‡è·³è½¬åˆ°ä¸Šä¸€ä¸ªæ®µè½\ncontrol + u å‘ä¸‹ç¿»é¡µ\ncontrol + d å‘ä¸Šç¿»é¡µ\n% ç”¨äºåœ¨ () {} ä¹‹é—´è·³è½¬\nzz å°†å½“å‰è¡Œå‰§ä¸­åˆ°å±å¹•ä¸­\no æ¢è¡Œinsert\nshift + o åœ¨ä¸Šä¸€è¡Œç©ºä¸€è¡Œinsert\n/ + å­—ç¬¦ä¸ºæœç´¢ ï¼ˆn å’Œ shift + n å¯ä»¥ç»§ç»­ä¸Šä¸‹é€‰æ‹©ï¼‰\nf + å­—ç¬¦ å…‰æ ‡å®šä½åˆ°å­—ç¬¦ä¸Šï¼ˆ;ç»§ç»­ä¸‹ä¸€ä¸ª ,ç»§ç»­ä¸Šä¸€ä¸ªï¼‰\nt + å­—ç¬¦ å…‰æ ‡å®šä½åˆ°å­—ç¬¦å‰ï¼ˆ;ç»§ç»­ä¸‹ä¸€ä¸ª ,ç»§ç»­ä¸Šä¸€ä¸ªï¼‰\nyy å¤åˆ¶å½“å‰è¡Œ\ndd å‰ªåˆ‡å½“å‰è¡Œï¼ˆåˆ é™¤ï¼‰\nshift + d åˆ é™¤å½“å‰è¡Œå…‰æ ‡åçš„å†…å®¹\nshift + d åˆ é™¤å½“å‰è¡Œå…‰æ ‡åçš„å†…å®¹ + insert\np é»è´´å†…å®¹åˆ°å½“å‰è¡Œçš„ä¸‹ä¸€è¡Œ\nshift + p é»è´´å†…å®¹åˆ°å½“å‰è¡Œçš„ä¸Šä¸€è¡Œ\nu æ’¤é”€\nx åˆ é™¤å…‰æ ‡é€‰ä¸­å†…å®¹\ns åˆ é™¤å…‰æ ‡é€‰ä¸­å†…å®¹å¹¶insert\nshift + s åˆ é™¤å½“å‰è¡Œå¹¶insert\ncw ç­‰ä»·äº dwi\nvisual æ¨¡å¼ä¸‹ v å•ä¸ªå­—é€‰æ‹©æ¨¡å¼\nshift + v è¡Œé€‰æ‹©æ¨¡å¼\néœ€è¦é€‰ä¸­ç¼©è¿›çš„æ—¶å€™ï¼ŒæŒ‰v(æˆ–V)è¿›å…¥visualçŠ¶æ€ï¼Œé€‰æ‹©å¤šè¡Œï¼Œç”¨\u0026gt;æˆ–\u0026lt;ç¼©è¿›æˆ–ç¼©å‡º\nä½¿ç”¨væ¥é€‰ä¸­åˆ é™¤\nv+d\nv+x\nv+s\nV+G ä¼šé€‰ä¸­å½“å‰è¡Œåˆ°æœ€åä¸€è¡Œçš„å†…å®¹\ncontrol + v å¯ä»¥è¿›å…¥visual blockæ¨¡å¼å¯ä»¥æŒ‰å—æ¥é€‰å†…å®¹\nä¾‹å­ï¼š\næ‰¹é‡åˆ é™¤æ¯ä¸€è¡Œå¼€å¤´çš„-app-\ncontrol + v + GIf-d\nå¦‚æœè¦æ‰¹é‡æ’å…¥ï¼Œæ¯ä¸€è¡Œå¼€å¤´åŠ å…¥-web-\ncontrol + v + GI-web-\n\u0026ndash;\nå®ç”¨ä¾‹å­ï¼š part 1: dt) åˆ é™¤)å‰çš„æ‰€æœ‰å†…å®¹\nvf) é€‰ä¸­åˆ°)çš„æ‰€æœ‰å†…å®¹åŒ…æ‹¬å³æ‹¬å·\nyt) å¤åˆ¶åˆ°)å‰çš„å†…å®¹\nct; åˆ é™¤åˆ°;å‰çš„æ‰€æœ‰å†…å®¹å¹¶insert\nciw åˆ é™¤å½“å‰å…‰æ ‡æ‰€åœ¨çš„å•è¯ change in word\nci\u0026quot; åˆ é™¤å½“å‰å…‰æ ‡æœ€è¿‘çš„\u0026quot;\u0026ldquo;é‡Œçš„å†…å®¹\npart 2: å››ç§åˆ é™¤ifèŠ±æ‹¬å·å†…å®¹çš„åŠæ³•ï¼ˆåˆå§‹å…‰æ ‡åœ¨ifä¸‹ä¸€è¡Œï¼‰ï¼š\nif { delete me haha wow ya } 1.shift + v 3j d\n2.d 4 d\n3.d i {\n4.d 2 i {\npart 3: \u0026ldquo;testdfat\u0026rdquo;\nå‡è®¾å…‰æ ‡åœç•™åœ¨ç¬¬ä¸€ä¸ªtä½ç½®\ndi\u0026rdquo;ï¼šdelete all content inside \u0026ldquo;ï¼Œç»“æœå­—ç¬¦ä¸²ä¸º\u0026rdquo;\u0026quot;\ndtaï¼šdelete all content to aï¼Œç»“æœå­—ç¬¦ä¸²ä¸º\u0026quot;at\u0026quot;\ndfaï¼šdelete all content from current location, until a is foundï¼Œç»“æœå­—ç¬¦ä¸²ä¸º\u0026quot;t\u0026quot;\nåœ¨vimä¸­çš„ç‰¹æ®Šå¤„ç†ï¼ˆåœ¨vscodeæ’ä»¶ä¸­æ— æ•ˆï¼‰ï¼š å½“åœ¨visualæ¨¡å¼ä¸‹é€‰ä¸­å†…å®¹æŒ‰ä¸‹:å¯ä»¥å¯¹é€‰ä¸­çš„å¤šä¸ªè¡Œåšæ‰¹å¤„ç†\næ¯”å¦‚é€‰ä¸­å :+normal A.png+å›è½¦\nä¼šåœ¨æ¯ä¸ªé€‰ä¸­è¡ŒååŠ ä¸Š.pngçš„å†…å®¹\nåˆ†äº«ä¸€ä¸‹æˆ‘çš„vimrcé…ç½® https://github.com/Llane00/my-configs/blob/main/.vimrc\nåœ¨å®‰è£…vim æ’ä»¶æ—¶é‡åˆ°çš„é—®é¢˜ï¼š\n1.you-complete-meæ— æ³•å®‰è£…ï¼ŒåŸå› æ˜¯å…¶ä¸­ä¸€ä¸ªä¾èµ–åœ¨googleèµ„æºä¸‹ï¼Œé‚£ä¹ˆå¯ä»¥å»å®˜æ–¹github issueä¸­æŸ¥æ‰¾ï¼Œæ›¿æ¢ä¾èµ–è·¯å¾„\n2.è¿˜æ˜¯ycmæ’ä»¶ï¼Œé¦–å…ˆéœ€è¦å»vim pluginç›®å½•ä¸‹æ‰¾åˆ°you-complete-meç›®å½•ï¼Œæ‰¾åˆ°install.pyï¼Œæ‰‹åŠ¨å»å®‰è£…python3 install.py\nç„¶åå®‰è£…æ—¶å‘ç°ç¼ºå°‘cmakeï¼Œé‚£ä¹ˆå°±å¦å¤–brew install cmake\n3.å®Œæˆå®‰è£…åç”±äºæˆ‘çš„ç”µè„‘ä¸Šé»˜è®¤çš„vimç‰ˆæœ¬å¤ªæ—§äº†ï¼Œä¸æ”¯æŒæœ€æ–°çš„python3æç¤ºycmæœ‰æŠ¥é”™ï¼ˆæ²¡é”™è¿˜æ˜¯è¿™ä¸ªæ’ä»¶ï¼‰ï¼Œ\næˆ‘é‡æ–°ç”¨brew å®‰è£…äº†vim brew install vim, ä¸‹è½½å®Œæ¯•åéœ€è¦åœ¨zshrcä¸­åŠ ä¸€ä¸ªaliasæŠŠvimå’Œviå‘½ä»¤æŒ‡å‘åˆ°brewæ–°ä¸‹è½½çš„vimä¸‹\nå¯ä»¥é€šè¿‡brew list vimå»æ‰¾vimä¸‹è½½çš„åœ°å€,è¿™é‡Œåªè¦vimå’Œviå¯¹åº”çš„åœ°å€\nåœ¨.zshrcä¸­åŠ å…¥ä¸‹é¢ä¸¤è¡Œ\nalias vim='/usr/local/xxx/xxx/vim' alias vi='/usr/local/xxx/xxx/vi' ä¿å­˜å¹¶source zshrcåå°±å¯ä»¥ç”Ÿæ•ˆä½¿ç”¨æ–°çš„vimäº†\nyou-complete-meä¸äºä¸ºæœ€éš¾å®‰è£…çš„vim æ’ä»¶\n","description":"","id":52,"section":"posts","tags":["å­¦ä¹ ç¬”è®°"],"title":"Vimä½¿ç”¨ç¬”è®°","uri":"https://llane.xyz/posts/vim%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/"},{"content":" è¿™ä¸ªç³»åˆ—æ˜¯æˆ‘è¯»å†´ç¾½è€å¸ˆåšå®¢çš„æ„Ÿæ‚Ÿï¼Œ\nåŠ å…¥äº†ä¸ªäººçš„è§£è¯»å’Œç»ƒä¹ é¢˜çš„è§£ç­”\n 1 2  function Person() {} let Neo = new Person()   Person æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°\nNeoæ˜¯æ„é€ å‡½æ•°Personåˆ›å»ºçš„ä¸€ä¸ªå®ä¾‹\né¦–å…ˆæ‰€æœ‰çš„å‡½æ•°éƒ½æœ‰ä¸€ä¸ªprototypeå±æ€§\nPerson.prototype ä»£è¡¨çš„æ˜¯è°ƒç”¨Personæ„é€ å‡½æ•°åˆ›å»ºçš„å®ä¾‹çš„åŸå‹\nï¼ˆå³Person.prototypeæ˜¯Neoçš„åŸå‹ï¼‰\nè€Œjsä¸­çš„å¯¹è±¡ä¹Ÿæœ‰æŒ‡å‘åŸå‹çš„å±æ€§ __proto__\næ‰€ä»¥ Person.prototype === Neo.__proto__\nå¦å¤–åŸå‹ä¹Ÿæœ‰å±æ€§constructorå¯ä»¥æŒ‡å‘å…¶å¯¹åº”çš„æ„é€ å‡½æ•°\nPerson.prototype.constructor === Person\nåŸå‹å’ŒåŸå‹é“¾æ˜¯jså®ç°ç»§æ‰¿çš„åŸºç¡€\nåŸå‹ä¹Ÿæ˜¯ä¸€ä¸ªjså¯¹è±¡ï¼Œæ‰€ä»¥åŸå‹ä¹Ÿæœ‰__proto__å±æ€§\nåŸå‹å¯¹è±¡å…¶å®æ˜¯æ„é€ å‡½æ•°Objectåˆ›å»ºçš„ä¸€ä¸ªå®ä¾‹ï¼Œæ‰€ä»¥åŸå‹çš„__proto__æŒ‡å‘çš„æ˜¯Object.prototype\nå½“åœ¨è°ƒç”¨ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æˆ–æ–¹æ³•æ—¶ï¼Œå¦‚æœè¯¥å¯¹è±¡æ²¡æœ‰è¿™ä¸ªå±æ€§æˆ–æ–¹æ³•ï¼Œæ­¤æ—¶ä¼šå»è‡ªåŠ¨æ‰¾ä»–çš„åŸå‹æ˜¯å¦æœ‰ï¼Œå¦‚æœè¿˜æ˜¯æ²¡æœ‰åˆ™ä¼šç»§ç»­å‘åŸå‹çš„åŸå‹å»æ‰¾ï¼Œä¸æ–­é‡å¤ç›´åˆ°Object.prototype.__proto__ï¼Œè€ŒObject.prototype.__proto__ä¸ºnull(å³Object.prototype æ²¡æœ‰åŸå‹)\nè¿™ä¸ªå‘ä¸Šè‡ªåŠ¨æœç´¢çˆ¶çº§åŸå‹çš„è¿‡ç¨‹å°±æ˜¯åŸå‹é“¾çš„ä½“ç°\nå³å¦‚æœNeoæ²¡æœ‰toStringæ–¹æ³•ï¼Œé€šè¿‡åŸå‹é“¾\nNeo.toString() ä¾ç„¶å¯ä»¥æ‰§è¡Œï¼Œå› ä¸ºObjectæœ‰toStringæ–¹æ³•\næ¢è¨€ä¹‹é€šè¿‡åŸå‹é“¾Neoå¯ä»¥â€œè·å¾—â€Objectçš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•\næˆ‘è¿‡å»ç»å¸¸ä¼šå›°æƒ‘å‡½æ•°æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿ï¼Œå®ƒæ˜¯æ€ä¹ˆå‚¨å­˜çš„\nä»å˜é‡çš„ç±»å‹çœ‹ï¼Œåˆ†ä¸ºåŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹\næ‰€ä»¥å‡½æ•°åªèƒ½æ˜¯ä»¥å¼•ç”¨ç±»å‹ä¸­çš„å¯¹è±¡å½¢å¼å‚¨å­˜çš„\né‚£æ„é€ å‡½æ•°Personä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œ\nå®ƒçš„__proto__æŒ‡å‘äº†å®ƒçš„åŸå‹Function.prototype\n(æ‰€æœ‰æ„é€ å‡½æ•°çš„ä¸Šä¸€çº§åŸå‹éƒ½æ˜¯Function.prototype)\nå³ï¼š\nPerson.__proto__ === Function.prototype\nFunction.prototype.__proto__ === Object.prototype\nåŒæ—¶æ„é€ å‡½æ•°Objectçš„ä¸Šä¸€çº§åŸå‹ä¹Ÿæ˜¯Function.prototype\næˆ‘ä»¬æ•´ç†ä¸€ä¸‹ï¼š æ‰€æœ‰å¯¹è±¡çš„æœ€ç»ˆåŸå‹éƒ½æ˜¯ Object.prototype\nå‡½æ•°çš„åŸå‹æ˜¯ -\u0026gt; Function.prototype çš„åŸå‹æ˜¯ -\u0026gt; Object.prototype æ²¡æœ‰åŸå‹\næ„é€ å‡½æ•°Objectçš„åŸå‹æ˜¯Function.prototype\n1 2 3  Person.__proto__ === Function.prototype Function.prototype.__proto__ === Object.prototype Object.__proto__ === Function.prototype   ä¹‹å‰çœ‹åˆ°è¿‡ä¸€ä¸ªçœ‹ä¸Šå»å¾ˆå¥‡æ€ªçš„äº‹æƒ…ï¼Œ\nFunction.__proto__ === Function.prototype\nç›®å‰å¯ä»¥ç”¨ä¸Šé¢çš„ç»“è®ºè§£é‡Šï¼šæ‰€æœ‰ï¼ˆæ„é€ ï¼‰å‡½æ•°çš„ä¸Šä¸€çº§åŸå‹éƒ½æ˜¯Function.prototype\n","description":"","id":53,"section":"restart-js","tags":["jsåŸºç¡€","å­¦ä¹ ç¬”è®°"],"title":"ä»å¤´å­¦ä¹ js-1-åŸå‹ä¸åŸå‹é“¾","uri":"https://llane.xyz/restart-js/1-%E5%8E%9F%E5%9E%8B%E4%B8%8E%E5%8E%9F%E5%9E%8B%E9%93%BE/"},{"content":"åŸå”±ç±»æŠ€èƒ½ä¼šè¢«ä¸­é€”æ‰“æ–­ == é˜²æŠ–ï¼ˆdebounceï¼‰ é˜²æ­¢æŠ–åŠ¨ï¼Œä»¥å…æŠŠä¸€æ¬¡äº‹ä»¶è¯¯è®¤ä¸ºå¤šæ¬¡\nåœºæ™¯:\n ç™»å½•ã€å‘çŸ­ä¿¡ç­‰æŒ‰é’®é¿å…ç”¨æˆ·ç‚¹å‡»å¤ªå¿«ï¼Œä»¥è‡´äºå‘é€äº†å¤šæ¬¡è¯·æ±‚ï¼Œéœ€è¦é˜²æŠ– è°ƒæ•´æµè§ˆå™¨çª—å£å¤§å°æ—¶ï¼Œresize æ¬¡æ•°è¿‡äºé¢‘ç¹ï¼Œé€ æˆè®¡ç®—è¿‡å¤šï¼Œæ­¤æ—¶éœ€è¦ä¸€æ¬¡åˆ°ä½ï¼Œå°±ç”¨åˆ°äº†é˜²æŠ– æ–‡æœ¬ç¼–è¾‘å™¨å®æ—¶ä¿å­˜ï¼Œå½“æ— ä»»ä½•æ›´æ”¹æ“ä½œä¸€ç§’åè¿›è¡Œä¿å­˜  å®ç°å…³é”®ç‚¹ï¼šé‡ç½® setTimeout\n1 2 3 4 5 6 7 8 9 10 11  function debounce(fn, delay = 500) { let timer return function () { timer \u0026amp;\u0026amp; clearTimeout(timer) const args = arguments timer = setTimeout(() =\u0026gt; { fn.apply(this, args) }, delay) } }   å¤§æ‹›æŠ€èƒ½æœ‰å†·å´ == èŠ‚æµï¼ˆthrottleï¼‰ æ§åˆ¶äº‹ä»¶å‘ç”Ÿçš„é¢‘ç‡ï¼Œå¦‚æ§åˆ¶ä¸º 1s å‘ç”Ÿä¸€æ¬¡ï¼Œç”šè‡³ 1 åˆ†é’Ÿå‘ç”Ÿä¸€æ¬¡ã€‚\nåœºæ™¯ï¼š\n scroll äº‹ä»¶ï¼Œæ¯éš”ä¸€ç§’è®¡ç®—ä¸€æ¬¡ä½ç½®ä¿¡æ¯ç­‰ æµè§ˆå™¨æ’­æ”¾äº‹ä»¶ï¼Œæ¯ä¸ªä¸€ç§’è®¡ç®—ä¸€æ¬¡è¿›åº¦ä¿¡æ¯ç­‰ input æ¡†å®æ—¶æœç´¢å¹¶å‘é€è¯·æ±‚å±•ç¤ºä¸‹æ‹‰åˆ—è¡¨ï¼Œæ²¡éš”ä¸€ç§’å‘é€ä¸€æ¬¡è¯·æ±‚ (ä¹Ÿå¯åšé˜²æŠ–)  å®ç°å…³é”®ç‚¹ï¼šlock çŠ¶æ€é”\n1 2 3 4 5 6 7 8 9 10 11 12  function throttle(fn, delay = 500) { let lock = false return function () { if (lock) return lock = true const args = arguments let timer = setTimeout(() =\u0026gt; { fn.apply(this, args) lock = false }, delay) } }   ","description":"","id":54,"section":"posts","tags":["jsåŸºç¡€","å­¦ä¹ ç¬”è®°"],"title":"Jså®ç°èŠ‚æµå’Œé˜²æŠ–","uri":"https://llane.xyz/posts/js%E5%AE%9E%E7%8E%B0%E8%8A%82%E6%B5%81%E5%92%8C%E9%98%B2%E6%8A%96/"},{"content":"å…³äºJsåŸå‹ 1 2 3 4 5 6 7 8 9 10 11  // ä¾‹å­ function Person() { } var person = new Person(); console.log(person.__proto__ == Person.prototype) // true console.log(Person.prototype.constructor == Person) // true // é¡ºä¾¿å­¦ä¹ ä¸€ä¸ªES5çš„æ–¹æ³•,å¯ä»¥è·å¾—å¯¹è±¡çš„åŸå‹ console.log(Object.getPrototypeOf(person) === Person.prototype) // true   å®ä¾‹ä¸åŸå‹ å½“è¯»å–å®ä¾‹çš„å±æ€§æ—¶ï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œå°±ä¼šæŸ¥æ‰¾ä¸å¯¹è±¡å…³è”çš„åŸå‹ä¸­çš„å±æ€§ï¼Œå¦‚æœè¿˜æŸ¥ä¸åˆ°ï¼Œå°±å»æ‰¾åŸå‹çš„åŸå‹ï¼Œä¸€ç›´æ‰¾åˆ°æœ€é¡¶å±‚ä¸ºæ­¢ã€‚\nåŸå‹çš„åŸå‹ åŸå‹ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŸå‹å¯¹è±¡å°±æ˜¯é€šè¿‡ Object æ„é€ å‡½æ•°ç”Ÿæˆçš„\nç”±äºå®ä¾‹çš„ proto æŒ‡å‘æ„é€ å‡½æ•°çš„ prototype ï¼Œ\næ‰€ä»¥Person.prototype.proto == Object.prototype\nè€Œå†å¾€ä¸ŠObject.prototype.proto == null\nè¡¥å……   å…³äºconstructor: å½“è·å– person.constructor æ—¶ï¼Œå…¶å® person ä¸­å¹¶æ²¡æœ‰ constructor å±æ€§,å½“ä¸èƒ½è¯»å–åˆ°constructor å±æ€§æ—¶ï¼Œä¼šä» person çš„åŸå‹ä¹Ÿå°±æ˜¯ Person.prototype ä¸­è¯»å–ï¼Œæ­£å¥½åŸå‹ä¸­æœ‰è¯¥å±æ€§ï¼Œæ‰€ä»¥ï¼š\nperson.constructor === Person.prototype.constructor\n  å…³äº__proto__: ç»å¤§éƒ¨åˆ†æµè§ˆå™¨éƒ½æ”¯æŒè¿™ä¸ªéæ ‡å‡†çš„æ–¹æ³•è®¿é—®åŸå‹ï¼Œç„¶è€Œå®ƒå¹¶ä¸å­˜åœ¨äº Person.prototype ä¸­ï¼Œå®é™…ä¸Šï¼Œå®ƒæ˜¯æ¥è‡ªäº Object.prototype ï¼Œä¸å…¶è¯´æ˜¯ä¸€ä¸ªå±æ€§ï¼Œä¸å¦‚è¯´æ˜¯ä¸€ä¸ª getter/setterï¼Œå½“ä½¿ç”¨ obj.proto æ—¶ï¼Œå¯ä»¥ç†è§£æˆè¿”å›äº† Object.getPrototypeOf(obj)ã€‚\n  å…³äºjsçš„â€œç»§æ‰¿â€: ç»§æ‰¿æ„å‘³ç€å¤åˆ¶æ“ä½œï¼Œç„¶è€Œ JavaScript é»˜è®¤å¹¶ä¸ä¼šå¤åˆ¶å¯¹è±¡çš„å±æ€§ï¼Œç›¸åï¼ŒJavaScript åªæ˜¯åœ¨ä¸¤ä¸ªå¯¹è±¡ä¹‹é—´åˆ›å»ºä¸€ä¸ªå…³è”ï¼Œè¿™æ ·ï¼Œä¸€ä¸ªå¯¹è±¡å°±å¯ä»¥é€šè¿‡å§”æ‰˜è®¿é—®å¦ä¸€ä¸ªå¯¹è±¡çš„å±æ€§å’Œå‡½æ•°ï¼Œæ‰€ä»¥ä¸å…¶å«ç»§æ‰¿ï¼Œå§”æ‰˜çš„è¯´æ³•åè€Œæ›´å‡†ç¡®äº›ã€‚\n  æ‰€æœ‰çš„å‡½æ•°éƒ½æ˜¯ Function çš„å®ä¾‹\n  å‚è€ƒèµ„æ–™:  JavaScriptæ·±å…¥ä¹‹ä»åŸå‹åˆ°åŸå‹é“¾  ","description":"","id":55,"section":"posts","tags":["jsåŸºç¡€","å­¦ä¹ ç¬”è®°"],"title":"JsåŸå‹","uri":"https://llane.xyz/posts/js%E5%8E%9F%E5%9E%8B/"},{"content":"å¸¸è§çš„å®šä½æ–¹æ¡ˆ æ™®é€šæµ(normal flow) åœ¨æ™®é€šæµä¸­ï¼Œå…ƒç´ æŒ‰ç…§å…¶åœ¨HTMLä¸­çš„å…ˆåä½ç½®è‡³ä¸Šè€Œä¸‹å¸ƒå±€ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œè¡Œå†…å…ƒç´ æ°´å¹³æ’åˆ—ï¼Œç›´åˆ°ä¸€è¡Œè¢«å æ»¡åæ¢è¡Œï¼Œå—çº§å…ƒç´ åˆ™ä¼šè¢«æ¸²æŸ“ä¸ºå®Œæ•´çš„ä¸€ä¸ªæ–°è¡Œï¼Œé™¤éå¦å¤–æŒ‡å®šï¼Œå¦åˆ™æ‰€æœ‰å…ƒç´ é»˜è®¤éƒ½æ˜¯æ™®é€šæµå®šä½ã€‚ä¹Ÿå¯ä»¥è¯´ï¼Œæ™®é€šæµä¸­å…ƒç´ çš„ä½ç½®ç”±è¯¥å…ƒç´ åœ¨HTMLæ–‡æ¡£ä¸­çš„ä½ç½®å†³å®šã€‚\næµ®åŠ¨(float) åœ¨æµ®åŠ¨å¸ƒå±€ä¸­ï¼Œå…ƒç´ é¦–å…ˆæŒ‰ç…§æ™®é€šæµçš„ä½ç½®å‡ºç°ï¼Œç„¶åæ ¹æ®æµ®åŠ¨çš„æ–¹å‘å°½å¯èƒ½çš„å‘å·¦è¾¹æˆ–å‘å³è¾¹åç§»ï¼Œå…¶æ•ˆæœä¸å°åˆ·æ’ç‰ˆä¸­çš„æ–‡æœ¬ç¯ç»•ç›¸ä¼¼ã€‚\nç»å¯¹å®šä½(absolute position) åœ¨ç»å¯¹å®šä½å¸ƒå±€ä¸­ï¼Œå…ƒç´ ä¼šæ•´ä½“è„±ç¦»æ™®é€šæµï¼Œå› æ­¤ç»å¯¹å®šä½å…ƒç´ ä¸ä¼šå¯¹å…¶å…„å¼Ÿå…ƒç´ é€ æˆå½±å“ï¼Œè€Œå…ƒç´ å…·ä½“çš„ä½ç½®ç”±ç»å¯¹å®šä½çš„åæ ‡å†³å®šã€‚\nBFC æ¦‚å¿µ Formatting contextï¼ˆæ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼‰æ˜¯W3C CSS2.1 è§„èŒƒä¸­çš„ä¸€ä¸ªæ¦‚å¿µã€‚å®ƒæ˜¯é¡µé¢ä¸­çš„ä¸€å—æ¸²æŸ“åŒºåŸŸï¼Œå¹¶ä¸”æœ‰ä¸€å¥—æ¸²æŸ“è§„åˆ™ï¼Œå®ƒå†³å®šäº†å…¶å­å…ƒç´ å°†å¦‚ä½•å®šä½ï¼Œä»¥åŠå’Œå…¶ä»–å…ƒç´ çš„å…³ç³»å’Œç›¸äº’ä½œç”¨ã€‚\nBFC å³ Block Formatting Contexts (å—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡)ï¼Œå®ƒå±äºä¸Šè¿°å®šä½æ–¹æ¡ˆçš„æ™®é€šæµã€‚\nå…·æœ‰ BFC ç‰¹æ€§çš„å…ƒç´ å¯ä»¥çœ‹ä½œæ˜¯éš”ç¦»äº†çš„ç‹¬ç«‹å®¹å™¨ï¼Œå®¹å™¨é‡Œé¢çš„å…ƒç´ ä¸ä¼šåœ¨å¸ƒå±€ä¸Šå½±å“åˆ°å¤–é¢çš„å…ƒç´ ï¼Œå¹¶ä¸” BFC å…·æœ‰æ™®é€šå®¹å™¨æ‰€æ²¡æœ‰çš„ä¸€äº›ç‰¹æ€§ã€‚\né€šä¿—ä¸€ç‚¹æ¥è®²ï¼Œå¯ä»¥æŠŠ BFC ç†è§£ä¸ºä¸€ä¸ªå°é—­çš„å¤§ç®±å­ï¼Œç®±å­å†…éƒ¨çš„å…ƒç´ æ— è®ºå¦‚ä½•ç¿»æ±Ÿå€’æµ·ï¼Œéƒ½ä¸ä¼šå½±å“åˆ°å¤–éƒ¨ã€‚\nBFC çš„è§¦å‘æ¡ä»¶ åªè¦å…ƒç´ æ»¡è¶³ä¸‹é¢ä»»ä¸€æ¡ä»¶å³å¯è§¦å‘ BFC ç‰¹æ€§ï¼š\n body æ ¹å…ƒç´  æµ®åŠ¨å…ƒç´ ï¼šfloat é™¤ none ä»¥å¤–çš„å€¼ ç»å¯¹å®šä½å…ƒç´ ï¼šposition (absoluteã€fixed) display ä¸º inline-blockã€table-cellsã€flex overflow é™¤äº† visible ä»¥å¤–çš„å€¼ (hiddenã€autoã€scroll)  BFC çš„åº”ç”¨  åŒä¸€ä¸ª BFC ä¸‹å¤–è¾¹è·ä¼šå‘ç”ŸæŠ˜å ã€‚å¦‚æœæƒ³è¦é¿å…å¤–è¾¹è·çš„é‡å ï¼Œå¯ä»¥å°†å…¶æ”¾åœ¨ä¸åŒçš„ BFC å®¹å™¨ä¸­ã€‚ BFC å¯ä»¥åŒ…å«æµ®åŠ¨çš„å…ƒç´ ï¼ˆæ¸…é™¤æµ®åŠ¨ï¼‰ï¼Œé˜²æ­¢æµ®åŠ¨é€ æˆé«˜åº¦åå¡Œã€‚ BFC å¯ä»¥é˜»æ­¢å…ƒç´ è¢«æµ®åŠ¨å…ƒç´ è¦†ç›–  å‚è€ƒèµ„æ–™:  10 åˆ†é’Ÿç†è§£ BFC åŸç† CSSç›’æ¨¡å‹å®Œæ•´ä»‹ç»  ","description":"","id":56,"section":"posts","tags":["cssåŸºç¡€","å­¦ä¹ ç¬”è®°"],"title":"é‡æ–°ç†è§£BFC","uri":"https://llane.xyz/posts/%E9%87%8D%E6%96%B0%E7%90%86%E8%A7%A3bfc/"},{"content":"èƒŒæ™¯ï¼š åœ¨ JavaScript é‡Œé¢ï¼Œæ•°å­—å‡ä¸ºåŒç²¾åº¦æµ®ç‚¹ç±»å‹ï¼Œå³ä¸€ä¸ªä»‹äº Â±2âˆ’1023å’Œ Â±2+1024ä¹‹é—´çš„æ•°å­—ï¼Œæˆ–çº¦ä¸º Â±10âˆ’308åˆ° Â±10+308ï¼Œæ•°å­—ç²¾åº¦ä¸º 53 ä½ã€‚æ•´æ•°æ•°å€¼ä»…åœ¨ Â±(253 - 1)çš„èŒƒå›´å†…å¯ä»¥è¡¨ç¤ºå‡†ç¡®ã€‚\nJS çš„æœ€å¤§å’Œæœ€å°å®‰å…¨å€¼å¯ä»¥è¿™æ ·è·å¾—:\n1 2  console.log(Number.MAX_SAFE_INTEGER) //9007199254740991 console.log(Number.MIN_SAFE_INTEGER) //-9007199254740991   é€šè¿‡ä¸‹é¢çš„ä¾‹å­ï¼Œä½ ä¼šæ˜ç™½ä¸ºä»€ä¹ˆå¤§äºè¿™ä¸ªå€¼çš„è¿ç®—æ˜¯ä¸å®‰å…¨çš„:\n1 2 3  var x = 9223372036854775807 console.log(x === x + 1) // output: true console.log(x === x + 1000) //output: true   ç”¨ js å®ç°æ­£æ•´æ•°å¤§æ•°ç›¸åŠ ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27  //ç”¨å­—ç¬¦ä¸²è¡¨ç¤ºå¤§æ•° let x = \u0026#39;9007199254740991\u0026#39; //Number.MAX_SAFE_INTEGER let y = \u0026#39;99999999999999999999\u0026#39; //20ä½å¤§æ•°  function bigNumberAdd(x, y) { //ä¸ºäº†æŠŠä¸¤ä¸ªæ•°å­—ä»ä¸ªä½å¼€å§‹ç›¸åŠ ï¼Œéœ€è¦è¡¥é½ä½æ•°è¾ƒå°çš„æ•°ï¼Œè®©ä¸¤ä¸ªæ•°çš„ä½æ•°ç›¸ç­‰  let maxLength = Math.max(x.length, y.length) //ç”¨0è¡¥é½ä½æ•°  x = x.padStart(maxLength, 0) y = y.padStart(maxLength, 0) let carryOver = 0 //è¿›ä½  let resultStr = \u0026#39;\u0026#39; //æœ€ç»ˆè®¡ç®—ç»“æœ  for (let i = maxLength - 1; i \u0026gt;= 0; i--) { let digitSum = parseInt(x[i]) + parseInt(y[i]) + carryOver let currentDigit = digitSum % 10 //å–ä¸ªä½  carryOver = Math.floor(digitSum / 10) //å–è¿›ä½  resultStr = currentDigit + resultStr } //å¦‚æœè¿›ä½è¿˜æœ‰1  if (carryOver == 1) { resultStr = \u0026#39;1\u0026#39; + resultStr } return resultStr }   ","description":"","id":57,"section":"posts","tags":["jsåŸºç¡€","å­¦ä¹ ç¬”è®°"],"title":"Jså®ç°å¤§æ•°ç›¸åŠ ","uri":"https://llane.xyz/posts/js%E5%AE%9E%E7%8E%B0%E5%A4%A7%E6%95%B0%E7%9B%B8%E5%8A%A0/"},{"content":"è¿™æ¬¡æ¨èçš„å‹ç¼©å·¥å…·æ˜¯ optimizt\nç¨å¾®çœ‹äº†ä¸‹ï¼Œç®—æ˜¯ä¸€ä¸ªå‹ç¼©å›¾ç‰‡çš„å·¥å…·åˆé›†\nå®‰è£…optimizt 1  npm i -g @funboxteam/optimizt   ä¹Ÿæ”¯æŒWebStorm, PhpStormç­‰æ’ä»¶\n also support External Tool in WebStorm, PhpStorm, etc\n DIYä¸€ä¸‹ optimizt æ”¯æŒç”¨findå‘½ä»¤æŸ¥æ‰¾å›¾ç‰‡\n1  optimizt `find . -type f -name \u0026#39;*.jpg\u0026#39;`   äºæ˜¯æˆ‘åœ¨.bash_profileï¼ˆæˆ–è€…å…¶ä»–Shellé…ç½®æ–‡ä»¶ï¼‰ä¸­æ·»åŠ åˆ«å + è‡ªå®šä¹‰çš„æœç´¢æ–¹å¼\n1  alias yasuo=\u0026#39;optimizt `find . -name \u0026#34;*.png\u0026#34; -o -name \u0026#34;*.jpg\u0026#34; -o -name \u0026#34;*.jpeg\u0026#34; -o -name \u0026#34;*.gif\u0026#34; -o -name \u0026#34;*.svg\u0026#34;`\u0026#39;   è¿™ä¸ªå‘½ä»¤å¯ä»¥å‹ç¼©å½“å‰ç›®å½•ä¸‹æ‰€æœ‰æ‰¾åˆ°çš„jpg/jpeg/png/gif/svgåç¼€çš„å›¾ç‰‡ï¼ˆæ”¯æŒå¤šå±‚ç›®å½•è¿­ä»£æŸ¥æ‰¾ï¼‰\nåŠ å…¥å‚æ•° -l ålosslesså¯æ— æŸå‹ç¼©\n1  alias yasuo2=\u0026#39;optimizt -l `find . -name \u0026#34;*.png\u0026#34; -o -name \u0026#34;*.jpg\u0026#34; -o -name \u0026#34;*.jpeg\u0026#34; -o -name \u0026#34;*.gif\u0026#34; -o -name \u0026#34;*.svg\u0026#34;`\u0026#39;   more:\næœ€åæ¨èä¸€æ³¢è‡ªåˆ¶å‘½ä»¤è¡ŒæŸ¥çœ‹å¤©æ°”å·¥å…· llane-weather\næ•ˆæœå¦‚ä¸‹ï¼š\nå¦‚æœè§‰å¾—æœ‰è¶£æˆ–è€…æœ‰å¸®åŠ©çš„å¯ä»¥ç‚¹ä¸‹githubçš„starï¼Œè§‰å¾—ä¸å¥½ç”¨çš„ä¹Ÿå¯ä»¥ç›´æ¥ç•™è¨€å‘Šè¯‰æˆ‘ã€‚\n","description":"","id":58,"section":"posts","tags":["å‘½ä»¤è¡Œ"],"title":"ä½¿ç”¨å‘½ä»¤è¡Œå¿«é€Ÿå‹ç¼©å›¾ç‰‡","uri":"https://llane.xyz/posts/%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%BF%AB%E9%80%9F%E5%8E%8B%E7%BC%A9%E5%9B%BE%E7%89%87/"}]